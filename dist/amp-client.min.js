var AMPClientFactory;(()=>{var t={6384:(t,e,n)=>{var r=n(7040),i=n(4125),o=n(2117),a=n(7518),u=n(4705);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=u,t.exports=c},1149:(t,e,n)=>{var r=n(5639).Uint8Array;t.exports=r},6874:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},9932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},6556:(t,e,n)=>{var r=n(9465),i=n(7813);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},4865:(t,e,n)=>{var r=n(9465),i=n(7813),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},8470:(t,e,n)=>{var r=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},9465:(t,e,n)=>{var r=n(8777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},3118:(t,e,n)=>{var r=n(3218),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},8483:(t,e,n)=>{var r=n(5063)();t.exports=r},4239:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},2980:(t,e,n)=>{var r=n(6384),i=n(6556),o=n(8483),a=n(9783),u=n(3218),c=n(1704),l=n(6390);t.exports=function t(e,n,s,f,p){e!==n&&o(n,(function(o,c){if(p||(p=new r),u(o))a(e,n,c,s,t,f,p);else{var y=f?f(l(e,c),o,c+"",e,n,p):void 0;void 0===y&&(y=o),i(e,c,y)}}),c)}},9783:(t,e,n)=>{var r=n(6556),i=n(4626),o=n(7133),a=n(278),u=n(8517),c=n(5694),l=n(1469),s=n(9246),f=n(4144),p=n(3560),y=n(3218),v=n(8630),b=n(6719),h=n(6390),m=n(9881);t.exports=function(t,e,n,d,w,g,S){var E=h(t,n),j=h(e,n),O=S.get(j);if(O)r(t,n,O);else{var T=g?g(E,j,n+"",t,e,S):void 0,k=void 0===T;if(k){var P=l(j),_=!P&&f(j),N=!P&&!_&&b(j);T=j,P||_||N?l(E)?T=E:s(E)?T=a(E):_?(k=!1,T=i(j,!0)):N?(k=!1,T=o(j,!0)):T=[]:v(j)||c(j)?(T=E,c(E)?T=m(E):y(E)&&!p(E)||(T=u(j))):k=!1}k&&(S.set(j,T),w(T,j,d,g,S),S.delete(j)),r(t,n,T)}}},8674:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},5976:(t,e,n)=>{var r=n(6557),i=n(5357),o=n(61);t.exports=function(t,e){return o(i(t,e,r),t+"")}},7415:(t,e,n)=>{var r=n(9932);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},4318:(t,e,n)=>{var r=n(1149);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},4626:(t,e,n)=>{t=n.nmd(t);var r=n(5639),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,u=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}},7133:(t,e,n)=>{var r=n(4318);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},278:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},8363:(t,e,n)=>{var r=n(4865),i=n(9465);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var u=-1,c=e.length;++u<c;){var l=e[u],s=o?o(n[l],t[l],l,n,t):void 0;void 0===s&&(s=t[l]),a?i(n,l,s):r(n,l,s)}return n}},1463:(t,e,n)=>{var r=n(5976),i=n(6612);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,u&&i(n[0],n[1],u)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r,a)}return e}))}},5063:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),u=a.length;u--;){var c=a[t?u:++i];if(!1===n(o[c],c,o))break}return e}}},3833:(t,e,n)=>{var r=n(7813),i=Object.prototype,o=i.hasOwnProperty;t.exports=function(t,e,n,a){return void 0===t||r(t,i[n])&&!o.call(a,n)?e:t}},8777:(t,e,n)=>{var r=n(852),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},9464:(t,e,n)=>{var r=n(8674)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},1994:t=>{var e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+e[t]}},1957:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},852:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},5924:(t,e,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},8517:(t,e,n)=>{var r=n(3118),i=n(5924),o=n(5726);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},6612:t=>{t.exports=function(){return!1}},5726:t=>{t.exports=function(){return!1}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var r=n(8470),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},2117:(t,e,n)=>{var r=n(8470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var r=n(8470);t.exports=function(t){return r(this.__data__,t)>-1}},4705:(t,e,n)=>{var r=n(8470);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},5357:(t,e,n)=>{var r=n(6874),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,u=i(o.length-e,0),c=Array(u);++a<u;)c[a]=o[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=o[a];return l[e]=n(c),r(t,this,l)}}},9865:t=>{t.exports=/<%-([\s\S]+?)%>/g},6051:t=>{t.exports=/<%([\s\S]+?)%>/g},5712:t=>{t.exports=/<%=([\s\S]+?)%>/g},5639:(t,e,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},6390:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},61:t=>{t.exports=function(t){return t}},9018:(t,e,n)=>{var r=n(8363),i=n(1463),o=n(1704),a=i((function(t,e,n,i){r(e,o(e),t,i)}));t.exports=a},9591:(t,e,n)=>{var r=n(6874),i=n(5976),o=n(4647),a=i((function(t,e){try{return r(t,void 0,e)}catch(t){return o(t)?t:new Error(t)}}));t.exports=a},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},7187:(t,e,n)=>{var r=n(9464),i=n(9833),o=/[&<>"']/g,a=RegExp(o.source);t.exports=function(t){return(t=i(t))&&a.test(t)?t.replace(o,r):t}},6557:t=>{t.exports=function(t){return t}},5694:t=>{t.exports=function(){return!1}},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,n)=>{var r=n(3560),i=n(1780);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},9246:(t,e,n)=>{var r=n(8612),i=n(7005);t.exports=function(t){return i(t)&&r(t)}},4144:t=>{t.exports=function(){return!1}},4647:(t,e,n)=>{var r=n(4239),i=n(7005),o=n(8630);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}},3560:(t,e,n)=>{var r=n(4239),i=n(3218);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,n)=>{var r=n(4239),i=n(5924),o=n(7005),a=Function.prototype,u=Object.prototype,c=a.toString,l=u.hasOwnProperty,s=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==s}},6719:t=>{t.exports=function(){return!1}},3674:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},1704:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},2492:(t,e,n)=>{var r=n(2980),i=n(1463)((function(t,e,n){r(t,e,n)}));t.exports=i},1106:(t,e,n)=>{var r=n(9018),i=n(9591),o=n(7415),a=n(3833),u=n(1994),c=n(4647),l=n(6612),s=n(3674),f=n(5712),p=n(5835),y=n(9833),v=/\b__p \+= '';/g,b=/\b(__p \+=) '' \+/g,h=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m=/[()=,{}\[\]\/\s]/,d=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,w=/($^)/,g=/['\n\r\u2028\u2029\\]/g,S=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var E=p.imports._.templateSettings||p;n&&l(t,e,n)&&(e=void 0),t=y(t),e=r({},e,E,a);var j,O,T=r({},e.imports,E.imports,a),k=s(T),P=o(T,k),_=0,N=e.interpolate||w,A="__p += '",R=RegExp((e.escape||w).source+"|"+N.source+"|"+(N===f?d:w).source+"|"+(e.evaluate||w).source+"|$","g"),x=S.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(R,(function(e,n,r,i,o,a){return r||(r=i),A+=t.slice(_,a).replace(g,u),n&&(j=!0,A+="' +\n__e("+n+") +\n'"),o&&(O=!0,A+="';\n"+o+";\n__p += '"),r&&(A+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),_=a+e.length,e})),A+="';\n";var I=S.call(e,"variable")&&e.variable;if(I){if(m.test(I))throw new Error("Invalid `variable` option passed into `_.template`")}else A="with (obj) {\n"+A+"\n}\n";A=(O?A.replace(v,""):A).replace(b,"$1").replace(h,"$1;"),A="function("+(I||"obj")+") {\n"+(I?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(j?", __e = _.escape":"")+(O?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+A+"return __p\n}";var C=i((function(){return Function(k,x+"return "+A).apply(void 0,P)}));if(C.source=A,c(C))throw C;return C}},5835:(t,e,n)=>{var r=n(7187),i={escape:n(9865),evaluate:n(6051),interpolate:n(5712),variable:"",imports:{_:{escape:r}}};t.exports=i},9881:(t,e,n)=>{var r=n(8363),i=n(1704);t.exports=function(t){return r(t,i(t))}},9833:t=>{t.exports=function(t){return t}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r](o,o.exports,n),o.loaded=!0,o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};(()=>{"use strict";n.d(r,{default:()=>Cl});var t={};n.r(t),n.d(t,{exclude:()=>H,extract:()=>F,parse:()=>L,parseUrl:()=>z,pick:()=>G,stringify:()=>U,stringifyUrl:()=>$});const e=JSON.parse('{"i8":"1.7.0-beta.5"}');function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,a=void 0,a=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}function a(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function u(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function c(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,l(t,e,"set"),n),n}function l(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var s=new WeakMap,f=new WeakMap,p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s,{writable:!0,value:void 0}),a(this,f,{writable:!0,value:void 0}),c(this,s,e),c(this,f,n)}var e,n,r;return e=t,(n=[{key:"semver",get:function(){return u(this,s)}},{key:"full",get:function(){return u(this,f)}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),y=n(2492);const v={single:'\n    <div class="amp-banner amp-banner--single"\n         data-amp-banner-fingerprint="<%= data.fingerprint %>">\n\n        <% if(\'img\' === data.content.type) { %>\n            <a class="amp-banner__content amp-banner__content--img"\n               href="<%= data.content.href %>"\n               <% if(null !== data.content.target) { %>target="<%- data.content.target %>"<% } %>>\n                <picture>\n                    <% (data.content.sources || []).forEach(function(source) { %>\n                        <source type="<%= source.type %>"\n                                srcset="<%= source.srcset %>"\n                                sizes="<%- data.content.sizes %>">\n                    <% }); %>\n                    <img srcset="<%= data.content.srcset %>"\n                         src="<%= data.content.src %>"\n                         sizes="<%- data.content.sizes %>"\n                         alt="<%- data.content.alt %>"\n                         <% if(null !== data.content.dimensions.width) { %>width="<%- data.content.dimensions.width %>"<% } %>\n                         <% if(null !== data.content.dimensions.height) { %>height="<%- data.content.dimensions.height %>"<% } %>\n                         <% if(\'\' !== data.content.title) { %>title="<%- data.content.title %>"<% } %>\n                         <% var loading; if(loading = banner.options.evaluate(\'loading\', 0)) { %>loading="<%- loading %>"<% } %>\n                         <% var fetchPriority; if(fetchPriority = banner.options.evaluate(\'fetchpriority\', 0)) { %>fetchpriority="<%- fetchPriority %>"<% } %>>\n                </picture>\n            </a>\n        <% } else if (\'html\' === data.content.type) { %>\n            <div class="amp-banner__content amp-banner__content--html">\n                <%= data.content.html %>\n            </div>\n        <% } %>\n\n    </div>\n',random:'\n    <div class="amp-banner amp-banner--random"\n         data-amp-banner-fingerprint="<%= data.fingerprint %>">\n\n        <% if(\'img\' === data.content.type) { %>\n            <a class="amp-banner__content amp-banner__content--img"\n               href="<%= data.content.href %>"\n               <% if(null !== data.content.target) { %>target="<%- data.content.target %>"<% } %>>\n                <picture>\n                    <% (data.content.sources || []).forEach(function(source) { %>\n                        <source type="<%= source.type %>"\n                                srcset="<%= source.srcset %>"\n                                sizes="<%- data.content.sizes %>">\n                    <% }); %>\n                    <img srcset="<%= data.content.srcset %>"\n                         src="<%= data.content.src %>"\n                         sizes="<%- data.content.sizes %>"\n                         alt="<%- data.content.alt %>"\n                         <% if(null !== data.content.dimensions.width) { %>width="<%- data.content.dimensions.width %>"<% } %>\n                         <% if(null !== data.content.dimensions.height) { %>height="<%- data.content.dimensions.height %>"<% } %>\n                         <% if(\'\' !== data.content.title) { %>title="<%- data.content.title %>"<% } %>\n                         <% var loading; if(loading = banner.options.evaluate(\'loading\', 0)) { %>loading="<%- loading %>"<% } %>\n                         <% var fetchPriority; if(fetchPriority = banner.options.evaluate(\'fetchpriority\', 0)) { %>fetchpriority="<%- fetchPriority %>"<% } %>>\n                </picture>\n            </a>\n        <% } else if (\'html\' === data.content.type) { %>\n            <div class="amp-banner__content amp-banner__content--html">\n                <%= data.content.html %>\n            </div>\n        <% } %>\n\n    </div>\n',multiple:'\n    <div class="amp-banner amp-banner--multiple">\n        <div class="amp-banner__list">\n            <% for (index in data) { var b = data[index]; %>\n                <div class="amp-banner__item"\n                     data-amp-banner-fingerprint="<%= b.fingerprint %>">\n\n                    <% if(\'img\' === b.content.type) { %>\n                        <a class="amp-banner__content amp-banner__content--img"\n                           href="<%= b.content.href %>"\n                           <% if(null !== b.content.target) { %>target="<%- b.content.target %>"<% } %>>\n                            <picture>\n                                <% (b.content.sources || []).forEach(function(source) { %>\n                                    <source type="<%= source.type %>"\n                                            srcset="<%= source.srcset %>"\n                                            sizes="<%- b.content.sizes %>">\n                                <% }); %>\n                                <img srcset="<%= b.content.srcset %>"\n                                     src="<%= b.content.src %>"\n                                     sizes="<%- b.content.sizes %>"\n                                     alt="<%- b.content.alt %>"\n                                     <% if(null !== b.content.dimensions.width) { %>width="<%- b.content.dimensions.width %>"<% } %>\n                                     <% if(null !== b.content.dimensions.height) { %>height="<%- b.content.dimensions.height %>"<% } %>\n                                     <% if(\'\' !== b.content.title) { %>title="<%- b.content.title %>"<% } %>\n                                     <% var loading; if(loading = banner.options.evaluate(\'loading\', index)) { %>loading="<%- loading %>"<% } %>\n                                     <% var fetchPriority; if(fetchPriority = banner.options.evaluate(\'fetchpriority\', index)) { %>fetchpriority="<%- fetchPriority %>"<% } %>>\n                            </picture>\n                        </a>\n                    <% } else if (\'html\' === b.content.type) { %>\n                        <div class="amp-banner__content amp-banner__content--html">\n                            <%= b.content.html %>\n                        </div>\n                    <% } %>\n\n                </div>\n            <% } %>\n        </div>\n    </div>\n'};function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var d=function(t,e){var n=Math.round(10*t)/10;return n!==t&&console.warn('The value for the option "'.concat(e,'" has been rounded to ').concat(n," (originally ").concat(t,").")),n};function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===w(o)?o:String(o)),r)}var i,o}var S=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constructor===t)throw new TypeError("Can not construct abstract class AbstractGateway.");if(this.fetch===t.prototype.fetch)throw new TypeError("Please implement abstract method ::fetch().")}var e,n,r;return e=t,(n=[{key:"fetch",value:function(t,e){throw new TypeError("Do not call abstract method ::fetch() from child.")}}])&&g(e.prototype,n),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const E="%[a-f0-9]{2}",j=new RegExp("("+E+")|([^%]+?)","gi"),O=new RegExp("("+E+")+","gi");function T(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;e=e||1;const n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],T(n),T(r))}function k(t){try{return decodeURIComponent(t)}catch{let e=t.match(j)||[];for(let n=1;n<e.length;n++)e=(t=T(e,n).join("")).match(j)||[];return t}}function P(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return function(t){const e={"%FE%FF":"��","%FF%FE":"��"};let n=O.exec(t);for(;n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{const t=k(n[0]);t!==n[0]&&(e[n[0]]=t)}n=O.exec(t)}e["%C2"]="�";const r=Object.keys(e);for(const n of r)t=t.replace(new RegExp(n,"g"),e[n]);return t}(t)}}function _(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===t||""===e)return[];const n=t.indexOf(e);return-1===n?[]:[t.slice(0,n),t.slice(n+e.length)]}function N(t,e){const n={};if(Array.isArray(e))for(const r of e){const e=Object.getOwnPropertyDescriptor(t,r);e?.enumerable&&Object.defineProperty(n,r,e)}else for(const r of Reflect.ownKeys(t)){const i=Object.getOwnPropertyDescriptor(t,r);if(i.enumerable){e(r,t[r],t)&&Object.defineProperty(n,r,i)}}return n}const A=t=>null==t,R=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)),x=Symbol("encodeFragmentIdentifier");function I(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function C(t,e){return e.encode?e.strict?R(t):encodeURIComponent(t):t}function M(t,e){return e.decode?P(t):t}function D(t){return Array.isArray(t)?t.sort():"object"==typeof t?D(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function B(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function W(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function F(t){const e=(t=B(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function L(t,e){I((e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e}).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)]$/.exec(t),t=t.replace(/\[\d*]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[])$/.exec(t),t=t.replace(/\[]$/,""),e?void 0!==r[t]?r[t]=[...r[t],n]:r[t]=[n]:r[t]=n};case"colon-list-separator":return(t,n,r)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==r[t]?r[t]=[...r[t],n]:r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const i="string"==typeof n&&n.includes(t.arrayFormatSeparator),o="string"==typeof n&&!i&&M(n,t).includes(t.arrayFormatSeparator);n=o?M(n,t):n;const a=i||o?n.split(t.arrayFormatSeparator).map((e=>M(e,t))):null===n?n:M(n,t);r[e]=a};case"bracket-separator":return(e,n,r)=>{const i=/(\[])$/.test(e);if(e=e.replace(/\[]$/,""),!i)return void(r[e]=n?M(n,t):n);const o=null===n?[]:n.split(t.arrayFormatSeparator).map((e=>M(e,t)));void 0!==r[e]?r[e]=[...r[e],...o]:r[e]=o};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[...[n[t]].flat(),e]:n[t]=e}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const i of t.split("&")){if(""===i)continue;const t=e.decode?i.replace(/\+/g," "):i;let[o,a]=_(t,"=");void 0===o&&(o=t),a=void 0===a?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:M(a,e),n(M(o,e),a,r)}for(const[t,n]of Object.entries(r))if("object"==typeof n&&null!==n)for(const[t,r]of Object.entries(n))n[t]=W(r,e);else r[t]=W(n,e);return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce(((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=D(n):t[e]=n,t}),Object.create(null))}function U(t,e){if(!t)return"";I((e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e}).arrayFormatSeparator);const n=n=>e.skipNull&&A(t[n])||e.skipEmptyString&&""===t[n],r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[C(e,t),"[",i,"]"].join("")]:[...n,[C(e,t),"[",C(i,t),"]=",C(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[C(e,t),"[]"].join("")]:[...n,[C(e,t),"[]=",C(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[C(e,t),":list="].join("")]:[...n,[C(e,t),":list=",C(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[C(n,t),e,C(i,t)].join("")]:[[r,C(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,C(e,t)]:[...n,[C(e,t),"=",C(r,t)].join("")]}}(e),i={};for(const[e,r]of Object.entries(t))n(e)||(i[e]=r);const o=Object.keys(i);return!1!==e.sort&&o.sort(e.sort),o.map((n=>{const i=t[n];return void 0===i?"":null===i?C(n,e):Array.isArray(i)?0===i.length&&"bracket-separator"===e.arrayFormat?C(n,e)+"[]":i.reduce(r(n),[]).join("&"):C(n,e)+"="+C(i,e)})).filter((t=>t.length>0)).join("&")}function z(t,e){e={decode:!0,...e};let[n,r]=_(t,"#");return void 0===n&&(n=t),{url:n?.split("?")?.[0]??"",query:L(F(t),e),...e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:M(r,e)}:{}}}function $(t,e){e={encode:!0,strict:!0,[x]:!0,...e};const n=B(t.url).split("?")[0]||"";let r=U({...L(F(t.url),{sort:!1}),...t.query},e);r&&(r=`?${r}`);let i=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);if(t.fragmentIdentifier){const r=new URL(n);r.hash=t.fragmentIdentifier,i=e[x]?r.hash:`#${t.fragmentIdentifier}`}return`${n}${r}${i}`}function G(t,e,n){n={parseFragmentIdentifier:!0,[x]:!1,...n};const{url:r,query:i,fragmentIdentifier:o}=z(t,n);return $({url:r,query:N(i,e),fragmentIdentifier:o},n)}function H(t,e,n){return G(t,Array.isArray(e)?t=>!e.includes(t):(t,n)=>!e(t,n),n)}const V=t;function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function q(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Y(o)?o:String(o)),r)}var i,o}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z(t);if(e){var i=Z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}var tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(o,t);var e,n,r,i=Q(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"fetch",value:function(t,e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(XMLHttpRequest.DONE!==r.readyState||0===r.status)return!1;var t=JSON.parse(r.responseText);200<=r.status&&300>r.status?e(t):n(t)},r.onerror=function(){n({status:"error",data:{code:r.status,error:r.statusText||"unknown"}})};var i=t.endpoint;"GET"===t.method&&(i+="?".concat(V.stringify(t.parameters))),r.open(t.method,i,!0),r.overrideMimeType("application/json"),r.setRequestHeader("Accept","application/json");var o,a=q(t.headers);try{for(a.s();!(o=a.n()).done;){var u=o.value;r.setRequestHeader(u.name,u.value)}}catch(t){a.e(t)}finally{a.f()}r.send("POST"===t.method?JSON.stringify(t.parameters):null)}}])&&K(e.prototype,n),r&&K(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(S);function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==et(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===et(o)?o:String(o)),r)}var i,o}function rt(t,e,n){it(t,e),e.set(t,n)}function it(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ot(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ct(t,e,"get"))}function at(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ut(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ct(t,e,"set"),n),n}function ct(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var lt=new WeakMap,st=new WeakMap,ft=new WeakSet,pt=function(){function t(e,n){var r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),it(r=this,i=ft),i.add(r),rt(this,lt,{writable:!0,value:void 0}),rt(this,st,{writable:!0,value:void 0}),ut(this,lt,e),ut(this,st,at(this,ft,yt).call(this,n))}var e,n,r;return e=t,(n=[{key:"name",get:function(){return ot(this,lt)}},{key:"value",get:function(){return ot(this,st)}},{key:"withValues",value:function(e){return new t(this.name,at(this,ft,yt).call(this,e).concat(this.value).filter((function(t,e,n){return n.indexOf(t)===e})))}}])&&nt(e.prototype,n),r&&nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yt(t){return Array.isArray(t)?t:[t]}function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===vt(o)?o:String(o)),r)}var i,o}function ht(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function mt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,wt(t,e,"get"))}function dt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,wt(t,e,"set"),n),n}function wt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var gt=new WeakMap,St=new WeakMap,Et=new WeakMap,jt=new WeakMap,Ot=new WeakMap,Tt=new WeakMap,kt=new WeakMap,Pt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,gt,{writable:!0,value:void 0}),ht(this,St,{writable:!0,value:void 0}),ht(this,Et,{writable:!0,value:void 0}),ht(this,jt,{writable:!0,value:void 0}),ht(this,Ot,{writable:!0,value:void 0}),ht(this,Tt,{writable:!0,value:void 0}),ht(this,kt,{writable:!0,value:function(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r].value.filter((function(t){return""!==t}));i.length&&(e[n][r]=i)}return e}}),dt(this,gt,e),dt(this,St,n),dt(this,Et,r),dt(this,jt,{}),dt(this,Ot,i),dt(this,Tt,o)}var e,n,r;return e=t,n=[{key:"addPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=mt(this,jt);if(t in r)throw new Error('Position "'+t+'" already exists.');r[t]={},n&&this.addPositionResources(t,mt(this,Ot)),this.addPositionResources(t,e)}},{key:"addPositionResources",value:function(t,e){for(var n in e)this.addPositionResource(t,e[n])}},{key:"addPositionResource",value:function(t,e){if(!(e instanceof pt))throw new TypeError("Argument resource must be instance of Resource class.");var n=mt(this,jt);if(!(t in n))throw new Error('Missing position "'+t+'".');var r=n[t];e.name in r?r[e.name]=r[e.name].withValues(e.value):r[e.name]=e}},{key:"method",get:function(){return mt(this,gt)}},{key:"endpoint",get:function(){return mt(this,St)}},{key:"locale",get:function(){return mt(this,Et)}},{key:"parameters",get:function(){var t=mt(this,kt).call(this,mt(this,jt)),e={query:"GET"===this.method?JSON.stringify(t):t};return null!==this.locale&&(e.locale=this.locale),e}},{key:"headers",get:function(){return mt(this,Tt)}}],n&&bt(e.prototype,n),r&&bt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==_t(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_t(o)?o:String(o)),r)}var i,o}function At(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Rt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,It(t,e,"get"))}function xt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,It(t,e,"set"),n),n}function It(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ct=new WeakMap,Mt=new WeakMap,Dt=new WeakMap,Bt=new WeakMap,Wt=new WeakMap,Ft=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),At(this,Ct,{writable:!0,value:void 0}),At(this,Mt,{writable:!0,value:void 0}),At(this,Dt,{writable:!0,value:void 0}),At(this,Bt,{writable:!0,value:void 0}),At(this,Wt,{writable:!0,value:void 0}),xt(this,Ct,e),xt(this,Mt,"".concat(n,"/api/v").concat(r,"/content/").concat(encodeURIComponent(i))),xt(this,Dt,null),xt(this,Bt,[]),xt(this,Wt,null)}var e,n,r;return e=t,(n=[{key:"locale",set:function(t){xt(this,Dt,t)}},{key:"origin",set:function(t){xt(this,Wt,t)}},{key:"addDefaultResource",value:function(t,e){Rt(this,Bt).push(new pt(t,e))}},{key:"create",value:function(){var t=[];return"string"==typeof Rt(this,Wt)&&""!==Rt(this,Wt)&&t.push({name:"X-Amp-Origin",value:Rt(this,Wt)}),new Pt(Rt(this,Ct),Rt(this,Mt),Rt(this,Dt),Rt(this,Bt),t)}}])&&Nt(e.prototype,n),r&&Nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zt(t,e,n){return(e=Gt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gt(r.key),r)}}function Gt(t){var e=function(t,e){if("object"!==Lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Lt(e)?e:String(e)}function Ht(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Vt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,qt(t,e,"get"))}function Yt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,qt(t,e,"set"),n),n}function qt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Jt=new WeakMap,Kt=new WeakMap,Xt=new WeakMap,Qt=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ht(this,Jt,{writable:!0,value:void 0}),Ht(this,Kt,{writable:!0,value:void 0}),Ht(this,Xt,{writable:!0,value:void 0}),Yt(this,Jt,"".concat(e,"/api/v").concat(n,"/preview/position/").concat(encodeURIComponent(r))),Yt(this,Kt,null),Yt(this,Xt,{})}var e,n,r;return e=t,n=[{key:"locale",set:function(t){Yt(this,Kt,t)}},{key:"addDefaultResource",value:function(t,e){var n=Vt(this,Xt),r=new pt(t,e);r.name in n?n[r.name]=n[r.name].withValues(r.value):n[r.name]=r}},{key:"create",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var i in"1"!==(r["omit-default-resources"]||"0").toString()?e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach((function(e){zt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Vt(this,Xt)):(e={},delete r["omit-default-resources"]),n){var o=new pt(i,n[i]);o.name in e?e[o.name]=e[o.name].withValues(o.value):e[o.name]=o}var a={};for(var u in e)e[u].value.filter((function(t){return""!==t})).length&&(a[u]=e[u].value);a=JSON.stringify(a);var c=JSON.stringify(r),l={};"{}"!==a&&(l.resources=a),"{}"!==c&&(l.options=c),null!==Vt(this,Kt)&&(l.locale=Vt(this,Kt));var s=V.stringify(l);return"".concat(Vt(this,Jt),"/").concat(encodeURIComponent(t)).concat(""!==s?"?"+s:"")}}],n&&$t(e.prototype,n),r&&$t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Zt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Zt(o)?o:String(o)),r)}var i,o}var ee=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"NEW",get:function(){return"NEW"}},{key:"RENDERED",get:function(){return"RENDERED"}},{key:"NOT_FOUND",get:function(){return"NOT_FOUND"}},{key:"ERROR",get:function(){return"ERROR"}},{key:"CLOSED",get:function(){return"CLOSED"}},{key:"STATES",get:function(){return[t.NEW,t.RENDERED,t.NOT_FOUND,t.ERROR,t.CLOSED]}}],(n=null)&&te(e.prototype,n),r&&te(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ne(o)?o:String(o)),r)}var i,o}var ie=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"ON_BANNER_ATTACHED",get:function(){return"amp:banner:attached"}},{key:"ON_BANNER_STATE_CHANGED",get:function(){return"amp:banner:state-changed"}},{key:"ON_BANNER_INTERSECTION_CHANGED",get:function(){return"amp:banner:intersection-changed"}},{key:"ON_BANNER_FIRST_TIME_SEEN",get:function(){return"amp:banner:first-time-seen"}},{key:"ON_BANNER_FIRST_TIME_FULLY_SEEN",get:function(){return"amp:banner:first-time-fully-seen"}},{key:"ON_BANNER_LINK_CLICKED",get:function(){return"amp:banner:link-clicked"}},{key:"ON_BANNER_BEFORE_CLOSE",get:function(){return"amp:banner:before-close"}},{key:"ON_BANNER_AFTER_CLOSE",get:function(){return"amp:banner:after-close"}},{key:"ON_BEFORE_FETCH",get:function(){return"amp:fetch:before"}},{key:"ON_FETCH_ERROR",get:function(){return"amp:fetch:error"}},{key:"ON_FETCH_SUCCESS",get:function(){return"amp:fetch:success"}}],(n=null)&&re(e.prototype,n),r&&re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===oe(o)?o:String(o)),r)}var i,o}var ue=function(){function t(e){var n=e.id,r=e.code,i=e.name,o=e.rotationSeconds,a=e.displayType,u=e.breakpointType,c=e.closeExpiration,l=void 0===c?null:c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.code=r,this.name=i,this.rotationSeconds=o,this.displayType=a,this.breakpointType=u,this.closeExpiration=l}var e,n,r;return e=t,r=[{key:"createInitial",value:function(e){return new t({id:null,code:e,name:null,rotationSeconds:0,displayType:null,breakpointType:null,closeExpiration:null})}}],(n=[{key:"isSingle",value:function(){return"single"===this.displayType}},{key:"isRandom",value:function(){return"random"===this.displayType}},{key:"isMultiple",value:function(){return"multiple"===this.displayType}},{key:"toObject",value:function(){return{id:this.id,code:this.code,name:this.name,rotationSeconds:this.rotationSeconds,displayType:this.displayType,breakpointType:this.breakpointType,closeExpiration:this.closeExpiration}}}])&&ae(e.prototype,n),r&&ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function le(){le=function(t,e){return new n(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function n(t,r,i){var o=new RegExp(t,r);return e.set(o,i||e.get(t)),se(o,n.prototype)}function r(t,n){var r=e.get(n);return Object.keys(r).reduce((function(e,n){var i=r[n];if("number"==typeof i)e[n]=t[i];else{for(var o=0;void 0===t[i[o]]&&o+1<i.length;)o++;e[n]=t[i[o]]}return e}),Object.create(null))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(n,RegExp),n.prototype.exec=function(e){var n=t.exec.call(this,e);if(n){n.groups=r(n,this);var i=n.indices;i&&(i.groups=r(i,this))}return n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var o=e.get(this);return t[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,(function(t,e){var n=o[e];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof i){var a=this;return t[Symbol.replace].call(this,n,(function(){var t=arguments;return"object"!=ce(t[t.length-1])&&(t=[].slice.call(t)).push(r(t,a)),i.apply(this,t)}))}return t[Symbol.replace].call(this,n,i)},le.apply(this,arguments)}function se(t,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},se(t,e)}var fe=le(/^(?:(\d+)\x2D(\d+):|(\d+):|<(\d+):|<=(\d+):|>(\d+):|>=(\d+):)?([^:\s]+)$/,{INTERVAL_FROM:1,INTERVAL_TO:2,EQ:3,LT:4,LTE:5,GT:6,GTE:7,VALUE:8}),pe={};function ye(t,e){var n=function(t){if(t in pe)return pe[t];for(var e=t.split(",").map((function(t){return t.trim()})),n=[],r=0;r<e.length;r++){var i=e[r].match(fe);if(null!==i&&void 0!==i.groups&&void 0!==i.groups.VALUE){var o=void 0;switch(!0){case void 0!==i.groups.INTERVAL_FROM&&void 0!==i.groups.INTERVAL_TO:o={from:parseInt(i.groups.INTERVAL_FROM),to:parseInt(i.groups.INTERVAL_TO),matches:function(t){return t>=this.from&&t<=this.to}};break;case void 0!==i.groups.EQ:o={eq:parseInt(i.groups.EQ),matches:function(t){return t===this.eq}};break;case void 0!==i.groups.LT:o={lt:parseInt(i.groups.LT),matches:function(t){return t<this.lt}};break;case void 0!==i.groups.LTE:o={lte:parseInt(i.groups.LTE),matches:function(t){return t<=this.lte}};break;case void 0!==i.groups.GT:o={gt:parseInt(i.groups.GT),matches:function(t){return t>this.gt}};break;case void 0!==i.groups.GTE:o={gte:parseInt(i.groups.GTE),matches:function(t){return t>=this.gte}};break;default:o={matches:function(){return!0}}}o&&(o.matches=o.matches.bind(o),o.value=i.groups.VALUE,n.push(o))}}var a={rules:n,cache:{}};return a.evaluate=function(t){Number.isInteger(t)||(t=parseInt(t));var e="i_".concat(t);if(e in this.cache)return this.cache[e];for(var n=0;n<this.rules.length;n++){var r=this.rules[n];if(r.matches(t))return this.cache[e]=r.value}return this.cache[e]=null}.bind(a),pe[t]=a,a}(t);return n.evaluate(e)}function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){me(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function me(t,e,n){return(e=we(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,we(r.key),r)}}function we(t){var e=function(t,e){if("object"!==ve(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ve(e)?e:String(e)}function ge(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Se(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var Ee=new WeakSet,je=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ge(this,Ee),this.options={},this.options=Se(this,Ee,Oe).call(this,he({},e))}var e,n,r;return e=t,n=[{key:"has",value:function(t){return void 0!==this.options[t]}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.options[t]||e}},{key:"evaluate",value:function(t,e){return void 0===this.options[t]?null:ye(this.options[t],e)}},{key:"override",value:function(t){this.options=he(he({},this.options),Se(this,Ee,Oe).call(this,he({},t)))}}],n&&de(e.prototype,n),r&&de(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Oe(t){if("loading-offset"in t){var e=t["loading-offset"],n="loading"in t?t.loading:"loading"in this.options?this.options.loading:null,r=null!==n?">=".concat(e,":").concat(n):null,i='AMP deprecation warning: The banner option "loading-offset" is deprecated and will be removed in some future release.';null!==r&&(i+=' Instead of options {"loading": "'.concat(n,'", "loading-offset": "').concat(e,'"} use an expression based option {"loading": "').concat(r,'"}.')),console.warn(i),delete t["loading-offset"],null!==r&&(t.loading=r)}return t}function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Te(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Te(o)?o:String(o)),r)}var i,o}function Pe(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function _e(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ae(t,e,"get"))}function Ne(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ae(t,e,"set"),n),n}function Ae(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Re=new WeakMap,xe=new WeakMap,Ie=new WeakMap,Ce=new WeakMap,Me=new WeakMap,De=new WeakMap,Be=function(){function t(e,n,r,i,o){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,Re,{writable:!0,value:void 0}),Pe(this,xe,{writable:!0,value:void 0}),Pe(this,Ie,{writable:!0,value:void 0}),Pe(this,Ce,{writable:!0,value:null}),Pe(this,Me,{writable:!0,value:null}),Pe(this,De,{writable:!0,value:{}}),this.constructor===t)throw new TypeError("Can not construct abstract class Banner.");Ne(this,Re,n),Ne(this,xe,r),Ne(this,Ie,new je(o)),this._eventBus=e,this._positionData=ue.createInitial(i),this.STATE=ee}var e,n,r;return e=t,n=[{key:"uid",get:function(){return _e(this,Re)}},{key:"element",get:function(){return _e(this,xe)}},{key:"state",get:function(){return _e(this,Ce)}},{key:"stateInfo",get:function(){return _e(this,Me)}},{key:"stateCounter",get:function(){return _e(this,De)[this.state]||0}},{key:"position",get:function(){return this.positionData.code}},{key:"positionData",get:function(){return this._positionData}},{key:"options",get:function(){return _e(this,Ie)}},{key:"fingerprints",get:function(){return[]}},{key:"unsetFingerprint",value:function(t){}},{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(-1===this.STATE.STATES.indexOf(t))throw new TypeError("".concat(t," is not valid state."));Ne(this,Ce,t),Ne(this,Me,e.toString()),_e(this,De)[t]=(_e(this,De)[t]||0)+1,this._eventBus.dispatch(ie.ON_BANNER_STATE_CHANGED,{banner:this})}},{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.startsWith("amp:banner:"))throw new Error('Unable to attach listener on event "'.concat(t,'" through a banner.'));return this._eventBus.subscribe(t,(function(t){t.banner===this&&(null!==n?e.call(n,t):e(t))}),this)}},{key:"getCurrentBreakpoint",value:function(t){return null}},{key:"overrideOptions",value:function(t){_e(this,Ie).override(t)}},{key:"redrawIfNeeded",value:function(){}},{key:"isManaged",value:function(){return!1}},{key:"isExternal",value:function(){return!1}},{key:"isEmbed",value:function(){return!1}}],n&&ke(e.prototype,n),r&&ke(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==We(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===We(o)?o:String(o)),r)}var i,o}var Le=function(){function t(e,n){var r=n.bannerId,i=n.bannerName,o=n.positionId,a=n.positionCode,u=n.positionName,c=n.campaignId,l=n.campaignCode,s=n.campaignName,f=n.closeExpiration,p=void 0===f?null:f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e,this.bannerId=r,this.bannerName=i,this.positionId=o,this.positionCode=a,this.positionName=u,this.campaignId=c,this.campaignCode=l,this.campaignName=s,this.closeExpiration=p}var e,n,r;return e=t,r=[{key:"createFromProperties",value:function(e){return new t(btoa(encodeURIComponent(JSON.stringify(e))),e)}},{key:"createFromValue",value:function(e){return new t(e,JSON.parse(decodeURIComponent(atob(e))))}}],(n=[{key:"toString",value:function(){return this.value}}])&&Fe(e.prototype,n),r&&Fe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Ue(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ue(o)?o:String(o)),r)}var i,o}function $e(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ge(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ve(t,e,"get"))}function He(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ve(t,e,"set"),n),n}function Ve(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ye=new WeakMap,qe=new WeakMap,Je=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$e(this,Ye,{writable:!0,value:void 0}),$e(this,qe,{writable:!0,value:void 0}),He(this,Ye,e),He(this,qe,n)}var e,n,r;return e=t,(n=[{key:"breakpoint",get:function(){return Ge(this,Ye)}},{key:"data",get:function(){return Ge(this,qe)}}])&&ze(e.prototype,n),r&&ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Ke(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ke(o)?o:String(o)),r)}var i,o}function Qe(t,e,n){Ze(t,e),e.set(t,n)}function Ze(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,nn(t,e,"get"))}function en(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,nn(t,e,"set"),n),n}function nn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var rn=new WeakMap,on=new WeakMap,an=new WeakMap,un=new WeakMap,cn=new WeakMap,ln=new WeakSet,sn=function(){function t(e,n){var r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ze(r=this,i=ln),i.add(r),Qe(this,rn,{writable:!0,value:void 0}),Qe(this,on,{writable:!0,value:void 0}),Qe(this,an,{writable:!0,value:[]}),Qe(this,un,{writable:!0,value:null}),Qe(this,cn,{writable:!0,value:{min:null,max:null,reset:function(){this.min=this.max=null}}}),en(this,rn,e),en(this,on,n)}var e,n,r;return e=t,(n=[{key:"addContent",value:function(t,e){tn(this,an).push(new Je(t,e)),en(this,un,null)}},{key:"contents",get:function(){return tn(this,an)}},{key:"content",get:function(){var t=this;if(null!==tn(this,un)&&!this.needRedraw())return tn(this,un);tn(this,cn).reset();var e=tn(this,rn).width,n=tn(this,on),r=null,i=null,o=null,a=[];if(function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,ln,fn).call(this,tn(this,an),(function(u){var c=u.breakpoint;null!==c?(a.push(c),("min"===n&&e>=c&&(null===o||o<c)||"max"===n&&e<=c&&(null===o||o>c))&&(i=u,o=c,tn(t,cn)[n]=c)):r=u})),null===i&&null===r)throw new Error("Unable to resolve content, no contents found.");a.sort((function(t,e){return t-e})),"min"===n?a.unshift(null):a.push(null);var u=a.indexOf(o);return"max"===n&&u-1 in a&&(tn(this,cn).min=a[u-1]),"min"===n&&u+1 in a&&(tn(this,cn).max=a[u+1]),en(this,un,null!==i?i:r)}},{key:"needRedraw",value:function(){if(null===tn(this,un))return!0;var t=tn(this,rn).width;return null!==tn(this,cn).min&&t<tn(this,cn).min||null!==tn(this,cn).max&&t>tn(this,cn).max}}])&&Xe(e.prototype,n),r&&Xe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fn(t,e){for(var n in t)e(t[n],n)}function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function yn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==pn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pn(o)?o:String(o)),r)}var i,o}function hn(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function mn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,wn(t,e,"get"))}function dn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,wn(t,e,"set"),n),n}function wn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var gn=new WeakMap,Sn=new WeakMap,En=new WeakMap,jn=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),hn(this,gn,{writable:!0,value:void 0}),hn(this,Sn,{writable:!0,value:void 0}),hn(this,En,{writable:!0,value:null}),dn(this,gn,e),dn(this,Sn,new sn(r,n));var i,o=yn(mn(this,gn).contents);try{for(o.s();!(i=o.n()).done;){var a=i.value;"img"!==a.type||"dimensions"in a||(a.dimensions={width:null,height:null}),mn(this,Sn).addContent(a.breakpoint,a)}}catch(t){o.e(t)}finally{o.f()}}var e,n,r;return e=t,(n=[{key:"fingerprint",get:function(){return mn(this,En)},set:function(t){if(!(t instanceof Le))throw new TypeError("The value must be instance of Fingerprint object.");dn(this,En,t)}},{key:"id",get:function(){return mn(this,gn).id}},{key:"name",get:function(){return mn(this,gn).name||null}},{key:"score",get:function(){return mn(this,gn).score}},{key:"campaign",get:function(){return console.warn("Usage of deprecated property `BannerData.campaign`. Please use property `campaignCode` instead."),this.campaignCode()}},{key:"campaignId",get:function(){return mn(this,gn).campaign_id||null}},{key:"campaignCode",get:function(){return mn(this,gn).campaign_code||mn(this,gn).campaign||null}},{key:"campaignName",get:function(){return mn(this,gn).campaign_name||null}},{key:"closeExpiration",get:function(){return"close_expiration"in mn(this,gn)?mn(this,gn).close_expiration:null}},{key:"content",get:function(){return mn(this,Sn).content.data}},{key:"needRedraw",value:function(){return mn(this,Sn).needRedraw()}}])&&bn(e.prototype,n),r&&bn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function On(t){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(t)}function Tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==On(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==On(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===On(o)?o:String(o)),r)}var i,o}function kn(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Pn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Nn(t,e,"get"))}function _n(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Nn(t,e,"set"),n),n}function Nn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var An=new WeakMap,Rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),kn(this,An,{writable:!0,value:void 0}),_n(this,An,e)}var e,n,r;return e=t,(n=[{key:"positionCode",get:function(){return Pn(this,An).positionData.code}},{key:"rotationSeconds",get:function(){return Pn(this,An).positionData.rotationSeconds}},{key:"displayType",get:function(){return Pn(this,An).positionData.displayType}},{key:"breakpointType",get:function(){return Pn(this,An).positionData.breakpointType}},{key:"fingerprints",get:function(){return Pn(this,An).fingerprints}},{key:"bannerData",get:function(){return Pn(this,An).bannerData}}])&&Tn(e.prototype,n),r&&Tn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function In(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==xn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===xn(o)?o:String(o)),r)}var i,o}var Cn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"randomByWeights",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weight",n={},r=0,i=0;i<t.length;i++)r+=t[i][e];for(var o=0;o<t.length;o++)n[o]=t[o][e]/r;for(var a=0,u=Math.random();u>0;)u-=n[a],a++;return t[--a]?t[a]:t[0]}}],(n=null)&&In(e.prototype,n),r&&In(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Mn(t){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn(t)}function Dn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Bn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Mn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Mn(o)?o:String(o)),r)}var i,o}function Fn(t,e){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fn(t,e)}function Ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zn(t);if(e){var i=zn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Un(t)}(this,n)}}function Un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zn(t){return zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zn(t)}function $n(t,e){Hn(t,e),e.add(t)}function Gn(t,e,n){Hn(t,e),e.set(t,n)}function Hn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vn(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Yn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Jn(t,e,"get"))}function qn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Jn(t,e,"set"),n),n}function Jn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Kn=new WeakMap,Xn=new WeakMap,Qn=new WeakMap,Zn=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,rr=new WeakSet,ir=new WeakSet,or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fn(t,e)}(o,t);var e,n,r,i=Ln(o);function o(t,e,n,r,a,u){var c,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};for(var f in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),$n(Un(c=i.call(this,n,r,a,u,s)),ir),$n(Un(c),rr),Gn(Un(c),Kn,{writable:!0,value:void 0}),Gn(Un(c),Xn,{writable:!0,value:void 0}),Gn(Un(c),Qn,{writable:!0,value:[]}),Gn(Un(c),Zn,{writable:!0,value:void 0}),Gn(Un(c),tr,{writable:!0,value:!1}),Gn(Un(c),er,{writable:!0,value:null}),Gn(Un(c),nr,{writable:!0,value:[]}),qn(Un(c),Kn,t),qn(Un(c),Xn,e),qn(Un(c),Zn,l),l)Yn(Un(c),Qn).push(new pt(f,l[f]));return c.setState(c.STATE.NEW,"Banner created."),c}return e=o,(n=[{key:"html",set:function(t){this.element.innerHTML=t}},{key:"resources",get:function(){return Yn(this,Qn)}},{key:"rawResources",get:function(){return Yn(this,Zn)}},{key:"data",get:function(){return console.warn("Usage of deprecated property `ManagedBanner.data`. Please use property `positionData` for accessing information about a position."),new Rn(this)}},{key:"fingerprints",get:function(){var t;try{t=this.bannerData}catch(t){return[]}return null===t?[]:(this.positionData.isMultiple()||(t=[t]),t.map((function(t){return t.fingerprint})))}},{key:"bannerData",get:function(){if(null!==Yn(this,er))return Yn(this,er);if(!Yn(this,nr).length)return null;var t=null,e=this.positionData,n=function(t){return Le.createFromProperties({bannerId:t.id,bannerName:t.name,positionId:e.id,positionCode:e.code,positionName:e.name,campaignId:t.campaignId,campaignCode:t.campaignCode,campaignName:t.campaignName,closeExpiration:t.closeExpiration})};switch(!0){case e.isSingle():(t=Yn(this,nr).reduce((function(t,e){return t.score>=e.score?t:e}))).fingerprint=n(t);break;case e.isRandom():(t=Cn.randomByWeights(Yn(this,nr),"score")).fingerprint=n(t);break;case e.isMultiple():var r,i=Dn(t=Yn(this,nr).sort((function(t,e){return e.score-t.score})));try{for(i.s();!(r=i.n()).done;){var o=r.value;o.fingerprint=n(o)}}catch(t){i.e(t)}finally{i.f()}break;default:throw new Error("Invalid display type ".concat(this.displayType,"."))}return qn(this,er,t),t}},{key:"unsetFingerprint",value:function(t){var e=t.bannerId,n=this.positionData;if(Yn(this,nr).filter((function(t){return t.id===e}))[0]){switch(!0){case n.isSingle():qn(this,nr,[]),qn(this,er,null);break;case n.isRandom():Yn(this,er)&&Yn(this,er).id===e?(qn(this,nr,[]),qn(this,er,null)):qn(this,nr,Yn(this,nr).filter((function(t){return t.id!==e})));break;case n.isMultiple():qn(this,nr,Yn(this,nr).filter((function(t){return t.id!==e}))),Yn(this,er)&&qn(this,er,Yn(this,er).filter((function(t){return t.id!==e})))}0>=Yn(this,nr).length?this.setState(this.STATE.CLOSED,"Banner has empty data."):n.isRandom()&&this.redrawIfNeeded()}}},{key:"setResponseData",value:function(t){if(Yn(this,tr))throw new Error("Data for banner on position ".concat(this.position," is already set."));this._positionData=new ue({id:t.position_id||null,code:this._positionData.code,name:t.position_name||null,rotationSeconds:t.rotation_seconds,displayType:t.display_type,breakpointType:t.breakpoint_type,closeExpiration:t.close_expiration||null}),"options"in t&&this.overrideOptions(t.options);var e=[];for(var n in t.banners||[])e.push(new jn(t.banners[n],t.breakpoint_type,Yn(this,Kn)));qn(this,nr,e),qn(this,tr,!0),0>=Yn(this,nr).length?this.setState(this.STATE.CLOSED,"Banner has empty data."):Vn(this,rr,ar).call(this,"Banner was successfully rendered.")}},{key:"getCurrentBreakpoint",value:function(t){var e=this.bannerData,n=(e=(Array.isArray(e)?e:e?[e]:[]).find((function(e){return e.id===t})))&&e.content?e.content.breakpoint:null;return null===n?null:parseInt(n)}},{key:"isManaged",value:function(){return!0}},{key:"redrawIfNeeded",value:function(){Vn(this,ir,ur).call(this)&&Vn(this,rr,ar).call(this,"Banner was successfully redrawn.")}}])&&Wn(e.prototype,n),r&&Wn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(Be);function ar(t){try{this.html=Yn(this,Xn).render(this)}catch(t){return void this.setState(this.STATE.ERROR,"Render error: "+t.message)}this.setState(this.STATE.RENDERED,t)}function ur(){var t=this.bannerData;for(var e in Array.isArray(t)||(t=[t]),t)if(t[e].needRedraw())return!0;return!1}function cr(t){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cr(t)}function lr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return sr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==cr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===cr(o)?o:String(o)),r)}var i,o}var pr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"parseResources",value:function(t){var e,n={},r=[].filter.call(t.attributes,(function(t){return/^data-amp-resource-\S+/.test(t.name)})),i=lr(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.value&&(n[o.name.slice(18)]=o.value.split(",").map((function(t){return t.trim()})))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"parseOptions",value:function(t){var e,n={},r=lr([].filter.call(t.attributes,(function(t){return/^data-amp-option-\S+/.test(t.name)})));try{for(r.s();!(e=r.n()).done;){var i=e.value;i.value&&(n[i.name.slice(16)]=i.value.trim())}}catch(t){r.e(t)}finally{r.f()}return n}}],(n=null)&&fr(e.prototype,n),r&&fr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yr(t){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(t)}function vr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return br(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function br(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==yr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===yr(o)?o:String(o)),r)}var i,o}function mr(t,e){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mr(t,e)}function dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gr(t);if(e){var i=gr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===yr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wr(t)}(this,n)}}function wr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gr(t){return gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gr(t)}function Sr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Er(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Or(t,e,"get"))}function jr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Or(t,e,"set"),n),n}function Or(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Tr=new WeakMap,kr=new WeakMap,Pr=new WeakMap,_r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e)}(o,t);var e,n,r,i=dr(o);function o(t,e,n,r){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),!("ampBannerExternal"in r.dataset))throw new Error('Unable to initialize ExternalBanner from element that does not have an attribute "data-amp-external".');var u=JSON.parse(decodeURIComponent(atob(r.dataset.ampBannerExternal)));if(!("state"in u)||!("positionData"in u))throw new Error('Unable to initialize ExternalBanner data attribute "data-amp-external" is malformed.');var c=u.state,l=new ue(u.positionData),s=pr.parseOptions(r);Sr(wr(a=i.call(this,e,n,r,l.code,s)),Tr,{writable:!0,value:[]}),Sr(wr(a),kr,{writable:!0,value:null}),Sr(wr(a),Pr,{writable:!0,value:!1});var f,p=[],y={},v=vr(r.querySelectorAll("[data-amp-banner-fingerprint]"));try{for(v.s();!(f=v.n()).done;){var b=f.value,h=Le.createFromValue(b.dataset.ampBannerFingerprint);p.push(h);var m,d=vr(b.querySelectorAll("[data-amp-content-breakpoint]"));try{for(d.s();!(m=d.n()).done;){var w=m.value,g=w.dataset.ampContentBreakpoint;g="default"===g?null:parseInt(g),h.bannerId in y||(y[h.bannerId]=new sn(t,l.breakpointType)),y[h.bannerId].addContent(g,w)}}catch(t){d.e(t)}finally{d.f()}}}catch(t){v.e(t)}finally{v.f()}return a._positionData=l,jr(wr(a),Tr,p),jr(wr(a),kr,y),a.setState(c.value,c.info),a}return e=o,(n=[{key:"fingerprints",get:function(){return Er(this,Tr)}},{key:"unsetFingerprint",value:function(t){jr(this,Tr,Er(this,Tr).filter((function(e){return e.value!==t.value})));var e=t.bannerId;e in Er(this,kr)&&delete Er(this,kr)[e],0>=Er(this,Tr).length&&this.setState(this.STATE.CLOSED,"Banner has empty data.")}},{key:"getCurrentBreakpoint",value:function(t){var e=Er(this,kr)[t]||null;if(null===e)return null;if(Er(this,Pr))return e.content?e.content.breakpoint:null;var n,r=vr(e.contents);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("none"!==getComputedStyle(i.data).display)return i.breakpoint}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"isExternal",value:function(){return!0}},{key:"delegateResponsiveBehaviour",value:function(){if(!Er(this,Pr)){jr(this,Pr,!0);var t,e=vr(this.element.querySelectorAll("style"));try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(t){e.e(t)}finally{e.f()}this.redrawIfNeeded()}}},{key:"redrawIfNeeded",value:function(){if(Er(this,Pr))for(var t in Er(this,kr)){var e=Er(this,kr)[t];if(e.needRedraw()){var n,r=e.content,i=vr(e.contents);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.data.style.display=o===r?"block":"none"}}catch(t){i.e(t)}finally{i.f()}}}}}])&&hr(e.prototype,n),r&&hr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(Be);function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Nr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Nr(o)?o:String(o)),r)}var i,o}function Rr(t,e){return Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rr(t,e)}function xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cr(t);if(e){var i=Cr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ir(t)}(this,n)}}function Ir(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cr(t){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cr(t)}function Mr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Dr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Wr(t,e,"get"))}function Br(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Wr(t,e,"set"),n),n}function Wr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Fr=new WeakMap,Lr=new WeakMap,Ur=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rr(t,e)}(o,t);var e,n,r,i=xr(o);function o(t,e,n,r,a,u){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Mr(Ir(c=i.call(this,t,e,n,a,u)),Fr,{writable:!0,value:void 0}),Mr(Ir(c),Lr,{writable:!0,value:void 0}),Br(Ir(c),Fr,r),Br(Ir(c),Lr,[]),c.setState(c.STATE.NEW,"Banner created."),c}return e=o,(n=[{key:"iframe",get:function(){return Dr(this,Fr)}},{key:"fingerprints",get:function(){return Dr(this,Lr)}},{key:"unsetFingerprint",value:function(t){Br(this,Lr,Dr(this,Lr).filter((function(e){return e.value!==t.value}))),0>=Dr(this,Lr).length&&this.setState(this.STATE.CLOSED,"Banner has empty data.")}},{key:"getCurrentBreakpoint",value:function(t){throw new Error("Method EmbedBanner.getCurrentBreakpoint() is not readable.")}},{key:"isEmbed",value:function(){return!0}},{key:"updatePositionData",value:function(t){for(var e=this.positionData,n=0,r=["id","name","rotationSeconds","displayType","breakpointType","closeExpiration"];n<r.length;n++){var i=r[n];i in t&&(e[i]=t[i])}}},{key:"updateFingerprints",value:function(t){Br(this,Lr,t.map((function(t){return t instanceof Le?t:Le.createFromValue(t)})))}}])&&Ar(e.prototype,n),r&&Ar(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(Be);function zr(t){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zr(t)}function $r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==zr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===zr(o)?o:String(o)),r)}var i,o}function Gr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Hr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Vr(t,e,"set"),n),n}function Vr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Yr=new WeakMap,qr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Gr(this,Yr,{writable:!0,value:void 0}),Hr(this,Yr,e-1)}var e,n,r;return e=t,(n=[{key:"getNextIdentifier",value:function(){var t,e;return Hr(this,Yr,(t=function(t,e){return e.get?e.get.call(t):e.value}(e=this,Vr(e,Yr,"get")),++t))}}])&&$r(e.prototype,n),r&&$r(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jr(t,e){if(t instanceof e.HTMLElement)return t;if("string"!=typeof t)throw new TypeError("Element must be instance of HTMLElement or String");var n;if(!((n="#"===t.charAt(0)?document.getElementById(t.slice(1)):document.querySelector(t))instanceof e.HTMLElement))throw new TypeError("Selector "+t+" is invalid.");return n}function Kr(t){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kr(t)}function Xr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Qr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Kr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Kr(o)?o:String(o)),r)}var i,o}function ti(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function ei(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ri(t,e,"get"))}function ni(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ri(t,e,"set"),n),n}function ri(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ii=new WeakMap,oi=new WeakMap,ai=new WeakMap,ui=new WeakMap,ci=new WeakMap,li=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ti(this,ii,{writable:!0,value:void 0}),ti(this,oi,{writable:!0,value:void 0}),ti(this,ai,{writable:!0,value:void 0}),ti(this,ui,{writable:!0,value:void 0}),ti(this,ci,{writable:!0,value:[]}),ni(this,ii,e),ni(this,oi,n),ni(this,ai,r),ni(this,ui,new qr),this.STATE=ee}var e,n,r;return e=t,n=[{key:"addExternalBanner",value:function(t){(t=Jr(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:window)).setAttribute("data-amp-attached","");var e=new _r(ei(this,oi),ei(this,ii),ei(this,ui).getNextIdentifier(),t);return ei(this,ci).push(e),e}},{key:"addManagedBanner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;if(null===ei(this,ai))throw new Error("Unable to add managed banner, renderer is not provided.");(t=Jr(t,i)).setAttribute("data-amp-attached","");var o=new or(ei(this,oi),ei(this,ai),ei(this,ii),ei(this,ui).getNextIdentifier(),t,e,n,r);return ei(this,ci).push(o),o}},{key:"addEmbedBanner",value:function(t,e,n,r){t=Jr(t,window),e=Jr(e,window),t.setAttribute("data-amp-attached","");var i=new Ur(ei(this,ii),ei(this,ui).getNextIdentifier(),t,e,n,r);return ei(this,ci).push(i),i}},{key:"removeBanner",value:function(t){var e=ei(this,ci).length;return ni(this,ci,ei(this,ci).filter((function(e){return e!==t}))),e!==ei(this,ci).length}},{key:"getBannersByState",value:function(t){var e=t.state,n=t.managed,r=void 0===n||n,i=t.external,o=void 0===i||i,a=t.embed,u=void 0===a||a;return ei(this,ci).filter((function(t){return t instanceof Be&&t.state===e&&!(t instanceof or&&!r||t instanceof _r&&!o||t instanceof Ur&&!u)}))}},{key:"getBannerByFingerprint",value:function(t){var e,n=t instanceof Le?t.value:t,r=Xr(ei(this,ci));try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!(i instanceof Ur)){var o,a=Xr(i.fingerprints);try{for(a.s();!(o=a.n()).done;)if(o.value.value===n)return i}catch(t){a.e(t)}finally{a.f()}}}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"getBannerByUid",value:function(t){var e,n=Xr(ei(this,ci));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.uid===t)return r}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"getBannerByPosition",value:function(t){var e,n=Xr(ei(this,ci));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.position===t)return r}}catch(t){n.e(t)}finally{n.f()}return null}}],n&&Zr(e.prototype,n),r&&Zr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function si(t){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(t)}function fi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==si(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===si(o)?o:String(o)),r)}var i,o}function pi(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function yi(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,vi(t,e,"set"),n),n}function vi(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var bi=new WeakMap,hi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),pi(this,bi,{writable:!0,value:void 0}),yi(this,bi,e)}var e,n,r;return e=t,r=[{key:"fromCurrentWindow",value:function(){return new t((function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}))}}],(n=[{key:"width",get:function(){return(t=this,e=bi,function(t,e){return e.get?e.get.call(t):e.value}(t,vi(t,e,"get"))).call(this);var t,e}}])&&fi(e.prototype,n),r&&fi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mi(t){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(t)}function di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==mi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===mi(o)?o:String(o)),r)}var i,o}function gi(t,e,n){return e&&wi(t.prototype,e),n&&wi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Si=function(){function t(e){var n=e.key,r=e.expiresAt;di(this,t),this.key=n,this.expiresAt=r}return gi(t,null,[{key:"position",value:function(e){var n=e.positionCode,r=e.closingExpiration;if("number"!=typeof r)throw new Error("Unable to create position entry via factory ClosingEntry::position({ positionCode: ".concat(n,", closingExpiration: ").concat(r,' }), argument "closingExpiration" must be a number.'));return new t({key:Ei.position(n),expiresAt:Math.round(+new Date/1e3+r)})}},{key:"banner",value:function(e){var n=e.positionCode,r=e.bannerId,i=e.closingExpiration;return new t({key:Ei.banner(n,r),expiresAt:"number"==typeof i&&Math.round(+new Date/1e3+i)})}}]),t}(),Ei=function(){function t(e){var n=e.value,r=e.type,i=e.args;di(this,t),this.value=n,this.type=r,this.args=i}return gi(t,[{key:"isPosition",value:function(){return"position"===this.type}},{key:"isBanner",value:function(){return"banner"===this.type}},{key:"toString",value:function(){return this.value}}],[{key:"position",value:function(e){return new t({value:"p:".concat(e),type:"position",args:{positionCode:e}})}},{key:"banner",value:function(e,n){return new t({value:"b:".concat(e,":").concat(n),type:"banner",args:{positionCode:e,bannerId:n}})}},{key:"tryParse",value:function(e){var n=e.split(":");switch(!0){case"p"===n[0]&&2===n.length:return t.position(n[1]);case"b"===n[0]&&3===n.length:return t.banner(n[1],n[2])}return null}}]),t}();function ji(t){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(t)}function Oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ji(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ji(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ji(o)?o:String(o)),r)}var i,o}function Ti(t,e){Pi(t,e),e.add(t)}function ki(t,e,n){Pi(t,e),e.set(t,n)}function Pi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _i(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ai(t,e,"get"))}function Ni(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ai(t,e,"set"),n),n}function Ai(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Ri(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var xi=new WeakMap,Ii=new WeakMap,Ci=new WeakMap,Mi=new WeakMap,Di=new WeakSet,Bi=new WeakSet,Wi=new WeakSet,Fi=new WeakSet,Li=function(){function t(e){var n=this,r=e.storage,i=e.key,o=e.maxItems,a=e.onExternalChange;switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ti(this,Fi),Ti(this,Wi),Ti(this,Bi),Ti(this,Di),ki(this,xi,{writable:!0,value:void 0}),ki(this,Ii,{writable:!0,value:void 0}),ki(this,Ci,{writable:!0,value:void 0}),ki(this,Mi,{writable:!0,value:null}),r){case"localStorage":"localStorage"in window?r=window.localStorage:(console.warn("LocalStorage is not accessible in the window, fallback to memoryStorage."),r=Ri(this,Wi,$i).call(this));break;case"sessionStorage":"sessionStorage"in window?r=window.sessionStorage:(console.warn("SessionStorage is not accessible in the window, fallback to memoryStorage."),r=Ri(this,Wi,$i).call(this));break;default:"memoryStorage"!==r&&console.warn('Unknown storage "'.concat(r,'", fallback to memoryStorage.')),r=Ri(this,Wi,$i).call(this)}Ni(this,xi,r),Ni(this,Ii,i),Ni(this,Ci,o),a&&_i(this,xi)instanceof Storage&&window.addEventListener("storage",(function(t){if(null===t.key||_i(n,Ii)===t.key){var e=_i(n,Mi)||{},r=null!==t.newValue&&""!==t.newValue?JSON.parse(t.newValue):{},i=Object.keys(e),o=Object.keys(r).filter((function(t){return!i.includes(t)})).map((function(t){return Ei.tryParse(t)})).filter((function(t){return null!==t}));Ni(n,Mi,r),0<o.length&&a(o)}}))}var e,n,r;return e=t,(n=[{key:"close",value:function(t){var e=Ri(this,Di,Ui).call(this),n=Ri(this,Fi,Gi).call(this),r=!1;for(var i in t){var o=t[i];if(!(!1!==o.expiresAt&&o.expiresAt<=n)){var a=o.key.toString();a in e&&e[a]===o.expiresAt||(e[a]=o.expiresAt,r=!0)}}if(r){var u=Object.values(e).length;u>_i(this,Ci)&&Object.entries(e).sort((function(t,e){return(t[1]||Number.MAX_SAFE_INTEGER)-(e[1]||Number.MAX_SAFE_INTEGER)})).slice(0,u-_i(this,Ci)).forEach((function(t){delete e[t[0]]})),Ni(this,Mi,e),Ri(this,Bi,zi).call(this)}}},{key:"release",value:function(t){var e=Ri(this,Di,Ui).call(this),n=!1;for(var r in t){var i=t[r].toString();i in e&&(delete e[i],n=!0)}n&&(Ni(this,Mi,e),Ri(this,Bi,zi).call(this))}},{key:"isClosed",value:function(t){var e=this,n=Ri(this,Di,Ui).call(this),r=t.toString();return r in n&&(!1===n[r]||n[r]>Ri(this,Fi,Gi).call(this)||(setTimeout((function(){return e.release([t])}),0),!1))}}])&&Oi(e.prototype,n),r&&Oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ui(){if(null!==_i(this,Mi))return _i(this,Mi);var t=_i(this,xi).getItem(_i(this,Ii)),e=null!==t&&""!==t?JSON.parse(t):{};return Array.isArray(e)&&(e={},_i(this,xi).setItem(_i(this,Ii),"{}")),Ni(this,Mi,e)}function zi(){null!==_i(this,Mi)&&_i(this,xi).setItem(_i(this,Ii),JSON.stringify(_i(this,Mi)))}function $i(){var t={items:{}};return t.setItem=function(t,e){this.items[t]=e}.bind(t),t.getItem=function(t){return t in this.items?this.items[t]:null}.bind(t),t}function Gi(){return Math.round(+new Date/1e3)}function Hi(t){return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi(t)}function Vi(t){return function(t){if(Array.isArray(t))return Yi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Yi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yi(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Hi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Hi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Hi(o)?o:String(o)),r)}var i,o}function Ji(t,e,n){Ki(t,e),e.set(t,n)}function Ki(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xi(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Qi(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,to(t,e,"get"))}function Zi(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,to(t,e,"set"),n),n}function to(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var eo=new WeakMap,no=new WeakMap,ro=new WeakMap,io=new WeakMap,oo=new WeakMap,ao=new WeakSet,uo=function(){function t(e){var n,r,i=this,o=e.bannerManager,a=e.eventBus,u=e.config,c=void 0===u?{storage:"memoryStorage",key:"amp-closed-banners",maxItems:500}:u,l=e.bannerFrameMessenger,s=void 0===l?void 0:l,f=e.parentFrameMessenger,p=void 0===f?void 0:f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ki(n=this,r=ao),r.add(n),Ji(this,eo,{writable:!0,value:void 0}),Ji(this,no,{writable:!0,value:void 0}),Ji(this,ro,{writable:!0,value:void 0}),Ji(this,io,{writable:!0,value:void 0}),Ji(this,oo,{writable:!0,value:void 0}),Zi(this,eo,o),Zi(this,no,a),Zi(this,ro,s),Zi(this,io,p);var y=c.storage,v=c.key,b=c.maxItems;Zi(this,oo,new Li({storage:y,key:v,maxItems:b,onExternalChange:function(t){for(var e=0;e<t.length;e++){var n=t[e];n.isBanner()&&i.closeBanner(n.args.positionCode,n.args.bannerId)}}})),Qi(this,ro)&&Qi(this,ro).on("storeClosedEntries",(function(t){var e=t.data,n=e.uid,r=e.entries,o=e.fingerprints,a=Qi(i,eo).getBannerByUid(n);if(a instanceof Ur){for(var u=0;u<o.length;u++)a.unsetFingerprint(Le.createFromValue(o[u]));Qi(i,oo).close(r.map((function(t){return new Si({key:Ei.tryParse(t.key),expiresAt:t.expiresAt})})))}})),Qi(this,io)&&Qi(this,io).on("closeBanner",(function(t){var e=t.data,n=e.positionCode,r=e.bannerId;n&&r&&i.closeBanner(n,r)}))}var e,n,r;return e=t,(n=[{key:"attachUi",value:function(){var t=this;Qi(this,no).subscribe(ie.ON_BANNER_STATE_CHANGED,(function(e){var n=e.banner;n.state===n.STATE.RENDERED?Array.from(n.element.querySelectorAll("[data-amp-banner-close]")).forEach((function(e){e.addEventListener("click",(function(r){r.preventDefault();var i=e.closest("[data-amp-banner-fingerprint]");if(i)for(var o=i.dataset.ampBannerFingerprint,a=n.fingerprints,u=0;u<a.length;u++){var c=a[u];c.value===o&&t.closeBanner(n.position,c.bannerId)}}))})):n.state===n.STATE.CLOSED&&(n.element.innerHTML="")}),null,-100)}},{key:"isBannerClosed",value:function(t,e){return Qi(this,oo).isClosed(Ei.banner(t,e))}},{key:"isPositionClosed",value:function(t){return Qi(this,oo).isClosed(Ei.position(t))}},{key:"closeBanner",value:function(t,e){var n=this,r=Qi(this,eo).getBannerByPosition(t);if(null!==r){var i=Vi(r.fingerprints),o=i.filter((function(t){return t.bannerId===e}))[0];if(void 0!==o)if(r instanceof Ur)Qi(this,ro)&&Qi(this,ro).sendToBanner(r,"closeBanner",{positionCode:t,bannerId:e});else{var a=o.closeExpiration;Xi(this,ao,co).call(this,{banner:r,fingerprint:o}).then((function(){var u=[];if(u.push(Si.banner({positionCode:t,bannerId:e,closingExpiration:a})),null!==r.positionData.closeExpiration){for(var c=[],l=r.fingerprints,s=0;s<l.length;s++)c.push(Xi(n,ao,co).call(n,{banner:r,fingerprint:l[s]}));Promise.all(c).then((function(){u.push(Si.position({positionCode:t,closingExpiration:r.positionData.closeExpiration})),setTimeout((function(){return Qi(n,oo).close(u)}),0),Qi(n,io)&&Qi(n,io).sendToParent("storeClosedEntries",{entries:u.map((function(t){return{key:t.key.toString(),expiresAt:t.expiresAt}})),fingerprints:i.map((function(t){return t.toString()}))})}))}else setTimeout((function(){return Qi(n,oo).close(u)}),0),Qi(n,io)&&Qi(n,io).sendToParent("storeClosedEntries",{entries:u.map((function(t){return{key:t.key.toString(),expiresAt:t.expiresAt}})),fingerprints:[o.toString()]})}))}}}}])&&qi(e.prototype,n),r&&qi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function co(t){var e=this,n=t.banner,r=t.fingerprint,i=n.element.querySelector('[data-amp-banner-fingerprint="'.concat(r.value,'"]'));if(!i)return Promise.resolve(void 0);var o=function(t){return t.remove()};return Qi(this,no).dispatch(ie.ON_BANNER_BEFORE_CLOSE,{fingerprint:r,element:i,banner:n,setOperation:function(t){return o=t}}),Promise.resolve(o(i)).then((function(){Qi(e,no).dispatch(ie.ON_BANNER_AFTER_CLOSE,{fingerprint:r,element:i,banner:n}),n.unsetFingerprint(r)}))}function lo(t){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lo(t)}function so(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return fo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==lo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===lo(o)?o:String(o)),r)}var i,o}function yo(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function vo(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ho(t,e,"get"))}function bo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ho(t,e,"set"),n),n}function ho(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var mo=new WeakMap,wo=new WeakMap,go=new WeakMap,So=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),yo(this,mo,{writable:!0,value:void 0}),yo(this,wo,{writable:!0,value:void 0}),yo(this,go,{writable:!0,value:void 0}),bo(this,mo,new qr),bo(this,wo,{}),bo(this,go,{})}var e,n,r;return e=t,n=[{key:"subscribe",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("function"!=typeof e)throw new TypeError("Listener must be of type function.");var o="idx_"+vo(this,mo).getNextIdentifier();return vo(this,wo)[t]=vo(this,wo)[t]||{},vo(this,wo)[t][o]={callback:e,scope:r,priority:i},t in vo(this,go)&&delete vo(this,go)[t],function(){t in vo(n,wo)&&o in vo(n,wo)[t]&&delete vo(n,wo)[t][o]}}},{key:"dispatch",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,o=so(this.getSortedListeners(t));try{for(o.s();!(i=o.n()).done;){var a,u=i.value;null!==u.scope?(a=u.callback).call.apply(a,[u.scope].concat(n)):u.callback.apply(u,n)}}catch(t){o.e(t)}finally{o.f()}}},{key:"reset",value:function(){bo(this,wo,{})}},{key:"getSortedListeners",value:function(t){if(t in vo(this,go))return vo(this,go)[t];var e=Object.values(vo(this,wo)[t]||{}).sort((function(t,e){return t.priority>e.priority?-1:t.priority<e.priority?1:0}));return vo(this,go)[t]=e}}],n&&po(e.prototype,n),r&&po(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Eo=n(1106);function jo(t){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(t)}function Oo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==jo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===jo(o)?o:String(o)),r)}var i,o}function To(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function ko(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,_o(t,e,"get"))}function Po(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,_o(t,e,"set"),n),n}function _o(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var No=new WeakMap,Ao=new WeakMap,Ro=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),To(this,No,{writable:!0,value:void 0}),To(this,Ao,{writable:!0,value:void 0}),Po(this,No,e),Po(this,Ao,{})}var e,n,r;return e=t,(n=[{key:"getTemplate",value:function(t){if(t in ko(this,Ao))return ko(this,Ao)[t];if(!(t in ko(this,No)))throw new Error('Template with type "'.concat(t,'" not found.'));return ko(this,Ao)[t]=Eo(ko(this,No)[t])}}])&&Oo(e.prototype,n),r&&Oo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xo(t){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(t)}function Io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==xo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==xo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===xo(o)?o:String(o)),r)}var i,o}function Co(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Mo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Do(t,e,"set"),n),n}function Do(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Bo=new WeakMap,Wo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Co(this,Bo,{writable:!0,value:void 0}),Mo(this,Bo,new Ro(e))}var e,n,r;return e=t,(n=[{key:"render",value:function(t){return(e=this,n=Bo,function(t,e){return e.get?e.get.call(t):e.value}(e,Do(e,n,"get"))).getTemplate(t.positionData.displayType)({banner:t,data:t.bannerData});var e,n}}])&&Io(e.prototype,n),r&&Io(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fo(t){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fo(t)}function Lo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Uo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lo(Object(n),!0).forEach((function(e){zo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zo(t,e,n){return(e=Vo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Go(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Go(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Go(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ho(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vo(r.key),r)}}function Vo(t){var e=function(t,e){if("object"!==Fo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Fo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Fo(e)?e:String(e)}var Yo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"create",value:function(t,e,n,r,i,o){var a=[];for(var u in i)a.push({pixels:parseInt(u),ratio:i[u]});a=a.sort((function(t,e){return e.pixels-t.pixels}));var c=function(t){var e,n=getComputedStyle(t),i=(t.offsetWidth-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight))-(parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth)))*(t.offsetHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom))-(parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth))),o=$o(a);try{for(o.s();!(e=o.n()).done;){var u=e.value;if(i>=u.pixels)return u.ratio}}catch(t){o.e(t)}finally{o.f()}return r};return new IntersectionObserver((function(r){var i,a=[],u={},l={},s=$o(r);try{for(s.s();!(i=s.n()).done;){var f=i.value,p=f.target.dataset.ampBannerFingerprint,y=t.getBannerByFingerprint(p);if(y){var v=n[p];if(v){var b={fingerprint:v.fingerprint,element:f.target,banner:y};if(a.push(Uo(Uo({},b),{},{entry:f})),!v.alreadySeen){var h=f.intersectionRatio>=c(f.target);u[p]=!(p in u)||!u[p].isIntersecting&&h?{fingerprintArgs:b,fingerprintMetadata:v,isIntersecting:h}:u[p]}if(!v.alreadyFullySeen){var m=.99<=f.intersectionRatio;l[p]=!(p in l)||!l[p].isFullyIntersecting&&m?{fingerprintArgs:b,fingerprintMetadata:v,isFullyIntersecting:m}:l[p]}}}}}catch(t){s.e(t)}finally{s.f()}for(var d=function(){var t=g[w],n=t.fingerprintArgs,r=t.fingerprintMetadata,i=t.isIntersecting;i&&!r.alreadySeen&&null===r.firstTimeSeenTimeoutId?r.firstTimeSeenTimeoutId=setTimeout((function(){r.alreadySeen=!0,e.dispatch(ie.ON_BANNER_FIRST_TIME_SEEN,n)}),o):i||null===r.firstTimeSeenTimeoutId||(clearTimeout(r.firstTimeSeenTimeoutId),r.firstTimeSeenTimeoutId=null)},w=0,g=Object.values(u);w<g.length;w++)d();for(var S=function(){var t=j[E],n=t.fingerprintArgs,r=t.fingerprintMetadata,i=t.isFullyIntersecting;i&&!r.alreadyFullySeen&&null===r.firstTimeFullySeenTimeoutId?r.firstTimeFullySeenTimeoutId=setTimeout((function(){r.alreadyFullySeen=!0,e.dispatch(ie.ON_BANNER_FIRST_TIME_FULLY_SEEN,n)}),o):i||null===r.firstTimeFullySeenTimeoutId||(clearTimeout(r.firstTimeFullySeenTimeoutId),r.firstTimeFullySeenTimeoutId=null)},E=0,j=Object.values(l);E<j.length;E++)S();for(var O=0,T=a;O<T.length;O++){var k=T[O];e.dispatch(ie.ON_BANNER_INTERSECTION_CHANGED,k)}}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,.99]})}}],(n=null)&&Ho(e.prototype,n),r&&Ho(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qo(t){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qo(t)}function Jo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ko(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ko(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ko(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==qo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===qo(o)?o:String(o)),r)}var i,o}function Qo(t,e,n){Zo(t,e),e.set(t,n)}function Zo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ta(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ea(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ra(t,e,"get"))}function na(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ra(t,e,"set"),n),n}function ra(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ia=new WeakMap,oa=new WeakMap,aa=new WeakMap,ua=new WeakMap,ca=new WeakMap,la=new WeakSet,sa=function(){function t(e,n,r){var i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Zo(i=this,o=la),o.add(i),Qo(this,ia,{writable:!0,value:void 0}),Qo(this,oa,{writable:!0,value:void 0}),Qo(this,aa,{writable:!0,value:void 0}),Qo(this,ua,{writable:!0,value:void 0}),Qo(this,ca,{writable:!0,value:void 0}),na(this,ia,!1),na(this,oa,e),na(this,aa,n),na(this,ua,{}),na(this,ca,Yo.create(e,n,ea(this,ua),r.defaultIntersectionRatio,r.intersectionRatioMap,r.firstTimeSeenTimeout))}var e,n,r;return e=t,(n=[{key:"start",value:function(){var t=this;if(!ea(this,ia)){na(this,ia,!0),ea(this,aa).subscribe(ie.ON_BANNER_STATE_CHANGED,(function(e){var n=e.banner;ee.RENDERED!==n.state||n.isEmbed()||ta(t,la,fa).call(t,n)}),null,-100);var e,n=Jo(ea(this,oa).getBannersByState({state:ee.RENDERED,embed:!1}));try{for(n.s();!(e=n.n()).done;){var r=e.value;ta(this,la,fa).call(this,r)}}catch(t){n.e(t)}finally{n.f()}}}}])&&Xo(e.prototype,n),r&&Xo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fa(t){var e,n=this,r=this,i=Jo(t.element.querySelectorAll("[data-amp-banner-fingerprint]"));try{var o=function(){var t=e.value,i=t.dataset.ampBannerFingerprint;i in ea(n,ua)||(ea(n,ua)[i]={fingerprint:Le.createFromValue(i),alreadySeen:!1,alreadyFullySeen:!1,firstTimeSeenTimeoutId:null,firstTimeFullySeenTimeoutId:null}),void 0===t.dataset.ampBannerFingerprintObserved&&(t.dataset.ampBannerFingerprintObserved="true",ea(n,ca).observe(t));var o,a=Jo(t.getElementsByTagName("a"));try{for(a.s();!(o=a.n()).done;){var u=o.value;void 0===u.dataset.ampClickingAttached&&(u.dataset.ampClickingAttached="true",u.addEventListener("click",(function(t){var e=ea(r,ua)[i];if(e){var n=ea(r,oa).getBannerByFingerprint(i);if(n){var o={fingerprint:e.fingerprint,element:this.closest("[data-amp-banner-fingerprint]"),banner:n,target:this,clickEvent:t};e.alreadySeen||(e.alreadySeen=!0,ea(r,aa).dispatch(ie.ON_BANNER_FIRST_TIME_SEEN,o)),ea(r,aa).dispatch(ie.ON_BANNER_LINK_CLICKED,o)}else console.warn('Unable to invoke an event "amp:banner:link-clicked" because the banner for fingerprint "'.concat(i,'" not found.'))}else console.warn('Unable to invoke an event "amp:banner:link-clicked" because the fingerprint "'.concat(i,'" not managed.'))})))}}catch(t){a.e(t)}finally{a.f()}};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}}function pa(t){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(t)}function ya(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==pa(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pa(o)?o:String(o)),r)}var i,o}var va=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"BANNER_LOADED",get:function(){return"amp:banner:loaded"}},{key:"BANNER_DISPLAYED",get:function(){return"amp:banner:displayed"}},{key:"BANNER_FULLY_DISPLAYED",get:function(){return"amp:banner:fully-displayed"}},{key:"BANNER_CLICKED",get:function(){return"amp:banner:clicked"}},{key:"BANNER_CLOSED",get:function(){return"amp:banner:closed"}},{key:"EVENTS",get:function(){return[t.BANNER_LOADED,t.BANNER_DISPLAYED,t.BANNER_FULLY_DISPLAYED,t.BANNER_CLICKED,t.BANNER_CLOSED]}}],(n=null)&&ya(e.prototype,n),r&&ya(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ba(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ha(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ba(Object(n),!0).forEach((function(e){ma(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ba(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ma(t,e,n){return(e=Sa(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function da(t){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},da(t)}function wa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sa(r.key),r)}}function ga(t,e,n){return e&&wa(t.prototype,e),n&&wa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sa(t){var e=function(t,e){if("object"!==da(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===da(e)?e:String(e)}var Ea=ga((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n={channel_code:"channel_code",banner_id:"banner_id",banner_name:"banner_name",position_id:"position_id",position_code:"position_code",position_name:"position_name",campaign_id:"campaign_id",campaign_code:"campaign_code",campaign_name:"campaign_name",breakpoint:"breakpoint",link:"link"};if("params"in e)for(var r in e.params)r in n&&"string"==typeof e.params[r]&&(n[r]=e.params[r]);var i="extraParams"in e&&"object"===da(e.extraParams)?e.extraParams:{},o={},a=function(t){return{name:t,enabled:!0,params:ha({},n),extraParams:ha({},i)}};if(o[va.BANNER_LOADED]=a(va.BANNER_LOADED),o[va.BANNER_DISPLAYED]=a(va.BANNER_DISPLAYED),o[va.BANNER_FULLY_DISPLAYED]=a(va.BANNER_FULLY_DISPLAYED),o[va.BANNER_CLICKED]=a(va.BANNER_CLICKED),o[va.BANNER_CLOSED]=a(va.BANNER_CLOSED),"events"in e)for(var u in e.events){var c=e.events[u];if(!0!==c&&u in o)if(!1!==c)if("string"!=typeof c){if("object"===da(c)){if("name"in c&&"string"==typeof c.name&&(o[u].name=c.name),"params"in c&&"object"==da(c.params))for(var l in c.params)l in o[u].params&&"string"==typeof c.params[l]&&(o[u].params[l]=c.params[l]);"extraParams"in c&&"object"==da(c.extraParams)&&(o[u].extraParams=ha(ha({},o[u].extraParams),c.extraParams))}}else o[u].name=c;else o[u].enabled=!1}this.events=o}));function ja(t){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(t)}function Oa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ta(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ta(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ta(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ka(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ka(Object(n),!0).forEach((function(e){_a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _a(t,e,n){return(e=Aa(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Na(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aa(r.key),r)}}function Aa(t){var e=function(t,e){if("object"!==ja(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ja(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ja(e)?e:String(e)}function Ra(t,e,n){xa(t,e),e.set(t,n)}function xa(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ia(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Ca(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Da(t,e,"get"))}function Ma(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Da(t,e,"set"),n),n}function Da(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ba=new WeakMap,Wa=new WeakMap,Fa=new WeakMap,La=new WeakMap,Ua=new WeakMap,za=new WeakMap,$a=new WeakSet,Ga=function(){function t(e,n,r){var i,o,a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),xa(i=this,o=$a),o.add(i),Ra(this,Ba,{writable:!0,value:void 0}),Ra(this,Wa,{writable:!0,value:void 0}),Ra(this,Fa,{writable:!0,value:void 0}),Ra(this,La,{writable:!0,value:void 0}),Ra(this,Ua,{writable:!0,value:{started:!1,events:[],cleanup:[]}}),Ra(this,za,{writable:!0,value:function(t){var e=t.event,n=t.fingerprint,r=t.banner,i=r.getCurrentBreakpoint(n.bannerId);i=null===i?"default":"".concat("min"===r.positionData.breakpointType?">=":"<=").concat(i);var o={};return o[e.params.channel_code]=Ca(a,Fa),o[e.params.banner_id]=n.bannerId,o[e.params.banner_name]=n.bannerName,o[e.params.position_id]=n.positionId,o[e.params.position_code]=n.positionCode,o[e.params.position_name]=n.positionName,o[e.params.campaign_id]=n.campaignId,o[e.params.campaign_code]=n.campaignCode,o[e.params.campaign_name]=n.campaignName,o[e.params.breakpoint]=i,Pa(Pa({},o),e.extraParams)}}),Ma(this,Ba,e),Ma(this,Wa,n),Ma(this,Fa,r),Ma(this,La,!1)}var e,n,r;return e=t,(n=[{key:"collectBeforeAttach",value:function(){var t=this;if(!Ca(this,Ua).started&&!Ca(this,La)){Ca(this,Ua).started=!0;var e=Ca(this,Wa),n=new Ea({}),r=n.events[va.BANNER_LOADED],i=n.events[va.BANNER_DISPLAYED],o=n.events[va.BANNER_FULLY_DISPLAYED],a=n.events[va.BANNER_CLICKED],u=n.events[va.BANNER_CLOSED];Ca(this,Ua).cleanup.push(e.subscribe(ie.ON_BANNER_STATE_CHANGED,(function(e){var n=e.banner;if(!n.isEmbed()&&ee.RENDERED===n.state&&1===n.stateCounter){var i,o=Oa(n.fingerprints);try{for(o.s();!(i=o.n()).done;){var a=i.value;Ca(t,Ua).events.push({name:va.BANNER_LOADED,params:Ca(t,za).call(t,{event:r,fingerprint:a,banner:n})})}}catch(t){o.e(t)}finally{o.f()}}}))),Ca(this,Ua).cleanup.push(e.subscribe(ie.ON_BANNER_FIRST_TIME_SEEN,(function(e){var n=e.fingerprint,r=e.banner;Ca(t,Ua).events.push({name:va.BANNER_DISPLAYED,params:Ca(t,za).call(t,{event:i,fingerprint:n,banner:r})})}))),Ca(this,Ua).cleanup.push(e.subscribe(ie.ON_BANNER_FIRST_TIME_FULLY_SEEN,(function(e){var n=e.fingerprint,r=e.banner;Ca(t,Ua).events.push({name:va.BANNER_FULLY_DISPLAYED,params:Ca(t,za).call(t,{event:o,fingerprint:n,banner:r})})}))),Ca(this,Ua).cleanup.push(e.subscribe(ie.ON_BANNER_LINK_CLICKED,(function(e){var n=e.fingerprint,r=e.banner,i=e.target,o=Ca(t,za).call(t,{event:a,fingerprint:n,banner:r});o[a.params.link]=i.href||"",Ca(t,Ua).events.push({name:va.BANNER_CLICKED,params:o})}))),Ca(this,Ua).cleanup.push(e.subscribe(ie.ON_BANNER_AFTER_CLOSE,(function(e){var n=e.fingerprint,r=e.banner;Ca(t,Ua).events.push({name:va.BANNER_CLOSED,params:Ca(t,za).call(t,{event:u,fingerprint:n,banner:r})})})))}}},{key:"attach",value:function(t){var e=this;if(!Ca(this,La)){Ma(this,La,!0);var n=Ca(this,Wa),r=Ca(this,Ba);if(r.hasAnyReceiver()){var i=t.events[va.BANNER_LOADED],o=t.events[va.BANNER_DISPLAYED],a=t.events[va.BANNER_FULLY_DISPLAYED],u=t.events[va.BANNER_CLICKED],c=t.events[va.BANNER_CLOSED];if(Ca(this,Ua).started){for(var l in Ca(this,Ua).events){var s=Ca(this,Ua).events[l],f=s.name,p=s.params,y=t.events[f];if(y.enabled){var v={};for(var b in p)v[y.params[b]]=p[b];r.send(y.name,Pa(Pa({},v),y.extraParams))}}Ia(this,$a,Ha).call(this)}i.enabled&&n.subscribe(ie.ON_BANNER_STATE_CHANGED,(function(t){var n=t.banner;if(!n.isEmbed()&&ee.RENDERED===n.state&&1===n.stateCounter){var o,a=Oa(n.fingerprints);try{for(a.s();!(o=a.n()).done;){var u=o.value;r.send(i.name,Ca(e,za).call(e,{event:i,fingerprint:u,banner:n}))}}catch(t){a.e(t)}finally{a.f()}}})),o.enabled&&n.subscribe(ie.ON_BANNER_FIRST_TIME_SEEN,(function(t){var n=t.fingerprint,i=t.banner;r.send(o.name,Ca(e,za).call(e,{event:o,fingerprint:n,banner:i}))})),a.enabled&&n.subscribe(ie.ON_BANNER_FIRST_TIME_FULLY_SEEN,(function(t){var n=t.fingerprint,i=t.banner;r.send(a.name,Ca(e,za).call(e,{event:a,fingerprint:n,banner:i}))})),u.enabled&&n.subscribe(ie.ON_BANNER_LINK_CLICKED,(function(t){var n=t.fingerprint,i=t.banner,o=t.target,a=Ca(e,za).call(e,{event:u,fingerprint:n,banner:i});a[u.params.link]=o.href||"",r.send(u.name,a)})),c.enabled&&n.subscribe(ie.ON_BANNER_AFTER_CLOSE,(function(t){var n=t.fingerprint,i=t.banner;r.send(c.name,Ca(e,za).call(e,{event:c,fingerprint:n,banner:i}))}))}else Ia(this,$a,Ha).call(this)}}}])&&Na(e.prototype,n),r&&Na(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ha(){for(var t in Ca(this,Ua).cleanup)Ca(this,Ua).cleanup[t]();Ca(this,Ua).events=[],Ca(this,Ua).cleanup=[]}var Va=!1;const Ya=function(t,e){if(!("plausible"in window)||"function"!=typeof window.plausible)return!Va&&console.warn("Unable to send metrics to Plausible because the function plausible() does not occur in the window."),void(Va=!0);Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),window.plausible(t,{props:e})};var qa=!1;const Ja=function(t,e){if(!("gtag"in window)||"function"!=typeof window.gtag)return!qa&&console.warn("Unable to send metrics to Google Analytics because the function gtag() does not occur in the window."),void(qa=!0);Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),window.gtag("event",t,e)};function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function Xa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qa(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Ka(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ka(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Za=!1;const tu=function(t,e){if(!("dataLayer"in window))return!Za&&console.warn("Unable to send metrics to GTM because the dataLayer does not occur in the window."),void(Za=!0);Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),window.dataLayer.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xa(Object(n),!0).forEach((function(e){Qa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({event:t},e))},eu=function(t,e){console.log("Sending metrics.",{eventName:t,eventArgs:e})};function nu(t){return nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(t)}function ru(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return iu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function iu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ou(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==nu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==nu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===nu(o)?o:String(o)),r)}var i,o}function au(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function uu(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,lu(t,e,"get"))}function cu(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,lu(t,e,"set"),n),n}function lu(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var su=new WeakMap,fu=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),au(this,su,{writable:!0,value:void 0}),cu(this,su,Array.isArray(e)?e:[e])}var e,n,r;return e=t,r=[{key:"createFromReceivers",value:function(e){if(!e)return new t([]);var n,r=[],i=ru(e=Array.isArray(e)?e:[e]);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("function"!=typeof o)switch(o){case"plausible":r.push(Ya);break;case"gtag":r.push(Ja);break;case"gtm":r.push(tu);break;case"debug":r.push(eu);break;default:console.warn("Unable to send metrics to a receiver of unknown type",o)}else r.push(o)}}catch(t){i.e(t)}finally{i.f()}return new t(r)}}],(n=[{key:"hasAnyReceiver",value:function(){return uu(this,su).length}},{key:"send",value:function(t,e){var n,r=ru(uu(this,su));try{for(r.s();!(n=r.n()).done;)(0,n.value)(t,e)}catch(t){r.e(t)}finally{r.f()}}}])&&ou(e.prototype,n),r&&ou(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pu(t){return pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(t)}function yu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==pu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pu(o)?o:String(o)),r)}var i,o}function vu(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function bu(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,mu(t,e,"get"))}function hu(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,mu(t,e,"set"),n),n}function mu(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var du=new WeakMap,wu=new WeakMap,gu=function(){function t(e){var n=e.origins,r=void 0===n?[]:n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),vu(this,du,{writable:!0,value:void 0}),vu(this,wu,{writable:!0,value:void 0}),hu(this,wu,new So),hu(this,du,r)}var e,n,r;return e=t,n=[{key:"on",value:function(t,e){bu(this,wu).subscribe(t,e)}},{key:"send",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";t.postMessage({message:e,data:n},r)}},{key:"listen",value:function(){var t=this;window.addEventListener("message",(function(e){if(!(0<bu(t,du).length&&-1===bu(t,du).indexOf(e.origin)||"object"!==pu(e.data))&&"message"in e.data&&"data"in e.data){var n=e.data,r=n.message,i={data:n.data,origin:e.origin};t._beforeDispatch(r,i)&&bu(t,wu).dispatch(r,i)}}),!1)}},{key:"_beforeDispatch",value:function(){return!0}}],n&&yu(e.prototype,n),r&&yu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Su(t){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(t)}function Eu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ju(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ju(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ju(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ou(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Su(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Su(o)?o:String(o)),r)}var i,o}function Tu(t,e){return Tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tu(t,e)}function ku(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_u(t);if(e){var i=_u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Su(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pu(t)}(this,n)}}function Pu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _u(t){return _u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_u(t)}function Nu(t,e){Ru(t,e),e.add(t)}function Au(t,e,n){Ru(t,e),e.set(t,n)}function Ru(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xu(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Mu(t,e,"get"))}function Iu(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Cu(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Mu(t,e,"set"),n),n}function Mu(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Du=new WeakMap,Bu=new WeakMap,Wu=new WeakMap,Fu=new WeakMap,Lu=new WeakMap,Uu=new WeakSet,zu=new WeakSet,$u=new WeakSet,Gu=new WeakSet,Hu=new WeakSet,Vu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tu(t,e)}(o,t);var e,n,r,i=ku(o);function o(t){var e,n=t.origin,r=t.connectionData,a=t.bannerManager,u=t.metricsSender;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Nu(Pu(e=i.call(this,{origins:[n]})),Hu),Nu(Pu(e),Gu),Nu(Pu(e),$u),Nu(Pu(e),zu),Nu(Pu(e),Uu),Au(Pu(e),Du,{writable:!0,value:void 0}),Au(Pu(e),Bu,{writable:!0,value:void 0}),Au(Pu(e),Wu,{writable:!0,value:void 0}),Au(Pu(e),Fu,{writable:!0,value:void 0}),Au(Pu(e),Lu,{writable:!0,value:[]}),Cu(Pu(e),Du,n),Cu(Pu(e),Bu,r),Cu(Pu(e),Wu,a),Cu(Pu(e),Fu,u);var c={};for(var l in c.adjustHeight=Iu(Pu(e),Uu,Yu),c.stateChanged=Iu(Pu(e),zu,qu),c.linkClicked=Iu(Pu(e),$u,Ju),c.metrics=Iu(Pu(e),Gu,Ku),c)e.on(l,c[l].bind(Pu(e)));return window.addEventListener("resize",(function(){var t,n=Eu(xu(Pu(e),Wu).getBannersByState({state:xu(Pu(e),Wu).STATE.RENDERED,managed:!1,external:!1,embed:!0}));try{for(n.s();!(t=n.n()).done;){var r=t.value;e.sendToBanner(r,"windowResized",{windowWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})}}catch(t){n.e(t)}finally{n.f()}})),e}return e=o,(n=[{key:"connectBanner",value:function(t){var e=this;t.iframe.addEventListener("load",(function(){var n=xu(e,Bu);n.uid=t.uid,n.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.sendToBanner(t,"connect",n)}))}},{key:"sendToBanner",value:function(t,e,n){this.send(t.iframe.contentWindow,e,n,xu(this,Du))}},{key:"_beforeDispatch",value:function(t,e){var n=e.data.uid;if(-1===xu(this,Lu).indexOf(n)){var r=Iu(this,Hu,Xu).call(this,n);r&&(r.iframe.style.visibility="visible",xu(this,Lu).push(n))}return!0}}])&&Ou(e.prototype,n),r&&Ou(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(gu);function Yu(t){var e=t.data,n=Iu(this,Hu,Xu).call(this,e.uid);n&&(n.iframe.style.height=e.height+"px")}function qu(t){var e=t.data,n=Iu(this,Hu,Xu).call(this,e.uid);null!==n&&("positionData"in e&&n.updatePositionData(e.positionData),"fingerprints"in e&&n.updateFingerprints(e.fingerprints),n.setState(e.state,"[embed]: ".concat(e.stateInfo)))}function Ju(t){var e=t.data,n=e.href,r=e.target;"_blank"===r?window.open(n,r):window.location.href=n}function Ku(t){var e=t.data,n=e.eventName,r=e.eventArgs;xu(this,Fu).hasAnyReceiver()&&xu(this,Fu).send(n,r)}function Xu(t){var e=xu(this,Wu).getBannerByUid(t);return e instanceof Ur?e:(console.warn("Error in communication with embed banner. Embed banner with UID ".concat(t," not attached.")),null)}function Qu(t){return Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(t)}function Zu(t){return function(t){if(Array.isArray(t))return nc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ec(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ec(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ec(t,e){if(t){if("string"==typeof t)return nc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nc(t,e):void 0}}function nc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Qu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Qu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Qu(o)?o:String(o)),r)}var i,o}function ic(t,e,n){oc(t,e),e.set(t,n)}function oc(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ac(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,cc(t,e,"get"))}function uc(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,cc(t,e,"set"),n),n}function cc(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var lc=new WeakMap,sc=new WeakMap,fc=new WeakMap,pc=new WeakMap,yc=new WeakMap,vc=new WeakMap,bc=new WeakMap,hc=new WeakMap,mc=new WeakMap,dc=new WeakMap,wc=new WeakMap,gc=new WeakMap,Sc=new WeakSet,Ec=function(){function t(e,n){var r,i,o=this;for(var a in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),oc(r=this,i=Sc),i.add(r),ic(this,lc,{writable:!0,value:void 0}),ic(this,sc,{writable:!0,value:void 0}),ic(this,fc,{writable:!0,value:void 0}),ic(this,pc,{writable:!0,value:void 0}),ic(this,yc,{writable:!0,value:void 0}),ic(this,vc,{writable:!0,value:null}),ic(this,bc,{writable:!0,value:void 0}),ic(this,hc,{writable:!0,value:void 0}),ic(this,mc,{writable:!0,value:void 0}),ic(this,dc,{writable:!0,value:void 0}),ic(this,wc,{writable:!0,value:void 0}),ic(this,gc,{writable:!0,value:void 0}),this.EVENTS=ie,uc(this,lc,e),uc(this,sc,n=function(t){var e=y({method:"GET",url:null,version:1,channel:null,locale:null,resources:{},origin:null,template:v,interaction:{defaultIntersectionRatio:.5,intersectionRatioMap:{},firstTimeSeenTimeout:1e3},metrics:{receiver:null,events:{},params:{},extraParams:{}},closing:{storage:"memoryStorage",key:"amp-closed-banners",maxItems:500}},t);if("string"!=typeof e.method||!(e.method.toUpperCase()in{GET:1,POST:1}))throw new Error('The option "method" must be one of these ["GET", "POST"], '.concat(e.method," passed."));if(e.method=e.method.toUpperCase(),"string"!=typeof e.url)throw new Error('The option "url" is required and must be a valid URL, '.concat(e.url," passed."));if("number"!=typeof e.version)throw new Error('The option "version" must be a number, '.concat(e.version," passed."));if("string"!=typeof e.channel)throw new Error('The option "channel" is required and must be a string, '.concat(e.channel," passed."));if(null!==e.locale&&"string"!=typeof e.locale)throw new Error('The option "locale" must be a string, '.concat(e.locale," passed."));if("object"!==m(e.resources))throw new Error('The option "resources" must be an object of that describes resources, '.concat(e.resources," passed."));if(null!==e.origin&&"string"!=typeof e.origin)throw new Error('The option "origin" must be a valid URL, '.concat(e.origin," passed."));if("object"!==m(e.template))throw new Error('The option "template" must be an object of the format { single: string, random: string, multiple: string }, '.concat(e.template," passed."));for(var n=0,r=Object.entries(e.template);n<r.length;n++){var i=b(r[n],2),o=i[0],a=i[1];if("string"!=typeof a)throw new Error('The option "template.'.concat(o,'" must be a string (lodash template), ').concat(a," passed."))}if("object"!==m(e.interaction))throw new Error('The option "interaction" must be an object of the format { intersectionRatio: int|float, firstTimeSeenTimeout: int }, '.concat(e.interaction," passed."));if("number"!=typeof e.interaction.defaultIntersectionRatio||.1>e.interaction.defaultIntersectionRatio||1<e.interaction.defaultIntersectionRatio)throw new Error('The option "interaction.defaultIntersectionRatio" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "'.concat(e.interaction.defaultIntersectionRatio,'" passed.'));if(e.interaction.defaultIntersectionRatio=d(e.interaction.defaultIntersectionRatio,"interaction.defaultIntersectionRatio"),"object"!==m(e.interaction.intersectionRatioMap))throw new Error('The option "interaction.intersectionRatioMap" must be an object with an integer keys (pixels) and valid ratios as values, '.concat(e.interaction.intersectionRatioMap," passed."));for(var u=0,c=Object.entries(e.interaction.intersectionRatioMap);u<c.length;u++){var l=b(c[u],2),s=l[0],f=l[1];if(Number(s).toString()!==s)throw new Error('The key "interaction.intersectionRatioMap.'.concat(s,'" must be an integer.'));if("number"!=typeof f||.1>f||1<f)throw new Error('The option "interaction.intersectionRatioMap.'.concat(s,'" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "').concat(e.interaction.intersectionRatioMap[s],'" passed.'));e.interaction.intersectionRatioMap[s]=d(f,"interaction.intersectionRatioMap."+s)}if(!Number.isInteger(e.interaction.firstTimeSeenTimeout)||500>e.interaction.firstTimeSeenTimeout)throw new Error('The option "interaction.firstTimeSeenTimeout" must be a int with a minimum value of 500, "'.concat(e.interaction.firstTimeSeenTimeout,'" passed.'));if("object"!==m(e.metrics))throw new Error('The option "metrics" must be an object of the format { receiver: null|string|function|array<string|function>, events: object, params: object }, '.concat(e.metrics," passed."));if(null!==e.metrics.receiver&&-1===["string","function"].indexOf(m(e.metrics.receiver))&&!Array.isArray(e.metrics.receiver))throw new Error('The option "metrics.receiver" must be a null or a string or a function or an array of strings|functions, "'.concat(e.metrics.receiver,'" passed.'));if(Array.isArray(e.metrics.receiver)){for(var p in e.metrics.receiver)if(-1===["string","function"].indexOf(m(e.metrics.receiver[p])))throw new Error('The option "metrics.receiver.'.concat(p,'" must be a string or a function, "').concat(e.metrics.receiver[p],'" passed.'))}else e.metrics.receiver=null!==e.metrics.receiver?[e.metrics.receiver]:[];if("object"!==m(e.metrics.events))throw new Error('The option "metrics.event" must be an object of the format { *: string|false|{ name?: string, params?: { *: string }, extraParams?: { *: scalar } } }, '.concat(JSON.stringify(e.metrics.events)," passed."));if("object"!==m(e.metrics.params))throw new Error('The option "metrics.params" must be an object of the format { *: string }, '.concat(JSON.stringify(e.metrics.params)," passed."));if("object"!==m(e.metrics.extraParams))throw new Error('The option "metrics.extraParams" must be an object of the format { *: scalar }, '.concat(JSON.stringify(e.metrics.params)," passed."));if("object"!==m(e.closing)||"string"!=typeof e.closing.storage||"string"!=typeof e.closing.key||!Number.isInteger(e.closing.maxItems)||1>e.closing.maxItems)throw new Error('The option "closing" must be an object of the format { storage: "memoryStorage"|"localStorage"|"sessionStorage", key: string, maxItems: integer<1, max> }, '.concat(JSON.stringify(e.closing)," passed."));return e}(n)),uc(this,fc,new So),uc(this,pc,new Ft(n.method,n.url,n.version,n.channel)),uc(this,yc,new Qt(n.url,n.version,n.channel)),uc(this,bc,new li(ac(this,fc),hi.fromCurrentWindow(),new Wo(n.template))),uc(this,hc,new sa(ac(this,bc),ac(this,fc),n.interaction)),uc(this,dc,fu.createFromReceivers(n.metrics.receiver)),uc(this,wc,new Ga(ac(this,dc),ac(this,fc),n.channel)),uc(this,gc,new Vu({origin:n.url,connectionData:{extendedConfig:{interaction:n.interaction,metrics:{events:n.metrics.events,params:n.metrics.params,extraParams:n.metrics.extraParams}}},bannerManager:ac(this,bc),metricsSender:ac(this,dc)})),uc(this,mc,new uo({bannerManager:ac(this,bc),eventBus:ac(this,fc),config:{storage:n.closing.storage,key:n.closing.key,maxItems:n.closing.maxItems},bannerFrameMessenger:ac(this,gc)})),this.setLocale(n.locale),ac(this,pc).origin=n.origin,n.resources)ac(this,pc).addDefaultResource(a,n.resources[a]),ac(this,yc).addDefaultResource(a,n.resources[a]);window.addEventListener("resize",(function(){var t,e=tc(ac(o,bc).getBannersByState({state:ac(o,bc).STATE.RENDERED,managed:!0,external:!0,embed:!1}));try{for(e.s();!(t=e.n()).done;){t.value.redrawIfNeeded()}}catch(t){e.e(t)}finally{e.f()}})),ac(this,gc).listen(),ac(this,wc).attach(new Ea({events:n.metrics.events,params:n.metrics.params,extraParams:n.metrics.extraParams})),ac(this,hc).start(),ac(this,mc).attachUi()}var e,n,r;return e=t,n=[{key:"version",get:function(){return ac(this,lc)}},{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ac(this,fc).subscribe(t,e,n)}},{key:"setLocale",value:function(t){ac(this,pc).locale=t,ac(this,yc).locale=t}},{key:"setGateway",value:function(t){if(!function(t){return t instanceof S}(t))throw new TypeError("Argument gateway mut be instance of AbstractGateway.");uc(this,vc,t)}},{key:"getGateway",value:function(){return null===ac(this,vc)&&this.setGateway(new tt),ac(this,vc)}},{key:"createBanner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"managed",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:window;if(t=Jr(t,o),"embed"===i){var a=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,Sc,jc).call(this,t,e,n,r),u=ac(this,bc).addEmbedBanner(t,a,e,r);return ac(this,gc).connectBanner(u),t.insertAdjacentElement("beforeend",a),u}return ac(this,bc).addManagedBanner(t,e,n,r,o)}},{key:"closeBanner",value:function(t,e){ac(this,mc).closeBanner(t,e)}},{key:"attachBanners",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=tc(e.querySelectorAll("[data-amp-banner]:not([data-amp-attached])"));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.dataset.ampBanner;if(o){var a=void 0;if("ampBannerExternal"in i.dataset)a=ac(this,bc).addExternalBanner(i,n);else{var u=pr.parseResources(i),c=pr.parseOptions(i),l=i.dataset.ampMode||"managed";a=this.createBanner(i,o,u,c,l,n)}ac(this,fc).dispatch(this.EVENTS.ON_BANNER_ATTACHED,{banner:a})}else console.warn("Unable to attach a banner to the element ",i,' because the attribute "data-amp-banner" has an empty value.')}}catch(t){r.e(t)}finally{r.f()}}},{key:"fetch",value:function(){var t=this,e=ac(this,bc).getBannersByState({state:ac(this,bc).STATE.NEW,managed:!0,external:!1,embed:!1});if(e.length){var n,r=ac(this,pc).create(),i=tc(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.addPosition(o.position,o.resources,"1"!==o.options.get("omit-default-resources","0").toString())}}catch(t){i.e(t)}finally{i.f()}ac(this,fc).dispatch(this.EVENTS.ON_BEFORE_FETCH),this.getGateway().fetch(r,(function(n){var r,i=n.data,o=tc(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.position in i&&"banners"in i[a.position]&&Object.values(i[a.position].banners).length){var u=i[a.position];if(ac(t,mc).isPositionClosed(a.position))u.banners=[];else{for(var c=Array.isArray(u.banners)?u.banners:Object.values(u.banners),l=[],s=0;s<c.length;s++){var f=c[s];f.id&&!ac(t,mc).isBannerClosed(a.position,f.id)&&l.push(f)}u.banners=l}"embed"===u.mode&&0<u.banners.length?("options"in u&&a.overrideOptions(u.options),t.createBanner(a.element,a.position,a.rawResources,a.options.options,u.mode),ac(t,bc).removeBanner(a)):a.setResponseData(u)}else a.setState(ac(t,bc).STATE.NOT_FOUND,"Banner not found in fetched response.")}}catch(t){o.e(t)}finally{o.f()}ac(t,fc).dispatch(t.EVENTS.ON_FETCH_SUCCESS,{response:n})}),(function(n){var r,i=tc(e);try{for(i.s();!(r=i.n()).done;)r.value.setState(ac(t,bc).STATE.ERROR,"Request on api failed.")}catch(t){i.e(t)}finally{i.f()}ac(t,fc).dispatch(t.EVENTS.ON_FETCH_ERROR,{response:n})}))}}}],n&&rc(e.prototype,n),r&&rc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jc(t,e,n,r){var i=document.createElement("iframe"),o="cv=".concat(encodeURIComponent(this.version.semver)),a=new je(r),u=t.dataset.ampEmbedSrc||ac(this,yc).create(e,n,a.options);u+=-1===u.indexOf("?")?"?".concat(o):"&".concat(o),i.width="100%",i.height="100%",i.allowFullscreen=!0,i.scrolling="no",i.style.border="none",i.style.overflow="hidden",i.style.background="transparent",i.style.visibility="hidden",i.setAttribute("allowtransparency","true");var c=a.evaluate("loading",0),l=a.evaluate("fetchpriority",0);return null!==c&&(i.loading=c),null!==l&&i.setAttribute("fetchpriority",l),Zu(t.attributes).map((function(t){var e=t.name,n=t.value;return e.startsWith("data-iframe-")&&i.setAttribute(e.substring(12),n)})),i.src=u,i}function Oc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Tc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tc(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kc(t){return kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(t)}var Pc=function(t,e){var n=Math.round(10*t)/10;return n!==t&&console.warn('The value for the option "'.concat(e,'" has been rounded to ').concat(n," (originally ").concat(t,").")),n};function _c(t){var e=y({interaction:{defaultIntersectionRatio:.5,intersectionRatioMap:{},firstTimeSeenTimeout:1e3},metrics:{events:{},params:{},extraParams:{}}},t);if("object"!==kc(e.interaction))throw new Error('The option "interaction" must be an object of the format { intersectionRatio: int|float, firstTimeSeenTimeout: int }, '.concat(e.interaction," passed."));if("number"!=typeof e.interaction.defaultIntersectionRatio||.1>e.interaction.defaultIntersectionRatio||1<e.interaction.defaultIntersectionRatio)throw new Error('The option "interaction.defaultIntersectionRatio" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "'.concat(e.interaction.defaultIntersectionRatio,'" passed.'));if(e.interaction.defaultIntersectionRatio=Pc(e.interaction.defaultIntersectionRatio,"interaction.defaultIntersectionRatio"),"object"!==kc(e.interaction.intersectionRatioMap))throw new Error('The option "interaction.intersectionRatioMap" must be an object with an integer keys (pixels) and valid ratios as values, '.concat(e.interaction.intersectionRatioMap," passed."));for(var n=0,r=Object.entries(e.interaction.intersectionRatioMap);n<r.length;n++){var i=Oc(r[n],2),o=i[0],a=i[1];if(Number(o).toString()!==o)throw new Error('The key "interaction.intersectionRatioMap.'.concat(o,'" must be an integer.'));if("number"!=typeof a||.1>a||1<a)throw new Error('The option "interaction.intersectionRatioMap.'.concat(o,'" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "').concat(e.interaction.intersectionRatioMap[o],'" passed.'));e.interaction.intersectionRatioMap[o]=Pc(a,"interaction.intersectionRatioMap."+o)}if(!Number.isInteger(e.interaction.firstTimeSeenTimeout)||500>e.interaction.firstTimeSeenTimeout)throw new Error('The option "interaction.firstTimeSeenTimeout" must be a int with a minimum value of 500, "'.concat(e.interaction.firstTimeSeenTimeout,'" passed.'));if("object"!==kc(e.metrics))throw new Error('The option "metrics" must be an object of the format { events: object, params: object }, '.concat(JSON.stringify(e.metrics)," passed."));if("object"!==kc(e.metrics.events))throw new Error('The option "metrics.event" must be an object of the format { *: string|false|{ name?: string, params?: { *: string }, extraParams?: { *: scalar } } }, '.concat(JSON.stringify(e.metrics.events)," passed."));if("object"!==kc(e.metrics.params))throw new Error('The option "metrics.params" must be an object of the format { *: string }, '.concat(JSON.stringify(e.metrics.params)," passed."));if("object"!==kc(e.metrics.extraParams))throw new Error('The option "metrics.extraParams" must be an object of the format { *: scalar }, '.concat(JSON.stringify(e.metrics.params)," passed."));return e}function Nc(t){return Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(t)}function Ac(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Rc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Rc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Nc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Nc(o)?o:String(o)),r)}var i,o}function Ic(t,e){return Ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ic(t,e)}function Cc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dc(t);if(e){var i=Dc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Nc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mc(t)}(this,n)}}function Mc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dc(t){return Dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dc(t)}function Bc(t,e){Fc(t,e),e.add(t)}function Wc(t,e,n){Fc(t,e),e.set(t,n)}function Fc(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Lc(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,$c(t,e,"get"))}function Uc(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function zc(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,$c(t,e,"set"),n),n}function $c(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Gc=new WeakMap,Hc=new WeakMap,Vc=new WeakMap,Yc=new WeakMap,qc=new WeakSet,Jc=new WeakSet,Kc=new WeakSet,Xc=new WeakSet,Qc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ic(t,e)}(o,t);var e,n,r,i=Cc(o);function o(t){var e,n=t.clientEventBus,r=t.origin,a=void 0===r?void 0:r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Bc(Mc(e=i.call(this,{origins:void 0!==a?[a]:[]})),Xc),Bc(Mc(e),Kc),Bc(Mc(e),Jc),Bc(Mc(e),qc),Wc(Mc(e),Gc,{writable:!0,value:void 0}),Wc(Mc(e),Hc,{writable:!0,value:void 0}),Wc(Mc(e),Vc,{writable:!0,value:void 0}),Wc(Mc(e),Yc,{writable:!0,value:void 0}),zc(Mc(e),Gc,n),zc(Mc(e),Hc,a),zc(Mc(e),Vc,null),zc(Mc(e),Yc,[]);var u={};u.connect=Uc(Mc(e),qc,Zc);var c={};for(var l in c[ie.ON_BANNER_STATE_CHANGED]=[Uc(Mc(e),Jc,tl),0],c[ie.ON_BANNER_LINK_CLICKED]=[Uc(Mc(e),Kc,el),-100],c)Lc(Mc(e),Gc).subscribe(l,c[l][0].bind(Mc(e)),null,c[l][1]);for(var s in u)e.on(s,u[s].bind(Mc(e)));return e}return e=o,(n=[{key:"sendToParent",value:function(t,e){null!==Lc(this,Vc)?(e.uid=Lc(this,Vc),this.send(window.parent,t,e,Lc(this,Hc)||"*")):Lc(this,Yc).push({message:t,data:e})}}])&&xc(e.prototype,n),r&&xc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(gu);function Zc(t){var e=this,n=t.data;if(null===Lc(this,Vc)){var r=n.uid;zc(this,Vc,r);var i=void 0,o=function(){var t=document.body.scrollHeight;i!==t&&(i=t,e.sendToParent("adjustHeight",{height:t}))};o(),setInterval(o,100),Uc(this,Xc,nl).call(this)}else console.warn("The frame is already connected to the parent under the UID ".concat(Lc(this,Vc),"."))}function tl(t){var e=t.banner;if(ee.NEW!==e.state){var n={state:e.state,stateInfo:e.stateInfo};1===e.stateCounter&&(n.positionData=e.positionData.toObject(),n.fingerprints=e.fingerprints.map((function(t){return t.value}))),this.sendToParent("stateChanged",n)}}function el(t){var e=t.target;t.clickEvent.preventDefault(),this.sendToParent("linkClicked",{href:e.href,target:e.target||null})}function nl(){var t,e=Ac(Lc(this,Yc));try{for(e.s();!(t=e.n()).done;){var n=t.value;this.sendToParent(n.message,n.data)}}catch(t){e.e(t)}finally{e.f()}zc(this,Yc,[])}function rl(t){return rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(t)}function il(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ol(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ol(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ol(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function al(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==rl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==rl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===rl(o)?o:String(o)),r)}var i,o}function ul(t,e){ll(t,e),e.add(t)}function cl(t,e,n){ll(t,e),e.set(t,n)}function ll(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sl(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function fl(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,yl(t,e,"get"))}function pl(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,yl(t,e,"set"),n),n}function yl(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var vl=new WeakMap,bl=new WeakMap,hl=new WeakMap,ml=new WeakMap,dl=new WeakMap,wl=new WeakMap,gl=new WeakMap,Sl=new WeakMap,El=new WeakMap,jl=new WeakMap,Ol=new WeakMap,Tl=new WeakMap,kl=new WeakSet,Pl=new WeakSet,_l=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ul(this,Pl),ul(this,kl),cl(this,vl,{writable:!0,value:void 0}),cl(this,bl,{writable:!0,value:void 0}),cl(this,hl,{writable:!0,value:void 0}),cl(this,ml,{writable:!0,value:void 0}),cl(this,dl,{writable:!0,value:void 0}),cl(this,wl,{writable:!0,value:void 0}),cl(this,gl,{writable:!0,value:void 0}),cl(this,Sl,{writable:!0,value:void 0}),cl(this,El,{writable:!0,value:void 0}),cl(this,jl,{writable:!0,value:void 0}),cl(this,Ol,{writable:!0,value:void 0}),cl(this,Tl,{writable:!0,value:null}),this.EVENTS=ie,pl(this,vl,e),pl(this,bl,function(t){return y({channel:null},t)}(n)),pl(this,hl,_c({})),pl(this,hl,null),pl(this,ml,new So),pl(this,dl,new li(fl(this,ml),new hi((function(){return fl(r,Tl)||window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})))),pl(this,wl,new Qc({clientEventBus:fl(this,ml)})),pl(this,Sl,new uo({bannerManager:fl(this,dl),eventBus:fl(this,ml),parentFrameMessenger:fl(this,wl)})),pl(this,Ol,!1),pl(this,gl,null),pl(this,El,new fu([sl(this,kl,Nl).bind(this)])),pl(this,jl,new Ga(fl(this,El),fl(this,ml),fl(this,bl).channel)),fl(this,wl).on("connect",(function(t){var e=t.data;pl(r,hl,_c(e.extendedConfig)),pl(r,Tl,e.windowWidth),pl(r,gl,new sa(fl(r,dl),fl(r,ml),fl(r,hl).interaction)),sl(r,Pl,Al).call(r),fl(r,jl).attach(new Ea(fl(r,hl).metrics)),fl(r,gl).start()})),fl(this,wl).on("windowResized",(function(t){var e=t.data;pl(r,Tl,e.windowWidth),sl(r,Pl,Al).call(r)})),fl(this,wl).listen(),fl(this,jl).collectBeforeAttach(),fl(this,Sl).attachUi()}var e,n,r;return e=t,n=[{key:"version",get:function(){return fl(this,vl)}},{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return fl(this,ml).subscribe(t,e,n)}},{key:"attachBanner",value:function(){if(fl(this,Ol))throw new Error("Method attachBanner() should be called only once.");var t=document.querySelector("[data-amp-banner]:not([data-amp-attached])");if(t){var e=fl(this,dl).addExternalBanner(t);pl(this,Ol,!0),window.self!==window.top&&e.delegateResponsiveBehaviour(),fl(this,ml).dispatch(this.EVENTS.ON_BANNER_ATTACHED,{banner:e})}else console.warn("No banner found in the embed client.")}}],n&&al(e.prototype,n),r&&al(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nl(t,e){fl(this,wl).sendToParent("metrics",{eventName:t,eventArgs:e})}function Al(){var t,e=il(fl(this,dl).getBannersByState({state:ee.RENDERED}));try{for(e.s();!(t=e.n()).done;){t.value.redrawIfNeeded()}}catch(t){e.e(t)}finally{e.f()}}function Rl(t){return Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(t)}function xl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Rl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Rl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Rl(o)?o:String(o)),r)}var i,o}var Il=e.i8,Cl=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ec(new p(Il,"standard@".concat(Il)),t)}},{key:"createEmbed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _l(new p(Il,"embed@".concat(Il)),t)}},{key:"version",get:function(){return Il}}],(n=null)&&xl(e.prototype,n),r&&xl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()})(),AMPClientFactory=r.default})();