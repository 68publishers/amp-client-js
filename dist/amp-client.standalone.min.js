var AMPClientFactory;(()=>{var t={10:(t,e,n)=>{"use strict";t.exports=n(15)},692:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var u=n(159),c=n(148),s=n(752),l=n(150),f=n(643),p=n(83),y=n(53),m=function(t){if(t instanceof HTMLElement)return t;if("string"!=typeof t)throw new TypeError("Element must be instance of HTMLElement or String");var e;if(!((e="#"===t.charAt(0)?document.getElementById(t.slice(1)):document.querySelector(t))instanceof HTMLElement))throw new TypeError("Selector "+t+" is invalid.");return e},b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.STATE=f,u(this).eventBus=e,u(this).banners=[]}var e,n,r;return e=t,n=[{key:"addExternalBanner",value:function(t){(t=m(t)).setAttribute("data-amp-attached","");var e=new s(u(this).eventBus,t);return u(this).banners.push(e),e}},{key:"addManagedBanner",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[];for(n in(t=m(t)).setAttribute("data-amp-attached",""),r)o.push(new y(n,r[n]));var i=new c(u(this).eventBus,t,e,o);return u(this).banners.push(i),i}},{key:"getBannersByState",value:function(t){var e=t.state,n=t.managed,r=void 0===n||n,o=t.external,i=void 0===o||o;return u(this).banners.filter((function(t){return t instanceof l&&t.state===e&&!(t instanceof c&&!r||t instanceof s&&!i)}))}},{key:"getBannerByFingerprint",value:function(t){var e,n=t instanceof p?t.value:t,r=o(u(this).banners);try{for(r.s();!(e=r.n()).done;){var i,a=e.value,c=o(a.fingerprints);try{for(c.s();!(i=c.n()).done;)if(i.value.value===n)return a}catch(t){c.e(t)}finally{c.f()}}}catch(t){r.e(t)}finally{r.f()}return null}}],n&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=b},150:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var i=n(643),a=n(346),u=n(717),c=n(159),s=function(){function t(e,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constructor===t)throw new TypeError("Can not construct abstract class Banner.");this.STATE=i,c(this).eventBus=e,c(this).element=n,c(this).positionData=u.createInitial(r),c(this).stateCounters={},this.setState(this.STATE.NEW,"Banner created.")}var e,n,r;return e=t,n=[{key:"element",get:function(){return c(this).element}},{key:"state",get:function(){return c(this).state}},{key:"stateInfo",get:function(){return c(this).stateInfo}},{key:"stateCounter",get:function(){return c(this).stateCounters[this.state]||0}},{key:"position",get:function(){return this.positionData.code}},{key:"positionData",get:function(){return c(this).positionData}},{key:"fingerprints",get:function(){return[]}},{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(-1===this.STATE.STATES.indexOf(t))throw new TypeError("".concat(t," is not valid state."));c(this).state=t,c(this).stateInfo=e.toString(),c(this).stateCounters[t]=(c(this).stateCounters[t]||0)+1,c(this).eventBus.dispatch(a.ON_BANNER_STATE_CHANGED,this)}},{key:"getCurrenBreakpoint",value:function(t){return null}}],n&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=s},752:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}(this,n)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var f=n(150),p=n(83),y=n(717),m=n(159),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(l,t);var e,n,r,i=c(l);function l(t,e){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),!("ampBannerExternal"in e.dataset))throw new Error('Unable to initialize ExternalBanner from element that does not have an attribute "data-amp-external".');var r=JSON.parse(decodeURIComponent(atob(e.dataset.ampBannerExternal)));if(!("state"in r)||!("positionData"in r))throw new Error('Unable to initialize ExternalBanner data attribute "data-amp-external" is malformed.');var a=r.state,u=new y(r.positionData);n=i.call(this,t,e,u.code);var c,f=[],b={},d=o(e.querySelectorAll("[data-amp-banner-fingerprint]"));try{for(d.s();!(c=d.n()).done;){var v=c.value,h=p.createFromValue(v.dataset.ampBannerFingerprint);f.push(h);var g,w=o(v.querySelectorAll("[data-amp-content-breakpoint]"));try{for(w.s();!(g=w.n()).done;){var S=g.value,E=S.dataset.ampContentBreakpoint;E="default"===E?null:parseInt(E),h.bannerId in b||(b[h.bannerId]=[]),b[h.bannerId].push({breakpoint:E,element:S})}}catch(t){w.e(t)}finally{w.f()}}}catch(t){d.e(t)}finally{d.f()}return m(s(n)).positionData=u,m(s(n)).fingerprints=f,m(s(n)).breakpointsByBannerId=b,n.setState(a.value,a.info),n}return e=l,(n=[{key:"fingerprints",get:function(){return m(this).fingerprints}},{key:"getCurrenBreakpoint",value:function(t){var e,n=o(m(this).breakpointsByBannerId[t]||[]);try{for(n.s();!(e=n.n()).done;){var r=e.value;if("none"!==getComputedStyle(r.element).display)return r.breakpoint}}catch(t){n.e(t)}finally{n.f()}return null}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(f);t.exports=b},83:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(e,n){var r=n.bannerId,o=n.bannerName,i=n.positionId,a=n.positionCode,u=n.positionName,c=n.campaignId,s=n.campaignCode,l=n.campaignName;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e,this.bannerId=r,this.bannerName=o,this.positionId=i,this.positionCode=a,this.positionName=u,this.campaignId=c,this.campaignCode=s,this.campaignName=l}var e,r,o;return e=t,o=[{key:"createFromProperties",value:function(e){return new t(btoa(encodeURIComponent(JSON.stringify(e))),e)}},{key:"createFromValue",value:function(e){return new t(e,JSON.parse(decodeURIComponent(atob(e))))}}],(r=[{key:"toString",value:function(){return this.value}}])&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},92:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var i=n(159),a=n(83),u=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this).data=e,i(this).fingerprint=null,i(this).breakpointType=n,i(this).resolvedContent=null,i(this).resolvedContentBounds={min:null,max:null,reset:function(){this.min=this.max=null}}}var e,n,r;return e=t,(n=[{key:"fingerprint",get:function(){return i(this).fingerprint},set:function(t){if(!(t instanceof a))throw new TypeError("The value must be instance of Fingerprint object.");i(this).fingerprint=t}},{key:"id",get:function(){return i(this).data.id}},{key:"name",get:function(){return i(this).data.name||null}},{key:"score",get:function(){return i(this).data.score}},{key:"campaign",get:function(){return console.warn("Usage of deprecated property `BannerData.campaign`. Please use property `campaignCode` instead."),this.campaignCode()}},{key:"campaignId",get:function(){return i(this).data.campaign_id||null}},{key:"campaignCode",get:function(){return i(this).data.campaign_code||i(this).data.campaign||null}},{key:"campaignName",get:function(){return i(this).data.campaign_name||null}},{key:"content",get:function(){var t=i(this);if(null!==t.resolvedContent&&!this.needRedraw())return t.resolvedContent;t.resolvedContentBounds.reset();var e=u(),n=t.data.contents,r=t.breakpointType,o=null,a=null,c=null,s=[];if(function(t,e){for(var n in t)e(t[n],n)}(n,(function(n){var i=n.breakpoint;null!==i?(s.push(i),("min"===r&&e>=i&&(null===c||c<i)||"max"===r&&e<=i&&(null===c||c>i))&&(a=n,c=i,t.resolvedContentBounds[r]=i)):o=n})),null===a&&null===o)throw new Error("Missing content for banner with ID ".concat(this.id));s.sort((function(t,e){return t-e})),"min"===r?s.unshift(null):s.push(null);var l=s.indexOf(c);return"max"===r&&l-1 in s&&(t.resolvedContentBounds.min=s[l-1]),"min"===r&&l+1 in s&&(t.resolvedContentBounds.max=s[l+1]),t.resolvedContent=null!==a?a:o}},{key:"needRedraw",value:function(){var t=i(this);if(null===t.resolvedContent)return!0;var e=u();return null!==t.resolvedContentBounds.min&&e<t.resolvedContentBounds.min||null!==t.resolvedContentBounds.max&&e>t.resolvedContentBounds.max}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=c},148:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}(this,n)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var f=n(150),p=n(717),y=n(92),m=n(839),b=n(593),d=n(83),v=n(159),h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(l,t);var e,n,r,i=c(l);function l(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),r=i.call(this,t,e,n),v(s(r)).resources=o,v(s(r)).responseDataReceived=!1,v(s(r)).resolvedBannerData=null,v(s(r)).banners=[],r}return e=l,(n=[{key:"html",set:function(t){v(this).element.innerHTML=t}},{key:"resources",get:function(){return v(this).resources}},{key:"data",get:function(){return console.warn("Usage of deprecated property `ManagedBanner.data`. Please use property `positionData` for accessing information about a position."),new m(this)}},{key:"fingerprints",get:function(){var t;try{t=this.bannerData}catch(t){return[]}return this.positionData.isMultiple()||(t=[t]),t.map((function(t){return t.fingerprint}))}},{key:"bannerData",get:function(){if(null!==v(this).resolvedBannerData)return v(this).resolvedBannerData;if(!v(this).banners.length)throw new Error("Banner's data is empty.");var t=null,e=this.positionData,n=function(t){return d.createFromProperties({bannerId:t.id,bannerName:t.name,positionId:e.id,positionCode:e.code,positionName:e.name,campaignId:t.campaignId,campaignCode:t.campaignCode,campaignName:t.campaignName})};switch(!0){case e.isSingle():(t=v(this).banners.reduce((function(t,e){return t.score>=e.score?t:e}))).fingerprint=n(t);break;case e.isRandom():(t=b.randomByWeights(v(this).banners,"score")).fingerprint=n(t);break;case e.isMultiple():var r,i=o(t=v(this).banners.sort((function(t,e){return e.score-t.score})));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.fingerprint=n(a)}}catch(t){i.e(t)}finally{i.f()}break;default:throw new Error("Invalid display type ".concat(this.displayType,"."))}if(null===t)throw new Error("Banner's data is empty.");return v(this).resolvedBannerData=t,t}},{key:"getCurrenBreakpoint",value:function(t){var e=this.bannerData,n=(e=(Array.isArray(e)?e:[e]).find((function(e){return e.id===t})))&&e.content?e.content.breakpoint:null;return null===n?null:parseInt(n)}},{key:"setResponseData",value:function(t){if(v(this).responseDataReceived)throw new Error("Data for banner on position ".concat(this.position," is already set."));v(this).positionData=new p({id:t.position_id||null,code:this.positionData.code,name:t.position_name||null,rotationSeconds:t.rotation_seconds,displayType:t.display_type,breakpointType:t.breakpoint_type});var e=[];for(var n in t.banners||[])e.push(new y(t.banners[n],t.breakpoint_type));v(this).banners=e,v(this).responseDataReceived=!0}},{key:"needRedraw",value:function(){var t=this.bannerData;for(var e in Array.isArray(t)||(t=[t]),t)if(t[e].needRedraw())return!0;return!1}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(f);t.exports=h},839:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managedBanner=e}var e,r,o;return e=t,(r=[{key:"positionCode",get:function(){return this.managedBanner.positionData.code}},{key:"rotationSeconds",get:function(){return this.managedBanner.positionData.rotationSeconds}},{key:"displayType",get:function(){return this.managedBanner.positionData.displayType}},{key:"breakpointType",get:function(){return this.managedBanner.positionData.breakpointType}},{key:"fingerprints",get:function(){return this.managedBanner.fingerprints}},{key:"bannerData",get:function(){return this.managedBanner.bannerData}}])&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},717:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(e){var n=e.id,r=e.code,o=e.name,i=e.rotationSeconds,a=e.displayType,u=e.breakpointType;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.code=r,this.name=o,this.rotationSeconds=i,this.displayType=a,this.breakpointType=u}var e,r,o;return e=t,o=[{key:"createInitial",value:function(e){return new t({id:null,code:e,name:null,rotationSeconds:0,displayType:null,breakpointType:null})}}],(r=[{key:"isSingle",value:function(){return"single"===this.displayType}},{key:"isRandom",value:function(){return"random"===this.displayType}},{key:"isMultiple",value:function(){return"multiple"===this.displayType}}])&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},643:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"NEW",get:function(){return"NEW"}},{key:"RENDERED",get:function(){return"RENDERED"}},{key:"NOT_FOUND",get:function(){return"NOT_FOUND"}},{key:"ERROR",get:function(){return"ERROR"}},{key:"STATES",get:function(){return[t.NEW,t.RENDERED,t.NOT_FOUND,t.ERROR]}}],(r=null)&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},15:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var i=n(847),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"create",value:function(){return new i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}],(n=null)&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=a},847:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var u=n(159),c=n(392),s=n(484),l=n(169),f=n(692),p=n(148),y=n(109),m=n(346),b=n(777),d=n(199),v=n(480),h=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.EVENTS=m;var r,o=u(this);for(r in e=c(e),o.eventBus=new y,o.requestFactory=new l(e.method,e.url,e.version,e.channel),o.gateway=null,o.bannerManager=new f(o.eventBus),o.bannerRenderer=new b(e.template),o.bannerInterractionWatcher=new d(o.bannerManager,o.eventBus,e.interaction),o.metricsEventListener=new v(o.eventBus,e.channel,e.metrics),this.setLocale(e.locale),o.requestFactory.origin=e.origin,e.resources)o.requestFactory.addDefaultResource(r,e.resources[r]);window.addEventListener("resize",(function(){var t=o.bannerManager.getBannersByState({state:o.bannerManager.STATE.RENDERED,managed:!0,external:!1});for(var e in t)t[e].needRedraw()&&n.renderBanner(t[e])})),o.metricsEventListener.attach(),o.bannerInterractionWatcher.start()}var e,n,r;return e=t,n=[{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return u(this).eventBus.subscribe(t,e,n)}},{key:"setLocale",value:function(t){u(this).requestFactory.locale=t}},{key:"setGateway",value:function(t){if(!s.isGateway(t))throw new TypeError("Argument gateway mut be instance of AbstractGateway.");u(this).gateway=t}},{key:"getGateway",value:function(){return null===u(this).gateway&&this.setGateway(s.create()),u(this).gateway}},{key:"createBanner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(this).bannerManager.addManagedBanner(t,e,n)}},{key:"attachBanners",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=u(this),r=o(e.querySelectorAll("[data-amp-banner]:not([data-amp-attached])"));try{for(r.s();!(t=r.n()).done;){var i=t.value,a=void 0;if("ampBannerExternal"in i.dataset)a=u(this).bannerManager.addExternalBanner(i);else{var c=i.getAttribute("data-amp-banner"),s={};if(!c)continue;var l,f=[].filter.call(i.attributes,(function(t){return/^data-amp-resource-[\S]+/.test(t.name)})),p=o(f);try{for(p.s();!(l=p.n()).done;){var y=l.value;y.value&&(s[y.name.slice(18)]=y.value.split(",").map((function(t){return t.trim()})))}}catch(t){p.e(t)}finally{p.f()}a=this.createBanner(i,c,s)}n.eventBus.dispatch(this.EVENTS.ON_BANNER_ATTACHED,a)}}catch(t){r.e(t)}finally{r.f()}}},{key:"fetch",value:function(){var t=this,e=u(this),n=e.bannerManager.getBannersByState({state:e.bannerManager.STATE.NEW,managed:!0,external:!1});if(n.length){var r,i=e.requestFactory.create(),a=o(n);try{for(a.s();!(r=a.n()).done;){var c=r.value;i.addPosition(c.position,c.resources)}}catch(t){a.e(t)}finally{a.f()}e.eventBus.dispatch(this.EVENTS.ON_BEFORE_FETCH),this.getGateway().fetch(i,(function(r){var i,a=r.data,u=o(n);try{for(u.s();!(i=u.n()).done;){var c=i.value;c.position in a&&"banners"in a[c.position]&&Object.values(a[c.position].banners).length?(Array.isArray(a[c.position].banners)||(a[c.position].banners=Object.values(a[c.position].banners)),c.setResponseData(a[c.position]),t.renderBanner(c)):c.setState(e.bannerManager.STATE.NOT_FOUND,"Banner not found in fetched response.")}}catch(t){u.e(t)}finally{u.f()}e.eventBus.dispatch(t.EVENTS.ON_FETCH_SUCCESS,r)}),(function(r){var i,a=o(n);try{for(a.s();!(i=a.n()).done;)i.value.setState(e.bannerManager.STATE.ERROR,"Request on api failed.")}catch(t){a.e(t)}finally{a.f()}e.eventBus.dispatch(t.EVENTS.ON_FETCH_ERROR,r)}))}}},{key:"renderBanner",value:function(t){if(!(t instanceof p))throw new TypeError("Only managed banners can be rendered.");var e=u(this);try{e.bannerRenderer.render(t)}catch(n){return void t.setState(e.bannerManager.STATE.ERROR,"Render error: "+n.message)}t.setState(e.bannerManager.STATE.RENDERED,"Banner was successfully rendered.")}}],n&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=h},392:(t,e,n)=>{function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var a=n(377),u=function(t,e){var n=Math.round(10*t)/10;return n!==t&&console.warn('The value for the option "'.concat(e,'" has been rounded to ').concat(n," (originally ").concat(t,").")),n};t.exports=function(t){var e=a({method:"GET",url:null,version:1,channel:null,locale:null,resources:{},origin:null,template:n(106),interaction:{defaultIntersectionRatio:.5,intersectionRatioMap:{},firstTimeSeenTimeout:1e3},metrics:{receiver:null,disabledEvents:[]}},t);if("string"!=typeof e.method||!(e.method.toUpperCase()in{GET:1,POST:1}))throw new Error('The option "method" must be one of these ["GET", "POST"], '.concat(e.method," passed."));if(e.method=e.method.toUpperCase(),"string"!=typeof e.url)throw new Error('The option "url" is required and must be a valid URL, '.concat(e.url," passed."));if("number"!=typeof e.version)throw new Error('The option "version" must be a number, '.concat(e.version," passed."));if("string"!=typeof e.channel)throw new Error('The option "channel" is required and must be a string, '.concat(e.channel," passed."));if(null!==e.locale&&"string"!=typeof e.locale)throw new Error('The option "locale" must be a string, '.concat(e.locale," passed."));if("object"!==i(e.resources))throw new Error('The option "resources" must be an object of that describes resources, '.concat(e.resources," passed."));if(null!==e.origin&&"string"!=typeof e.origin)throw new Error('The option "origin" must be a valid URL, '.concat(e.origin," passed."));if("object"!==i(e.template))throw new Error('The option "template" must be an object of the format { single: string, random: string, multiple: string }, '.concat(e.template," passed."));for(var o=0,c=Object.entries(e.template);o<c.length;o++){var s=r(c[o],2),l=s[0],f=s[1];if("string"!=typeof f)throw new Error('The option "template.'.concat(l,'" must be a string (lodash template), ').concat(f," passed."))}if("object"!==i(e.interaction))throw new Error('The option "interaction" must be an object of the format { intersectionRatio: int|float, firstTimeSeenTimeout: int }, '.concat(e.interaction," passed."));if("number"!=typeof e.interaction.defaultIntersectionRatio||.1>e.interaction.defaultIntersectionRatio||1<e.interaction.defaultIntersectionRatio)throw new Error('The option "interaction.defaultIntersectionRatio" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "'.concat(e.interaction.defaultIntersectionRatio,'" passed.'));if(e.interaction.defaultIntersectionRatio=u(e.interaction.defaultIntersectionRatio,"interaction.defaultIntersectionRatio"),"object"!==i(e.interaction.intersectionRatioMap))throw new Error('The option "interaction.intersectionRatioMap" must be an object with an integer keys (pixels) and valid ratios as values, '.concat(e.interaction.intersectionRatioMap," passed."));for(var p=0,y=Object.entries(e.interaction.intersectionRatioMap);p<y.length;p++){var m=r(y[p],2),b=m[0],d=m[1];if(Number(b).toString()!==b)throw new Error('The key "interaction.intersectionRatioMap.'.concat(b,'" must be an integer.'));if("number"!=typeof d||.1>d||1<d)throw new Error('The option "interaction.intersectionRatioMap.'.concat(b,'" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "').concat(e.interaction.intersectionRatioMap[b],'" passed.'));e.interaction.intersectionRatioMap[b]=u(d,"interaction.intersectionRatioMap."+b)}if(!Number.isInteger(e.interaction.firstTimeSeenTimeout)||500>e.interaction.firstTimeSeenTimeout)throw new Error('The option "interaction.firstTimeSeenTimeout" must be a int with a minimum value of 500, "'.concat(e.interaction.firstTimeSeenTimeout,'" passed.'));if("object"!==i(e.metrics))throw new Error('The option "metrics" must be an object of the format { receiver: null|string|function|array<string|function>, disabledEvents: array<string> }, '.concat(e.metrics," passed."));if(null!==e.metrics.receiver&&-1===["string","function"].indexOf(i(e.metrics.receiver))&&!Array.isArray(e.metrics.receiver))throw new Error('The option "metrics.receiver" must be a null or a string or a function or an array of strings|functions, "'.concat(e.metrics.receiver,'" passed.'));if(Array.isArray(e.metrics.receiver)){for(var v in e.metrics.receiver)if(-1===["string","function"].indexOf(i(e.metrics.receiver[v])))throw new Error('The option "metrics.receiver.'.concat(v,'" must be a string or a function, "').concat(e.metrics.receiver[v],'" passed.'))}else e.metrics.receiver=null!==e.metrics.receiver?[e.metrics.receiver]:[];if(!Array.isArray(e.metrics.disabledEvents))throw new Error('The option "metrics.disabledEvents" must an array of strings (event names), "'.concat(e.metrics.disabledEvents,'" passed.'));for(var h in e.metrics.disabledEvents)if("string"!=typeof e.metrics.disabledEvents[h])throw new Error('The option "metrics.disabledEvents.'.concat(h,'" must be a string, "').concat(e.metrics.disabledEvents[h],'" passed.'));return e}},106:t=>{var e=function(t){return"\n        <% if('img' === ".concat(t,'.content.type) { %>\n            <a class="amp-banner__content amp-banner__content--img" href="<%= ').concat(t,'.content.href %>" <% if(null !== ').concat(t,".content.target) { print('target=\"' + ").concat(t,".content.target + '\"'); } %>>\n                <picture>\n                    <% (").concat(t,'.content.sources || []).forEach(function(source) { %>\n                        <source type="<%= source.type %>" srcset="<%= source.srcset %>" sizes="<%- ').concat(t,'.content.sizes %>">\n                    <% }); %>\n                    <img srcset="<%= ').concat(t,'.content.srcset %>" src="<%= ').concat(t,'.content.src %>" sizes="<%- ').concat(t,'.content.sizes %>" alt="<%- ').concat(t,".content.alt %>\" <% if('' !== ").concat(t,".content.title) { print('title=\"' + ").concat(t,".content.title + '\"'); } %>>\n                </picture>\n            </a>\n        <% } else if ('html' === ").concat(t,'.content.type) { %>\n            <div class="amp-banner__content amp-banner__content--html">\n                <%= ').concat(t,".content.html %>\n            </div>\n        <% } %>\n    ")};t.exports={single:'<div class="amp-banner amp-banner--single" data-amp-banner-fingerprint="<%= data.fingerprint %>">'.concat(e("data"),"</div>"),random:'<div class="amp-banner amp-banner--random" data-amp-banner-fingerprint="<%= data.fingerprint %>">'.concat(e("data"),"</div>"),multiple:'\n        <div class="amp-banner amp-banner--multiple">\n            <div class="amp-banner__list">\n                <% data.forEach(function(b) { %>\n                    <div class="amp-banner__item" data-amp-banner-fingerprint="<%= b.fingerprint %>">\n                        '.concat(e("b"),"\n                    </div>\n                <% }); %>\n            </div>\n        </div>\n    ")}},109:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var u=n(604),c=n(159),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this).generator=new u,c(this).listeners={},c(this).sortedListeners={}}var e,n,r;return e=t,n=[{key:"subscribe",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("function"!=typeof e)throw new TypeError("Listener must be of type function.");var o=c(this),i="idx_"+o.generator.getNextIdentifier();return o.listeners[t]=o.listeners[t]||{},o.listeners[t][i]={callback:e,scope:n,priority:r},t in o.sortedListeners&&delete o.sortedListeners[t],function(){t in o.listeners&&i in o.listeners[t]&&delete o.listeners[t][i]}}},{key:"dispatch",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,a=o(this.getSortedListeners(t));try{for(a.s();!(i=a.n()).done;){var u,c=i.value;(u=c.callback).call.apply(u,[c.scope].concat(n))}}catch(t){a.e(t)}finally{a.f()}}},{key:"reset",value:function(){c(this).listeners={}}},{key:"getSortedListeners",value:function(t){if(t in c(this).sortedListeners)return c(this).sortedListeners[t];var e=Object.values(c(this).listeners[t]||{}).sort((function(t,e){return t.priority>e.priority?-1:t.priority<e.priority?1:0}));return c(this).sortedListeners[t]=e}}],n&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=s},346:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"ON_BANNER_ATTACHED",get:function(){return"amp:banner:attached"}},{key:"ON_BANNER_STATE_CHANGED",get:function(){return"amp:banner:state-changed"}},{key:"ON_BANNER_INTERSECTION_CHANGED",get:function(){return"amp:banner:intersection-changed"}},{key:"ON_BANNER_FIRST_TIME_SEEN",get:function(){return"amp:banner:first-time-seen"}},{key:"ON_BANNER_FIRST_TIME_FULLY_SEEN",get:function(){return"amp:banner:first-time-fully-seen"}},{key:"ON_BANNER_LINK_CLICKED",get:function(){return"amp:banner:link-clicked"}},{key:"ON_BEFORE_FETCH",get:function(){return"amp:fetch:before"}},{key:"ON_FETCH_ERROR",get:function(){return"amp:fetch:error"}},{key:"ON_FETCH_SUCCESS",get:function(){return"amp:fetch:success"}}],(r=null)&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},549:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constructor===t)throw new TypeError("Can not construct abstract class AbstractGateway.");if(this.fetch===t.prototype.fetch)throw new TypeError("Please implement abstract method ::fetch().")}var e,r,o;return e=t,(r=[{key:"fetch",value:function(t,e){throw new TypeError("Do not call abstract method ::fetch() from child.")}}])&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},427:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var l=n(549),f=n(685).Z,p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(s,t);var e,n,r,i=c(s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.apply(this,arguments)}return e=s,(n=[{key:"fetch",value:function(t,e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(XMLHttpRequest.DONE!==r.readyState||0===r.status)return!1;var t=JSON.parse(r.responseText);200<=r.status&&300>r.status?e(t):n(t)},r.onerror=function(){n({status:"error",data:{code:r.status,error:r.statusText||"unknown"}})};var i=t.endpoint;"GET"===t.method&&(i+="?".concat(f.stringify(t.parameters))),r.open(t.method,i,!0),r.overrideMimeType("application/json"),r.setRequestHeader("Accept","application/json");var a,u=o(t.headers);try{for(u.s();!(a=u.n()).done;){var c=a.value;r.setRequestHeader(c.name,c.value)}}catch(t){u.e(t)}finally{u.f()}r.send("POST"===t.method?JSON.stringify(t.parameters):null)}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(l);t.exports=p},484:(t,e,n)=>{var r=n(549),o=n(427);t.exports={isGateway:function(t){return t instanceof r},create:function(){return new o}}},199:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var u=n(643),c=n(83),s=n(346),l=n(159),f=n(598),p=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this).started=!1,l(this).bannerManager=e,l(this).eventBus=n,l(this).fingerprints={},l(this).intersectionObserver=f(e,n,l(this).fingerprints,r.defaultIntersectionRatio,r.intersectionRatioMap,r.firstTimeSeenTimeout)}var e,n,r;return e=t,(n=[{key:"start",value:function(){if(!l(this).started){var t=this;l(this).started=!0,l(t).eventBus.subscribe(s.ON_BANNER_STATE_CHANGED,(function(e){if(u.RENDERED===e.state){var n,r=o(e.element.querySelectorAll("[data-amp-banner-fingerprint]"));try{var i=function(){var e=n.value,r=e.dataset.ampBannerFingerprint;r in l(t).fingerprints||(l(t).fingerprints[r]={fingerprint:c.createFromValue(r),alreadySeen:!1,alreadyFullySeen:!1,firstTimeSeenTimeoutId:null,firstTimeFullySeenTimeoutId:null}),void 0===e.dataset.ampBannerFingerprintObserved&&Promise.all([].slice.call(e.getElementsByTagName("img")).filter((function(t){return!t.complete})).map((function(t){return new Promise((function(e){t.onload=t.onerror=e}))}))).then((function(){void 0===e.dataset.ampBannerFingerprintObserved&&(e.dataset.ampBannerFingerprintObserved="true",l(t).intersectionObserver.observe(e))}));var i,a=o(e.getElementsByTagName("a"));try{for(a.s();!(i=a.n()).done;){var u=i.value;void 0===u.dataset.ampClickingAttached&&(u.dataset.ampClickingAttached="true",u.addEventListener("click",(function(e){var n=l(t).fingerprints[r];if(n){var o=l(t).bannerManager.getBannerByFingerprint(r);if(o){var i={fingerprint:n.fingerprint,element:this.closest("[data-amp-banner-fingerprint]"),banner:o,target:this,clickEvent:e};n.alreadySeen||(n.alreadySeen=!0,l(t).eventBus.dispatch(s.ON_BANNER_FIRST_TIME_SEEN,i)),l(t).eventBus.dispatch(s.ON_BANNER_LINK_CLICKED,i)}else console.warn('Unable to invoke an event "amp:banner:link-clicked" because the banner for fingerprint "'.concat(r,'" not found.'))}else console.warn('Unable to invoke an event "amp:banner:link-clicked" because the fingerprint "'.concat(r,'" not managed.'))})))}}catch(t){a.e(t)}finally{a.f()}};for(r.s();!(n=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}}}),null,-100)}}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=p},598:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=n(346);t.exports=function(t,e,n,r,o,a){var c=[];for(var l in o)c.push({pixels:parseInt(l),ratio:o[l]});c=c.sort((function(t,e){return e.pixels-t.pixels}));var f=function(t){var e,n=getComputedStyle(t),o=(t.offsetWidth-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight))-(parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth)))*(t.offsetHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom))-(parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth))),i=u(c);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(o>=a.pixels)return a.ratio}}catch(t){i.e(t)}finally{i.f()}return r};return new IntersectionObserver((function(r){var o,c=[],l={},p={},y=u(r);try{for(y.s();!(o=y.n()).done;){var m=o.value,b=m.target.dataset.ampBannerFingerprint,d=t.getBannerByFingerprint(b);if(d){var v=n[b];if(v){var h={fingerprint:v.fingerprint,element:m.target,banner:d};if(c.push(i(i({},h),{},{entry:m})),!v.alreadySeen){var g=m.intersectionRatio>=f(m.target);l[b]=!(b in l)||!l[b].isIntersecting&&g?{fingerprintArgs:h,fingerprintMetadata:v,isIntersecting:g}:l[b]}if(!v.alreadyFullySeen){var w=1<=m.intersectionRatio;p[b]=!(b in p)||!p[b].isFullyIntersecting&&w?{fingerprintArgs:h,fingerprintMetadata:v,isFullyIntersecting:w}:p[b]}}}}}catch(t){y.e(t)}finally{y.f()}for(var S=function(){var t=O[E],n=t.fingerprintArgs,r=t.fingerprintMetadata,o=t.isIntersecting;o&&!r.alreadySeen&&null===r.firstTimeSeenTimeoutId?r.firstTimeSeenTimeoutId=setTimeout((function(){r.alreadySeen=!0,e.dispatch(s.ON_BANNER_FIRST_TIME_SEEN,n)}),a):o||null===r.firstTimeSeenTimeoutId||(clearTimeout(r.firstTimeSeenTimeoutId),r.firstTimeSeenTimeoutId=null)},E=0,O=Object.values(l);E<O.length;E++)S();for(var T=function(){var t=k[j],n=t.fingerprintArgs,r=t.fingerprintMetadata,o=t.isFullyIntersecting;o&&!r.alreadyFullySeen&&null===r.firstTimeFullySeenTimeoutId?r.firstTimeFullySeenTimeoutId=setTimeout((function(){r.alreadyFullySeen=!0,e.dispatch(s.ON_BANNER_FIRST_TIME_FULLY_SEEN,n)}),a):o||null===r.firstTimeFullySeenTimeoutId||(clearTimeout(r.firstTimeFullySeenTimeoutId),r.firstTimeFullySeenTimeoutId=null)},j=0,k=Object.values(p);j<k.length;j++)T();for(var N=0,A=c;N<A.length;N++){var P=A[N];e.dispatch(s.ON_BANNER_INTERSECTION_CHANGED,P)}}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]})}},117:t=>{t.exports=function(t,e){console.log("Sending metrics.",{eventName:t,eventArgs:e})}},388:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"BANNER_LOADED",get:function(){return"amp:banner:loaded"}},{key:"BANNER_DISPLAYED",get:function(){return"amp:banner:displayed"}},{key:"BANNER_FULLY_DISPLAYED",get:function(){return"amp:banner:fully-displayed"}},{key:"BANNER_CLICKED",get:function(){return"amp:banner:clicked"}}],(r=null)&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},528:t=>{var e=!1;t.exports=function(t,n){if(!("gtag"in window)||"function"!=typeof window.gtag)return!e&&console.warn("Unable to send metrics to Google Analytics because the function gtag() does not occur in the window."),void(e=!0);Object.keys(n).forEach((function(t){return null===n[t]&&delete n[t]})),window.gtag("event",t,n)}},56:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var o=!1;t.exports=function(t,e){if(!("dataLayer"in window))return!o&&console.warn("Unable to send metrics to GTM because the dataLayer does not occur in the window."),void(o=!0);Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),window.dataLayer.push(function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({event:t},e))}},480:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}var f=n(159),p=n(131),y=n(388),m=n(346),b=n(643),d=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this).attached=!1,f(this).eventBus=e,f(this).channelCode=n,f(this).metricsSender=p.createFromReceivers(r.receiver),f(this).disabledEvents=r.disabledEvents}var e,n,r;return e=t,(n=[{key:"attach",value:function(){if(!f(this).attached){f(this).attached=!0;var t=f(this).eventBus,e=f(this).channelCode,n=f(this).metricsSender,r=f(this).disabledEvents;if(n.hasAnyReceiver()){var o=function(t,n){var r=n.getCurrenBreakpoint(t.bannerId);return r=null===r?"default":"".concat("min"===n.positionData.breakpointType?">=":"<=").concat(r),{channel_code:e,banner_id:t.bannerId,banner_name:t.bannerName,position_id:t.positionId,position_code:t.positionCode,position_name:t.positionName,campaign_id:t.campaignId,campaign_code:t.campaignCode,campaign_name:t.campaignName,breakpoint:r}};-1===r.indexOf(y.BANNER_LOADED)&&t.subscribe(m.ON_BANNER_STATE_CHANGED,(function(t){if(b.RENDERED===t.state&&1===t.stateCounter){var e,r=u(t.fingerprints);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.send(y.BANNER_LOADED,o(i,t))}}catch(t){r.e(t)}finally{r.f()}}})),-1===r.indexOf(y.BANNER_DISPLAYED)&&t.subscribe(m.ON_BANNER_FIRST_TIME_SEEN,(function(t){var e=t.fingerprint,r=t.banner;n.send(y.BANNER_DISPLAYED,o(e,r))})),-1===r.indexOf(y.BANNER_FULLY_DISPLAYED)&&t.subscribe(m.ON_BANNER_FIRST_TIME_FULLY_SEEN,(function(t){var e=t.fingerprint,r=t.banner;n.send(y.BANNER_FULLY_DISPLAYED,o(e,r))})),-1===r.indexOf(y.BANNER_CLICKED)&&t.subscribe(m.ON_BANNER_LINK_CLICKED,(function(t){var e=t.fingerprint,r=t.banner,a=t.target;n.send(y.BANNER_CLICKED,i(i({},o(e,r)),{},{link:a.href||""}))}))}}}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=d},131:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var u=n(159),c=n(54),s=n(528),l=n(56),f=n(117),p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this).callbacks=Array.isArray(e)?e:[e]}var e,n,r;return e=t,r=[{key:"createFromReceivers",value:function(e){if(!e)return new t([]);var n,r=[],i=o(e=Array.isArray(e)?e:[e]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("function"!=typeof a)switch(a){case"plausible":r.push(c);break;case"gtag":r.push(s);break;case"gtm":r.push(l);break;case"debug":r.push(f);break;default:console.warn("Unable to send metrics to a receiver of unknown type",a)}else r.push(a)}}catch(t){i.e(t)}finally{i.f()}return new t(r)}}],(n=[{key:"hasAnyReceiver",value:function(){return u(this).callbacks.length}},{key:"send",value:function(t,e){var n,r=o(u(this).callbacks);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t,e)}catch(t){r.e(t)}finally{r.f()}}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=p},54:t=>{var e=!1;t.exports=function(t,n){if(!("plausible"in window)||"function"!=typeof window.plausible)return!e&&console.warn("Unable to send metrics to Plausible because the function plausible() does not occur in the window."),void(e=!0);Object.keys(n).forEach((function(t){return null===n[t]&&delete n[t]})),window.plausible(t,{props:n})}},777:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var u=n(781),c=n(159),s=function(){function t(e){o(this,t),c(this).templates=e,c(this).compiled={}}return a(t,[{key:"getTemplate",value:function(t){var e=c(this);if(t in e.compiled)return e.compiled[t];if(!(t in e.templates))throw new Error('Template with type "'.concat(t,'" not found.'));return e.compiled[t]=u(e.templates[t])}}]),t}(),l=function(){function t(e){o(this,t),c(this).loader=new s(e)}return a(t,[{key:"render",value:function(t){t.html=c(this).loader.getTemplate(t.positionData.displayType)({banner:t,data:t.bannerData})}}]),t}();t.exports=l},169:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var i=n(53),a=n(369),u=n(159),c=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this).method=e,u(this).endpoint="".concat(n,"/api/v").concat(r,"/content/").concat(o),u(this).locale=null,u(this).defaultResources=[],u(this).origin=null}var e,n,r;return e=t,(n=[{key:"locale",set:function(t){u(this).locale=t}},{key:"origin",set:function(t){u(this).origin=t}},{key:"addDefaultResource",value:function(t,e){u(this).defaultResources.push(new i(t,e))}},{key:"create",value:function(){var t=u(this),e=[];return"string"==typeof t.origin&&""!==t.origin&&e.push({name:"X-Amp-Origin",value:t.origin}),new a(t.method,t.endpoint,t.locale,t.defaultResources,e)}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=c},369:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var i=n(53),a=n(159),u=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this).method=e,a(this).endpoint=n,a(this).locale=r,a(this).query={},a(this).defaultResources=o,a(this).headers=i}var e,n,r;return e=t,n=[{key:"addPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=a(this).query;if(t in n)throw new Error('Position "'+t+'" already exists.');n[t]={},this.addPositionResources(t,a(this).defaultResources),this.addPositionResources(t,e)}},{key:"addPositionResources",value:function(t,e){for(var n in e)this.addPositionResource(t,e[n])}},{key:"addPositionResource",value:function(t,e){if(!(e instanceof i))throw new TypeError("Argument resource must be instance of Resource class.");var n=a(this).query;if(!(t in n))throw new Error('Missing position "'+t+'".');var r=n[t];e.name in r?r[e.name]=r[e.name].withValues(e.value):r[e.name]=e}},{key:"method",get:function(){return a(this).method}},{key:"endpoint",get:function(){return a(this).endpoint}},{key:"locale",get:function(){return a(this).locale}},{key:"parameters",get:function(){var t=function(t){var e,n,r=Object.assign({},t);for(e in r)for(n in r[e])r[e][n]=r[e][n].value;return r}(a(this).query),e={query:"GET"===this.method?JSON.stringify(t):t};return null!==this.locale&&(e.locale=this.locale),e}},{key:"headers",get:function(){return a(this).headers}}],n&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=u},53:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var i=n(159);function a(t){return Array.isArray(t)?t:[t]}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this).name=e,i(this).value=a(n)}var e,n,r;return e=t,(n=[{key:"name",get:function(){return i(this).name}},{key:"value",get:function(){return i(this).value}},{key:"withValues",value:function(e){return new t(this.name,a(e).concat(this.value).filter((function(t,e,n){return n.indexOf(t)===e})))}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=u},159:t=>{var e=new WeakMap;t.exports=function(t){return e.has(t)||e.set(t,{}),e.get(t)}},593:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"randomByWeights",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weight",n={},r=0,o=0;o<t.length;o++)r+=t[o][e];for(var i=0;i<t.length;i++)n[i]=t[i][e]/r;for(var a=0,u=Math.random();u>0;)u-=n[a],a++;return t[--a]?t[a]:t[0]}}],(r=null)&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},604:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}var i=n(159),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this).lastId=e-1}var e,n,r;return e=t,(n=[{key:"getNextIdentifier",value:function(){return i(this).lastId++}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=a},377:t=>{"use strict";t.exports=_.merge},781:t=>{"use strict";t.exports=_.template},685:(t,e,n)=>{"use strict";n.d(e,{Z:()=>A});var r={};n.r(r),n.d(r,{exclude:()=>N,extract:()=>S,parse:()=>E,parseUrl:()=>T,pick:()=>k,stringify:()=>O,stringifyUrl:()=>j});const o="%[a-f0-9]{2}",i=new RegExp("("+o+")|([^%]+?)","gi"),a=new RegExp("("+o+")+","gi");function u(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;e=e||1;const n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],u(n),u(r))}function c(t){try{return decodeURIComponent(t)}catch{let e=t.match(i)||[];for(let n=1;n<e.length;n++)e=(t=u(e,n).join("")).match(i)||[];return t}}function s(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return function(t){const e={"%FE%FF":"��","%FF%FE":"��"};let n=a.exec(t);for(;n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{const t=c(n[0]);t!==n[0]&&(e[n[0]]=t)}n=a.exec(t)}e["%C2"]="�";const r=Object.keys(e);for(const n of r)t=t.replace(new RegExp(n,"g"),e[n]);return t}(t)}}function l(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===t||""===e)return[];const n=t.indexOf(e);return-1===n?[]:[t.slice(0,n),t.slice(n+e.length)]}function f(t,e){const n={};if(Array.isArray(e))for(const r of e){const e=Object.getOwnPropertyDescriptor(t,r);e?.enumerable&&Object.defineProperty(n,r,e)}else for(const r of Reflect.ownKeys(t)){const o=Object.getOwnPropertyDescriptor(t,r);if(o.enumerable){e(r,t[r],t)&&Object.defineProperty(n,r,o)}}return n}const p=t=>null==t,y=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)),m=Symbol("encodeFragmentIdentifier");function b(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(t,e){return e.encode?e.strict?y(t):encodeURIComponent(t):t}function v(t,e){return e.decode?s(t):t}function h(t){return Array.isArray(t)?t.sort():"object"==typeof t?h(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function g(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function w(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function S(t){const e=(t=g(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function E(t,e){b((e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e}).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)]$/.exec(t),t=t.replace(/\[\d*]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[])$/.exec(t),t=t.replace(/\[]$/,""),e?void 0!==r[t]?r[t]=[...r[t],n]:r[t]=[n]:r[t]=n};case"colon-list-separator":return(t,n,r)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==r[t]?r[t]=[...r[t],n]:r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const o="string"==typeof n&&n.includes(t.arrayFormatSeparator),i="string"==typeof n&&!o&&v(n,t).includes(t.arrayFormatSeparator);n=i?v(n,t):n;const a=o||i?n.split(t.arrayFormatSeparator).map((e=>v(e,t))):null===n?n:v(n,t);r[e]=a};case"bracket-separator":return(e,n,r)=>{const o=/(\[])$/.test(e);if(e=e.replace(/\[]$/,""),!o)return void(r[e]=n?v(n,t):n);const i=null===n?[]:n.split(t.arrayFormatSeparator).map((e=>v(e,t)));void 0!==r[e]?r[e]=[...r[e],...i]:r[e]=i};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[...[n[t]].flat(),e]:n[t]=e}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const o of t.split("&")){if(""===o)continue;const t=e.decode?o.replace(/\+/g," "):o;let[i,a]=l(t,"=");void 0===i&&(i=t),a=void 0===a?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:v(a,e),n(v(i,e),a,r)}for(const[t,n]of Object.entries(r))if("object"==typeof n&&null!==n)for(const[t,r]of Object.entries(n))n[t]=w(r,e);else r[t]=w(n,e);return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce(((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=h(n):t[e]=n,t}),Object.create(null))}function O(t,e){if(!t)return"";b((e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e}).arrayFormatSeparator);const n=n=>e.skipNull&&p(t[n])||e.skipEmptyString&&""===t[n],r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const o=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[d(e,t),"[",o,"]"].join("")]:[...n,[d(e,t),"[",d(o,t),"]=",d(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[d(e,t),"[]"].join("")]:[...n,[d(e,t),"[]=",d(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[d(e,t),":list="].join("")]:[...n,[d(e,t),":list=",d(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return n=>(r,o)=>void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?r:(o=null===o?"":o,0===r.length?[[d(n,t),e,d(o,t)].join("")]:[[r,d(o,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,d(e,t)]:[...n,[d(e,t),"=",d(r,t)].join("")]}}(e),o={};for(const[e,r]of Object.entries(t))n(e)||(o[e]=r);const i=Object.keys(o);return!1!==e.sort&&i.sort(e.sort),i.map((n=>{const o=t[n];return void 0===o?"":null===o?d(n,e):Array.isArray(o)?0===o.length&&"bracket-separator"===e.arrayFormat?d(n,e)+"[]":o.reduce(r(n),[]).join("&"):d(n,e)+"="+d(o,e)})).filter((t=>t.length>0)).join("&")}function T(t,e){e={decode:!0,...e};let[n,r]=l(t,"#");return void 0===n&&(n=t),{url:n?.split("?")?.[0]??"",query:E(S(t),e),...e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:v(r,e)}:{}}}function j(t,e){e={encode:!0,strict:!0,[m]:!0,...e};const n=g(t.url).split("?")[0]||"";let r=O({...E(S(t.url),{sort:!1}),...t.query},e);r&&(r=`?${r}`);let o=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);if(t.fragmentIdentifier){const r=new URL(n);r.hash=t.fragmentIdentifier,o=e[m]?r.hash:`#${t.fragmentIdentifier}`}return`${n}${r}${o}`}function k(t,e,n){n={parseFragmentIdentifier:!0,[m]:!1,...n};const{url:r,query:o,fragmentIdentifier:i}=T(t,n);return j({url:r,query:f(o,e),fragmentIdentifier:i},n)}function N(t,e,n){return k(t,Array.isArray(e)?t=>!e.includes(t):(t,n)=>!e(t,n),n)}const A=r}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r=n(10);AMPClientFactory=r})();