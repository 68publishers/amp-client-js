var AMPClientFactory;(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.d(e,{default:()=>_l});var n={};t.r(n),t.d(n,{exclude:()=>V,extract:()=>F,parse:()=>U,parseUrl:()=>$,pick:()=>G,stringify:()=>z,stringifyUrl:()=>H});const r=JSON.parse('{"i8":"1.7.0-beta.7"}');function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,a=void 0,a=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}function a(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function u(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function c(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,l(t,e,"set"),n),n}function l(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var s=new WeakMap,f=new WeakMap,p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,s,{writable:!0,value:void 0}),a(this,f,{writable:!0,value:void 0}),c(this,s,e),c(this,f,n)}var e,n,r;return e=t,(n=[{key:"semver",get:function(){return u(this,s)}},{key:"full",get:function(){return u(this,f)}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const y=_.merge,b={single:'\n    <div class="amp-banner amp-banner--single"\n         data-amp-banner-fingerprint="<%= data.fingerprint %>">\n\n        <% if(\'img\' === data.content.type) { %>\n            <a class="amp-banner__content amp-banner__content--img"\n               href="<%= data.content.href %>"\n               <% if(null !== data.content.target) { %>target="<%- data.content.target %>"<% } %>>\n                <picture>\n                    <% (data.content.sources || []).forEach(function(source) { %>\n                        <source type="<%= source.type %>"\n                                srcset="<%= source.srcset %>"\n                                sizes="<%- data.content.sizes %>">\n                    <% }); %>\n                    <img srcset="<%= data.content.srcset %>"\n                         src="<%= data.content.src %>"\n                         sizes="<%- data.content.sizes %>"\n                         alt="<%- data.content.alt %>"\n                         <% if(null !== data.content.dimensions.width) { %>width="<%- data.content.dimensions.width %>"<% } %>\n                         <% if(null !== data.content.dimensions.height) { %>height="<%- data.content.dimensions.height %>"<% } %>\n                         <% if(\'\' !== data.content.title) { %>title="<%- data.content.title %>"<% } %>\n                         <% var loading; if(loading = banner.options.evaluate(\'loading\', 0)) { %>loading="<%- loading %>"<% } %>\n                         <% var fetchPriority; if(fetchPriority = banner.options.evaluate(\'fetchpriority\', 0)) { %>fetchpriority="<%- fetchPriority %>"<% } %>>\n                </picture>\n            </a>\n        <% } else if (\'html\' === data.content.type) { %>\n            <div class="amp-banner__content amp-banner__content--html">\n                <%= data.content.html %>\n            </div>\n        <% } %>\n\n    </div>\n',random:'\n    <div class="amp-banner amp-banner--random"\n         data-amp-banner-fingerprint="<%= data.fingerprint %>">\n\n        <% if(\'img\' === data.content.type) { %>\n            <a class="amp-banner__content amp-banner__content--img"\n               href="<%= data.content.href %>"\n               <% if(null !== data.content.target) { %>target="<%- data.content.target %>"<% } %>>\n                <picture>\n                    <% (data.content.sources || []).forEach(function(source) { %>\n                        <source type="<%= source.type %>"\n                                srcset="<%= source.srcset %>"\n                                sizes="<%- data.content.sizes %>">\n                    <% }); %>\n                    <img srcset="<%= data.content.srcset %>"\n                         src="<%= data.content.src %>"\n                         sizes="<%- data.content.sizes %>"\n                         alt="<%- data.content.alt %>"\n                         <% if(null !== data.content.dimensions.width) { %>width="<%- data.content.dimensions.width %>"<% } %>\n                         <% if(null !== data.content.dimensions.height) { %>height="<%- data.content.dimensions.height %>"<% } %>\n                         <% if(\'\' !== data.content.title) { %>title="<%- data.content.title %>"<% } %>\n                         <% var loading; if(loading = banner.options.evaluate(\'loading\', 0)) { %>loading="<%- loading %>"<% } %>\n                         <% var fetchPriority; if(fetchPriority = banner.options.evaluate(\'fetchpriority\', 0)) { %>fetchpriority="<%- fetchPriority %>"<% } %>>\n                </picture>\n            </a>\n        <% } else if (\'html\' === data.content.type) { %>\n            <div class="amp-banner__content amp-banner__content--html">\n                <%= data.content.html %>\n            </div>\n        <% } %>\n\n    </div>\n',multiple:'\n    <div class="amp-banner amp-banner--multiple">\n        <div class="amp-banner__list">\n            <% for (index in data) { var b = data[index]; %>\n                <div class="amp-banner__item"\n                     data-amp-banner-fingerprint="<%= b.fingerprint %>">\n\n                    <% if(\'img\' === b.content.type) { %>\n                        <a class="amp-banner__content amp-banner__content--img"\n                           href="<%= b.content.href %>"\n                           <% if(null !== b.content.target) { %>target="<%- b.content.target %>"<% } %>>\n                            <picture>\n                                <% (b.content.sources || []).forEach(function(source) { %>\n                                    <source type="<%= source.type %>"\n                                            srcset="<%= source.srcset %>"\n                                            sizes="<%- b.content.sizes %>">\n                                <% }); %>\n                                <img srcset="<%= b.content.srcset %>"\n                                     src="<%= b.content.src %>"\n                                     sizes="<%- b.content.sizes %>"\n                                     alt="<%- b.content.alt %>"\n                                     <% if(null !== b.content.dimensions.width) { %>width="<%- b.content.dimensions.width %>"<% } %>\n                                     <% if(null !== b.content.dimensions.height) { %>height="<%- b.content.dimensions.height %>"<% } %>\n                                     <% if(\'\' !== b.content.title) { %>title="<%- b.content.title %>"<% } %>\n                                     <% var loading; if(loading = banner.options.evaluate(\'loading\', index)) { %>loading="<%- loading %>"<% } %>\n                                     <% var fetchPriority; if(fetchPriority = banner.options.evaluate(\'fetchpriority\', index)) { %>fetchpriority="<%- fetchPriority %>"<% } %>>\n                            </picture>\n                        </a>\n                    <% } else if (\'html\' === b.content.type) { %>\n                        <div class="amp-banner__content amp-banner__content--html">\n                            <%= b.content.html %>\n                        </div>\n                    <% } %>\n\n                </div>\n            <% } %>\n        </div>\n    </div>\n'};function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}var d=function(t,e){var n=Math.round(10*t)/10;return n!==t&&console.warn('The value for the option "'.concat(e,'" has been rounded to ').concat(n," (originally ").concat(t,").")),n};function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===w(o)?o:String(o)),r)}var i,o}var S=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constructor===t)throw new TypeError("Can not construct abstract class AbstractGateway.");if(this.fetch===t.prototype.fetch)throw new TypeError("Please implement abstract method ::fetch().")}var e,n,r;return e=t,(n=[{key:"fetch",value:function(t,e){throw new TypeError("Do not call abstract method ::fetch() from child.")}}])&&g(e.prototype,n),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const E="%[a-f0-9]{2}",T=new RegExp("("+E+")|([^%]+?)","gi"),O=new RegExp("("+E+")+","gi");function k(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;e=e||1;const n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],k(n),k(r))}function j(t){try{return decodeURIComponent(t)}catch{let e=t.match(T)||[];for(let n=1;n<e.length;n++)e=(t=k(e,n).join("")).match(T)||[];return t}}function N(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return function(t){const e={"%FE%FF":"��","%FF%FE":"��"};let n=O.exec(t);for(;n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{const t=j(n[0]);t!==n[0]&&(e[n[0]]=t)}n=O.exec(t)}e["%C2"]="�";const r=Object.keys(e);for(const n of r)t=t.replace(new RegExp(n,"g"),e[n]);return t}(t)}}function P(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===t||""===e)return[];const n=t.indexOf(e);return-1===n?[]:[t.slice(0,n),t.slice(n+e.length)]}function A(t,e){const n={};if(Array.isArray(e))for(const r of e){const e=Object.getOwnPropertyDescriptor(t,r);e?.enumerable&&Object.defineProperty(n,r,e)}else for(const r of Reflect.ownKeys(t)){const i=Object.getOwnPropertyDescriptor(t,r);if(i.enumerable){e(r,t[r],t)&&Object.defineProperty(n,r,i)}}return n}const R=t=>null==t,I=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)),C=Symbol("encodeFragmentIdentifier");function M(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function D(t,e){return e.encode?e.strict?I(t):encodeURIComponent(t):t}function B(t,e){return e.decode?N(t):t}function W(t){return Array.isArray(t)?t.sort():"object"==typeof t?W(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function x(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function L(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function F(t){const e=(t=x(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function U(t,e){M((e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e}).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)]$/.exec(t),t=t.replace(/\[\d*]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[])$/.exec(t),t=t.replace(/\[]$/,""),e?void 0!==r[t]?r[t]=[...r[t],n]:r[t]=[n]:r[t]=n};case"colon-list-separator":return(t,n,r)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==r[t]?r[t]=[...r[t],n]:r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const i="string"==typeof n&&n.includes(t.arrayFormatSeparator),o="string"==typeof n&&!i&&B(n,t).includes(t.arrayFormatSeparator);n=o?B(n,t):n;const a=i||o?n.split(t.arrayFormatSeparator).map((e=>B(e,t))):null===n?n:B(n,t);r[e]=a};case"bracket-separator":return(e,n,r)=>{const i=/(\[])$/.test(e);if(e=e.replace(/\[]$/,""),!i)return void(r[e]=n?B(n,t):n);const o=null===n?[]:n.split(t.arrayFormatSeparator).map((e=>B(e,t)));void 0!==r[e]?r[e]=[...r[e],...o]:r[e]=o};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[...[n[t]].flat(),e]:n[t]=e}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const i of t.split("&")){if(""===i)continue;const t=e.decode?i.replace(/\+/g," "):i;let[o,a]=P(t,"=");void 0===o&&(o=t),a=void 0===a?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:B(a,e),n(B(o,e),a,r)}for(const[t,n]of Object.entries(r))if("object"==typeof n&&null!==n)for(const[t,r]of Object.entries(n))n[t]=L(r,e);else r[t]=L(n,e);return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce(((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=W(n):t[e]=n,t}),Object.create(null))}function z(t,e){if(!t)return"";M((e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e}).arrayFormatSeparator);const n=n=>e.skipNull&&R(t[n])||e.skipEmptyString&&""===t[n],r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[D(e,t),"[",i,"]"].join("")]:[...n,[D(e,t),"[",D(i,t),"]=",D(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[D(e,t),"[]"].join("")]:[...n,[D(e,t),"[]=",D(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[D(e,t),":list="].join("")]:[...n,[D(e,t),":list=",D(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[D(n,t),e,D(i,t)].join("")]:[[r,D(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,D(e,t)]:[...n,[D(e,t),"=",D(r,t)].join("")]}}(e),i={};for(const[e,r]of Object.entries(t))n(e)||(i[e]=r);const o=Object.keys(i);return!1!==e.sort&&o.sort(e.sort),o.map((n=>{const i=t[n];return void 0===i?"":null===i?D(n,e):Array.isArray(i)?0===i.length&&"bracket-separator"===e.arrayFormat?D(n,e)+"[]":i.reduce(r(n),[]).join("&"):D(n,e)+"="+D(i,e)})).filter((t=>t.length>0)).join("&")}function $(t,e){e={decode:!0,...e};let[n,r]=P(t,"#");return void 0===n&&(n=t),{url:n?.split("?")?.[0]??"",query:U(F(t),e),...e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:B(r,e)}:{}}}function H(t,e){e={encode:!0,strict:!0,[C]:!0,...e};const n=x(t.url).split("?")[0]||"";let r=z({...U(F(t.url),{sort:!1}),...t.query},e);r&&(r=`?${r}`);let i=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);if(t.fragmentIdentifier){const r=new URL(n);r.hash=t.fragmentIdentifier,i=e[C]?r.hash:`#${t.fragmentIdentifier}`}return`${n}${r}${i}`}function G(t,e,n){n={parseFragmentIdentifier:!0,[C]:!1,...n};const{url:r,query:i,fragmentIdentifier:o}=$(t,n);return H({url:r,query:A(i,e),fragmentIdentifier:o},n)}function V(t,e,n){return G(t,Array.isArray(e)?t=>!e.includes(t):(t,n)=>!e(t,n),n)}const Y=n;function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function K(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===q(o)?o:String(o)),r)}var i,o}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var i=tt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(o,t);var e,n,r,i=Z(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"fetch",value:function(t,e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(XMLHttpRequest.DONE!==r.readyState||0===r.status)return!1;var t=JSON.parse(r.responseText);200<=r.status&&300>r.status?e(t):n(t)},r.onerror=function(){n({status:"error",data:{code:r.status,error:r.statusText||"unknown"}})};var i=t.endpoint;"GET"===t.method&&(i+="?".concat(Y.stringify(t.parameters))),r.open(t.method,i,!0),r.overrideMimeType("application/json"),r.setRequestHeader("Accept","application/json");var o,a=K(t.headers);try{for(a.s();!(o=a.n()).done;){var u=o.value;r.setRequestHeader(u.name,u.value)}}catch(t){a.e(t)}finally{a.f()}r.send("POST"===t.method?JSON.stringify(t.parameters):null)}}])&&Q(e.prototype,n),r&&Q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(S);function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==nt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===nt(o)?o:String(o)),r)}var i,o}function it(t,e,n){ot(t,e),e.set(t,n)}function ot(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function at(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,lt(t,e,"get"))}function ut(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ct(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,lt(t,e,"set"),n),n}function lt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var st=new WeakMap,ft=new WeakMap,pt=new WeakSet,yt=function(){function t(e,n){var r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ot(r=this,i=pt),i.add(r),it(this,st,{writable:!0,value:void 0}),it(this,ft,{writable:!0,value:void 0}),ct(this,st,e),ct(this,ft,ut(this,pt,bt).call(this,n))}var e,n,r;return e=t,(n=[{key:"name",get:function(){return at(this,st)}},{key:"value",get:function(){return at(this,ft)}},{key:"withValues",value:function(e){return new t(this.name,ut(this,pt,bt).call(this,e).concat(this.value).filter((function(t,e,n){return n.indexOf(t)===e})))}}])&&rt(e.prototype,n),r&&rt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bt(t){return Array.isArray(t)?t:[t]}function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===vt(o)?o:String(o)),r)}var i,o}function ht(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function dt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,gt(t,e,"get"))}function wt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,gt(t,e,"set"),n),n}function gt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var St=new WeakMap,Et=new WeakMap,Tt=new WeakMap,Ot=new WeakMap,kt=new WeakMap,jt=new WeakMap,Nt=new WeakMap,Pt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,St,{writable:!0,value:void 0}),ht(this,Et,{writable:!0,value:void 0}),ht(this,Tt,{writable:!0,value:void 0}),ht(this,Ot,{writable:!0,value:void 0}),ht(this,kt,{writable:!0,value:void 0}),ht(this,jt,{writable:!0,value:void 0}),ht(this,Nt,{writable:!0,value:function(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r].value.filter((function(t){return""!==t}));i.length&&(e[n][r]=i)}return e}}),wt(this,St,e),wt(this,Et,n),wt(this,Tt,r),wt(this,Ot,{}),wt(this,kt,i),wt(this,jt,o)}var e,n,r;return e=t,n=[{key:"addPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=dt(this,Ot);if(t in r)throw new Error('Position "'+t+'" already exists.');r[t]={},n&&this.addPositionResources(t,dt(this,kt)),this.addPositionResources(t,e)}},{key:"addPositionResources",value:function(t,e){for(var n in e)this.addPositionResource(t,e[n])}},{key:"addPositionResource",value:function(t,e){if(!(e instanceof yt))throw new TypeError("Argument resource must be instance of Resource class.");var n=dt(this,Ot);if(!(t in n))throw new Error('Missing position "'+t+'".');var r=n[t];e.name in r?r[e.name]=r[e.name].withValues(e.value):r[e.name]=e}},{key:"method",get:function(){return dt(this,St)}},{key:"endpoint",get:function(){return dt(this,Et)}},{key:"locale",get:function(){return dt(this,Tt)}},{key:"parameters",get:function(){var t=dt(this,Nt).call(this,dt(this,Ot)),e={query:"GET"===this.method?JSON.stringify(t):t};return null!==this.locale&&(e.locale=this.locale),e}},{key:"headers",get:function(){return dt(this,jt)}}],n&&mt(e.prototype,n),r&&mt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==At(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===At(o)?o:String(o)),r)}var i,o}function Rt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function It(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Mt(t,e,"get"))}function Ct(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Mt(t,e,"set"),n),n}function Mt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Dt=new WeakMap,Bt=new WeakMap,Wt=new WeakMap,xt=new WeakMap,Lt=new WeakMap,Ft=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rt(this,Dt,{writable:!0,value:void 0}),Rt(this,Bt,{writable:!0,value:void 0}),Rt(this,Wt,{writable:!0,value:void 0}),Rt(this,xt,{writable:!0,value:void 0}),Rt(this,Lt,{writable:!0,value:void 0}),Ct(this,Dt,e),Ct(this,Bt,"".concat(n,"/api/v").concat(r,"/content/").concat(encodeURIComponent(i))),Ct(this,Wt,null),Ct(this,xt,[]),Ct(this,Lt,null)}var e,n,r;return e=t,(n=[{key:"locale",set:function(t){Ct(this,Wt,t)}},{key:"origin",set:function(t){Ct(this,Lt,t)}},{key:"addDefaultResource",value:function(t,e){It(this,xt).push(new yt(t,e))}},{key:"create",value:function(){var t=[];return"string"==typeof It(this,Lt)&&""!==It(this,Lt)&&t.push({name:"X-Amp-Origin",value:It(this,Lt)}),new Pt(It(this,Dt),It(this,Bt),It(this,Wt),It(this,xt),t)}}])&&_t(e.prototype,n),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $t(t,e,n){return(e=Gt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gt(r.key),r)}}function Gt(t){var e=function(t,e){if("object"!==Ut(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ut(e)?e:String(e)}function Vt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Yt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Kt(t,e,"get"))}function qt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Kt(t,e,"set"),n),n}function Kt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Jt=new WeakMap,Qt=new WeakMap,Xt=new WeakMap,Zt=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Vt(this,Jt,{writable:!0,value:void 0}),Vt(this,Qt,{writable:!0,value:void 0}),Vt(this,Xt,{writable:!0,value:void 0}),qt(this,Jt,"".concat(e,"/api/v").concat(n,"/preview/position/").concat(encodeURIComponent(r))),qt(this,Qt,null),qt(this,Xt,{})}var e,n,r;return e=t,n=[{key:"locale",set:function(t){qt(this,Qt,t)}},{key:"addDefaultResource",value:function(t,e){var n=Yt(this,Xt),r=new yt(t,e);r.name in n?n[r.name]=n[r.name].withValues(r.value):n[r.name]=r}},{key:"create",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var i in"1"!==(r["omit-default-resources"]||"0").toString()?e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Yt(this,Xt)):(e={},delete r["omit-default-resources"]),n){var o=new yt(i,n[i]);o.name in e?e[o.name]=e[o.name].withValues(o.value):e[o.name]=o}var a={};for(var u in e)e[u].value.filter((function(t){return""!==t})).length&&(a[u]=e[u].value);a=JSON.stringify(a);var c=JSON.stringify(r),l={};"{}"!==a&&(l.resources=a),"{}"!==c&&(l.options=c),null!==Yt(this,Qt)&&(l.locale=Yt(this,Qt));var s=Y.stringify(l);return"".concat(Yt(this,Jt),"/").concat(encodeURIComponent(t)).concat(""!==s?"?"+s:"")}}],n&&Ht(e.prototype,n),r&&Ht(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==te(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===te(o)?o:String(o)),r)}var i,o}var ne=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"NEW",get:function(){return"NEW"}},{key:"RENDERED",get:function(){return"RENDERED"}},{key:"NOT_FOUND",get:function(){return"NOT_FOUND"}},{key:"ERROR",get:function(){return"ERROR"}},{key:"CLOSED",get:function(){return"CLOSED"}},{key:"STATES",get:function(){return[t.NEW,t.RENDERED,t.NOT_FOUND,t.ERROR,t.CLOSED]}}],(n=null)&&ee(e.prototype,n),r&&ee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function re(t){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==re(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===re(o)?o:String(o)),r)}var i,o}var oe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"ON_BANNER_ATTACHED",get:function(){return"amp:banner:attached"}},{key:"ON_BANNER_STATE_CHANGED",get:function(){return"amp:banner:state-changed"}},{key:"ON_BANNER_INTERSECTION_CHANGED",get:function(){return"amp:banner:intersection-changed"}},{key:"ON_BANNER_FIRST_TIME_SEEN",get:function(){return"amp:banner:first-time-seen"}},{key:"ON_BANNER_FIRST_TIME_FULLY_SEEN",get:function(){return"amp:banner:first-time-fully-seen"}},{key:"ON_BANNER_LINK_CLICKED",get:function(){return"amp:banner:link-clicked"}},{key:"ON_BANNER_BEFORE_CLOSE",get:function(){return"amp:banner:before-close"}},{key:"ON_BANNER_AFTER_CLOSE",get:function(){return"amp:banner:after-close"}},{key:"ON_BANNER_MUTATED",get:function(){return"amp:banner:mutated"}},{key:"ON_BEFORE_FETCH",get:function(){return"amp:fetch:before"}},{key:"ON_FETCH_ERROR",get:function(){return"amp:fetch:error"}},{key:"ON_FETCH_SUCCESS",get:function(){return"amp:fetch:success"}}],(n=null)&&ie(e.prototype,n),r&&ie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ae(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ae(o)?o:String(o)),r)}var i,o}var ce=function(){function t(e){var n=e.id,r=e.code,i=e.name,o=e.rotationSeconds,a=e.displayType,u=e.breakpointType;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.code=r,this.name=i,this.rotationSeconds=o,this.displayType=a,this.breakpointType=u}var e,n,r;return e=t,r=[{key:"createInitial",value:function(e){return new t({id:null,code:e,name:null,rotationSeconds:0,displayType:null,breakpointType:null})}}],(n=[{key:"isSingle",value:function(){return"single"===this.displayType}},{key:"isRandom",value:function(){return"random"===this.displayType}},{key:"isMultiple",value:function(){return"multiple"===this.displayType}},{key:"toObject",value:function(){return{id:this.id,code:this.code,name:this.name,rotationSeconds:this.rotationSeconds,displayType:this.displayType,breakpointType:this.breakpointType}}}])&&ue(e.prototype,n),r&&ue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function se(){se=function(t,e){return new n(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function n(t,r,i){var o=new RegExp(t,r);return e.set(o,i||e.get(t)),fe(o,n.prototype)}function r(t,n){var r=e.get(n);return Object.keys(r).reduce((function(e,n){var i=r[n];if("number"==typeof i)e[n]=t[i];else{for(var o=0;void 0===t[i[o]]&&o+1<i.length;)o++;e[n]=t[i[o]]}return e}),Object.create(null))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(n,RegExp),n.prototype.exec=function(e){var n=t.exec.call(this,e);if(n){n.groups=r(n,this);var i=n.indices;i&&(i.groups=r(i,this))}return n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var o=e.get(this);return t[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,(function(t,e){var n=o[e];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof i){var a=this;return t[Symbol.replace].call(this,n,(function(){var t=arguments;return"object"!=le(t[t.length-1])&&(t=[].slice.call(t)).push(r(t,a)),i.apply(this,t)}))}return t[Symbol.replace].call(this,n,i)},se.apply(this,arguments)}function fe(t,e){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fe(t,e)}var pe=se(/^(?:(\d+)\x2D(\d+):|(\d+):|<(\d+):|<=(\d+):|>(\d+):|>=(\d+):)?([^:\s]+)$/,{INTERVAL_FROM:1,INTERVAL_TO:2,EQ:3,LT:4,LTE:5,GT:6,GTE:7,VALUE:8}),ye={};function be(t,e){var n=function(t){if(t in ye)return ye[t];for(var e=t.split(",").map((function(t){return t.trim()})),n=[],r=0;r<e.length;r++){var i=e[r].match(pe);if(null!==i&&void 0!==i.groups&&void 0!==i.groups.VALUE){var o=void 0;switch(!0){case void 0!==i.groups.INTERVAL_FROM&&void 0!==i.groups.INTERVAL_TO:o={from:parseInt(i.groups.INTERVAL_FROM),to:parseInt(i.groups.INTERVAL_TO),matches:function(t){return t>=this.from&&t<=this.to}};break;case void 0!==i.groups.EQ:o={eq:parseInt(i.groups.EQ),matches:function(t){return t===this.eq}};break;case void 0!==i.groups.LT:o={lt:parseInt(i.groups.LT),matches:function(t){return t<this.lt}};break;case void 0!==i.groups.LTE:o={lte:parseInt(i.groups.LTE),matches:function(t){return t<=this.lte}};break;case void 0!==i.groups.GT:o={gt:parseInt(i.groups.GT),matches:function(t){return t>this.gt}};break;case void 0!==i.groups.GTE:o={gte:parseInt(i.groups.GTE),matches:function(t){return t>=this.gte}};break;default:o={matches:function(){return!0}}}o&&(o.matches=o.matches.bind(o),o.value=i.groups.VALUE,n.push(o))}}var a={rules:n,cache:{}};return a.evaluate=function(t){Number.isInteger(t)||(t=parseInt(t));var e="i_".concat(t);if(e in this.cache)return this.cache[e];for(var n=0;n<this.rules.length;n++){var r=this.rules[n];if(r.matches(t))return this.cache[e]=r.value}return this.cache[e]=null}.bind(a),ye[t]=a,a}(t);return n.evaluate(e)}function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){de(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(t,e,n){return(e=ge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ge(r.key),r)}}function ge(t){var e=function(t,e){if("object"!==ve(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ve(e)?e:String(e)}function Se(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Ee(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var Te=new WeakSet,Oe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Se(this,Te),this.options={},this.options=Ee(this,Te,ke).call(this,he({},e))}var e,n,r;return e=t,n=[{key:"has",value:function(t){return void 0!==this.options[t]}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.options[t]||e}},{key:"evaluate",value:function(t,e){return void 0===this.options[t]?null:be(this.options[t],e)}},{key:"override",value:function(t){this.options=he(he({},this.options),Ee(this,Te,ke).call(this,he({},t)))}}],n&&we(e.prototype,n),r&&we(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ke(t){if("loading-offset"in t){var e=t["loading-offset"],n="loading"in t?t.loading:"loading"in this.options?this.options.loading:null,r=null!==n?">=".concat(e,":").concat(n):null,i='AMP deprecation warning: The banner option "loading-offset" is deprecated and will be removed in some future release.';null!==r&&(i+=' Instead of options {"loading": "'.concat(n,'", "loading-offset": "').concat(e,'"} use an expression based option {"loading": "').concat(r,'"}.')),console.warn(i),delete t["loading-offset"],null!==r&&(t.loading=r)}return t}function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==je(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===je(o)?o:String(o)),r)}var i,o}function Pe(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ae(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Re(t,e,"get"))}function _e(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Re(t,e,"set"),n),n}function Re(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ie=new WeakMap,Ce=new WeakMap,Me=new WeakMap,De=new WeakMap,Be=new WeakMap,We=new WeakMap,xe=function(){function t(e,n,r,i,o){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,Ie,{writable:!0,value:void 0}),Pe(this,Ce,{writable:!0,value:void 0}),Pe(this,Me,{writable:!0,value:void 0}),Pe(this,De,{writable:!0,value:null}),Pe(this,Be,{writable:!0,value:null}),Pe(this,We,{writable:!0,value:{}}),this.constructor===t)throw new TypeError("Can not construct abstract class Banner.");_e(this,Ie,n),_e(this,Ce,r),_e(this,Me,new Oe(o)),this._eventBus=e,this._positionData=ce.createInitial(i),this.STATE=ne}var e,n,r;return e=t,n=[{key:"uid",get:function(){return Ae(this,Ie)}},{key:"element",get:function(){return Ae(this,Ce)}},{key:"state",get:function(){return Ae(this,De)}},{key:"stateInfo",get:function(){return Ae(this,Be)}},{key:"stateCounter",get:function(){return Ae(this,We)[this.state]||0}},{key:"position",get:function(){return this.positionData.code}},{key:"positionData",get:function(){return this._positionData}},{key:"options",get:function(){return Ae(this,Me)}},{key:"fingerprints",get:function(){return[]}},{key:"unsetFingerprint",value:function(t){}},{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(-1===this.STATE.STATES.indexOf(t))throw new TypeError("".concat(t," is not valid state."));_e(this,De,t),_e(this,Be,e.toString()),Ae(this,We)[t]=(Ae(this,We)[t]||0)+1,this._eventBus.dispatch(oe.ON_BANNER_STATE_CHANGED,{banner:this})}},{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.startsWith("amp:banner:"))throw new Error('Unable to attach listener on event "'.concat(t,'" through a banner.'));return this._eventBus.subscribe(t,(function(t){t.banner===this&&(null!==n?e.call(n,t):e(t))}),this)}},{key:"getCurrentBreakpoint",value:function(t){return null}},{key:"overrideOptions",value:function(t){Ae(this,Me).override(t)}},{key:"redrawIfNeeded",value:function(){}},{key:"isManaged",value:function(){return!1}},{key:"isExternal",value:function(){return!1}},{key:"isEmbed",value:function(){return!1}}],n&&Ne(e.prototype,n),r&&Ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Le(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Le(o)?o:String(o)),r)}var i,o}var Ue=function(){function t(e,n){var r=n.bannerId,i=n.bannerName,o=n.positionId,a=n.positionCode,u=n.positionName,c=n.campaignId,l=n.campaignCode,s=n.campaignName;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e,this.bannerId=r,this.bannerName=i,this.positionId=o,this.positionCode=a,this.positionName=u,this.campaignId=c,this.campaignCode=l,this.campaignName=s}var e,n,r;return e=t,r=[{key:"createFromProperties",value:function(e){return new t(btoa(encodeURIComponent(JSON.stringify(e))),e)}},{key:"createFromValue",value:function(e){return new t(e,JSON.parse(decodeURIComponent(atob(e))))}}],(n=[{key:"toString",value:function(){return this.value}}])&&Fe(e.prototype,n),r&&Fe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ze(t){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(t)}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ze(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ze(o)?o:String(o)),r)}var i,o}function He(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ge(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ye(t,e,"get"))}function Ve(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ye(t,e,"set"),n),n}function Ye(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var qe=new WeakMap,Ke=new WeakMap,Je=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),He(this,qe,{writable:!0,value:void 0}),He(this,Ke,{writable:!0,value:void 0}),Ve(this,qe,e),Ve(this,Ke,n)}var e,n,r;return e=t,(n=[{key:"breakpoint",get:function(){return Ge(this,qe)}},{key:"data",get:function(){return Ge(this,Ke)}}])&&$e(e.prototype,n),r&&$e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Qe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Qe(o)?o:String(o)),r)}var i,o}function Ze(t,e,n){tn(t,e),e.set(t,n)}function tn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function en(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,rn(t,e,"get"))}function nn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,rn(t,e,"set"),n),n}function rn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var on=new WeakMap,an=new WeakMap,un=new WeakMap,cn=new WeakMap,ln=new WeakMap,sn=new WeakSet,fn=function(){function t(e,n){var r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tn(r=this,i=sn),i.add(r),Ze(this,on,{writable:!0,value:void 0}),Ze(this,an,{writable:!0,value:void 0}),Ze(this,un,{writable:!0,value:[]}),Ze(this,cn,{writable:!0,value:null}),Ze(this,ln,{writable:!0,value:{min:null,max:null,reset:function(){this.min=this.max=null}}}),nn(this,on,e),nn(this,an,n)}var e,n,r;return e=t,(n=[{key:"addContent",value:function(t,e){en(this,un).push(new Je(t,e)),nn(this,cn,null)}},{key:"contents",get:function(){return en(this,un)}},{key:"content",get:function(){var t=this;if(null!==en(this,cn)&&!this.needRedraw())return en(this,cn);en(this,ln).reset();var e=en(this,on).width,n=en(this,an),r=null,i=null,o=null,a=[];if(function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,sn,pn).call(this,en(this,un),(function(u){var c=u.breakpoint;null!==c?(a.push(c),("min"===n&&e>=c&&(null===o||o<c)||"max"===n&&e<=c&&(null===o||o>c))&&(i=u,o=c,en(t,ln)[n]=c)):r=u})),null===i&&null===r)throw new Error("Unable to resolve content, no contents found.");a.sort((function(t,e){return t-e})),"min"===n?a.unshift(null):a.push(null);var u=a.indexOf(o);return"max"===n&&u-1 in a&&(en(this,ln).min=a[u-1]),"min"===n&&u+1 in a&&(en(this,ln).max=a[u+1]),nn(this,cn,null!==i?i:r)}},{key:"needRedraw",value:function(){if(null===en(this,cn))return!0;var t=en(this,on).width;return null!==en(this,ln).min&&t<en(this,ln).min||null!==en(this,ln).max&&t>en(this,ln).max}}])&&Xe(e.prototype,n),r&&Xe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pn(t,e){for(var n in t)e(t[n],n)}function yn(t){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(t)}function bn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==yn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==yn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===yn(o)?o:String(o)),r)}var i,o}function hn(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function dn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,gn(t,e,"get"))}function wn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,gn(t,e,"set"),n),n}function gn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Sn=new WeakMap,En=new WeakMap,Tn=new WeakMap,On=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),hn(this,Sn,{writable:!0,value:void 0}),hn(this,En,{writable:!0,value:void 0}),hn(this,Tn,{writable:!0,value:null}),wn(this,Sn,e),wn(this,En,new fn(r,n));var i,o=bn(dn(this,Sn).contents);try{for(o.s();!(i=o.n()).done;){var a=i.value;"img"!==a.type||"dimensions"in a||(a.dimensions={width:null,height:null}),dn(this,En).addContent(a.breakpoint,a)}}catch(t){o.e(t)}finally{o.f()}}var e,n,r;return e=t,(n=[{key:"fingerprint",get:function(){return dn(this,Tn)},set:function(t){if(!(t instanceof Ue))throw new TypeError("The value must be instance of Fingerprint object.");wn(this,Tn,t)}},{key:"id",get:function(){return dn(this,Sn).id}},{key:"name",get:function(){return dn(this,Sn).name||null}},{key:"score",get:function(){return dn(this,Sn).score}},{key:"campaign",get:function(){return console.warn("Usage of deprecated property `BannerData.campaign`. Please use property `campaignCode` instead."),this.campaignCode()}},{key:"campaignId",get:function(){return dn(this,Sn).campaign_id||null}},{key:"campaignCode",get:function(){return dn(this,Sn).campaign_code||dn(this,Sn).campaign||null}},{key:"campaignName",get:function(){return dn(this,Sn).campaign_name||null}},{key:"content",get:function(){return dn(this,En).content.data}},{key:"needRedraw",value:function(){return dn(this,En).needRedraw()}}])&&mn(e.prototype,n),r&&mn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==kn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===kn(o)?o:String(o)),r)}var i,o}function Nn(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Pn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,_n(t,e,"get"))}function An(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,_n(t,e,"set"),n),n}function _n(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Rn=new WeakMap,In=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Nn(this,Rn,{writable:!0,value:void 0}),An(this,Rn,e)}var e,n,r;return e=t,(n=[{key:"positionCode",get:function(){return Pn(this,Rn).positionData.code}},{key:"rotationSeconds",get:function(){return Pn(this,Rn).positionData.rotationSeconds}},{key:"displayType",get:function(){return Pn(this,Rn).positionData.displayType}},{key:"breakpointType",get:function(){return Pn(this,Rn).positionData.breakpointType}},{key:"fingerprints",get:function(){return Pn(this,Rn).fingerprints}},{key:"bannerData",get:function(){return Pn(this,Rn).bannerData}}])&&jn(e.prototype,n),r&&jn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Cn(t){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cn(t)}function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Cn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Cn(o)?o:String(o)),r)}var i,o}var Dn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"randomByWeights",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weight",n={},r=0,i=0;i<t.length;i++)r+=t[i][e];for(var o=0;o<t.length;o++)n[o]=t[o][e]/r;for(var a=0,u=Math.random();u>0;)u-=n[a],a++;return t[--a]?t[a]:t[0]}}],(n=null)&&Mn(e.prototype,n),r&&Mn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bn(t){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(t)}function Wn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return xn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Bn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Bn(o)?o:String(o)),r)}var i,o}function Fn(t,e){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fn(t,e)}function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$n(t);if(e){var i=$n(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zn(t)}(this,n)}}function zn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $n(t){return $n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$n(t)}function Hn(t,e){Vn(t,e),e.add(t)}function Gn(t,e,n){Vn(t,e),e.set(t,n)}function Vn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yn(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function qn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Jn(t,e,"get"))}function Kn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Jn(t,e,"set"),n),n}function Jn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Qn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,rr=new WeakMap,ir=new WeakSet,or=new WeakSet,ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fn(t,e)}(o,t);var e,n,r,i=Un(o);function o(t,e,n,r,a,u){var c,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};for(var f in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Hn(zn(c=i.call(this,n,r,a,u,s)),or),Hn(zn(c),ir),Gn(zn(c),Qn,{writable:!0,value:void 0}),Gn(zn(c),Xn,{writable:!0,value:void 0}),Gn(zn(c),Zn,{writable:!0,value:[]}),Gn(zn(c),tr,{writable:!0,value:void 0}),Gn(zn(c),er,{writable:!0,value:!1}),Gn(zn(c),nr,{writable:!0,value:null}),Gn(zn(c),rr,{writable:!0,value:[]}),Kn(zn(c),Qn,t),Kn(zn(c),Xn,e),Kn(zn(c),tr,l),l)qn(zn(c),Zn).push(new yt(f,l[f]));return c.setState(c.STATE.NEW,"Banner created."),c}return e=o,(n=[{key:"html",set:function(t){this.element.innerHTML=t}},{key:"resources",get:function(){return qn(this,Zn)}},{key:"rawResources",get:function(){return qn(this,tr)}},{key:"data",get:function(){return console.warn("Usage of deprecated property `ManagedBanner.data`. Please use property `positionData` for accessing information about a position."),new In(this)}},{key:"fingerprints",get:function(){var t;try{t=this.bannerData}catch(t){return[]}return null===t?[]:(this.positionData.isMultiple()||(t=[t]),t.map((function(t){return t.fingerprint})))}},{key:"bannerData",get:function(){if(null!==qn(this,nr))return qn(this,nr);if(!qn(this,rr).length)return null;var t=null,e=this.positionData,n=function(t){return Ue.createFromProperties({bannerId:t.id,bannerName:t.name,positionId:e.id,positionCode:e.code,positionName:e.name,campaignId:t.campaignId,campaignCode:t.campaignCode,campaignName:t.campaignName})};switch(!0){case e.isSingle():(t=qn(this,rr).reduce((function(t,e){return t.score>=e.score?t:e}))).fingerprint=n(t);break;case e.isRandom():(t=Dn.randomByWeights(qn(this,rr),"score")).fingerprint=n(t);break;case e.isMultiple():var r,i=Wn(t=qn(this,rr).sort((function(t,e){return e.score-t.score})));try{for(i.s();!(r=i.n()).done;){var o=r.value;o.fingerprint=n(o)}}catch(t){i.e(t)}finally{i.f()}break;default:throw new Error("Invalid display type ".concat(this.displayType,"."))}return Kn(this,nr,t),t}},{key:"unsetFingerprint",value:function(t){var e=t.bannerId,n=this.positionData;if(qn(this,rr).filter((function(t){return t.id===e}))[0]){switch(!0){case n.isSingle():Kn(this,rr,[]),Kn(this,nr,null);break;case n.isRandom():qn(this,nr)&&qn(this,nr).id===e?(Kn(this,rr,[]),Kn(this,nr,null)):Kn(this,rr,qn(this,rr).filter((function(t){return t.id!==e})));break;case n.isMultiple():Kn(this,rr,qn(this,rr).filter((function(t){return t.id!==e}))),qn(this,nr)&&Kn(this,nr,qn(this,nr).filter((function(t){return t.id!==e})))}0>=qn(this,rr).length?this.setState(this.STATE.CLOSED,"Banner has empty data."):n.isRandom()&&this.redrawIfNeeded()}}},{key:"setResponseData",value:function(t){if(qn(this,er))throw new Error("Data for banner on position ".concat(this.position," is already set."));this._positionData=new ce({id:t.position_id||null,code:this._positionData.code,name:t.position_name||null,rotationSeconds:t.rotation_seconds,displayType:t.display_type,breakpointType:t.breakpoint_type}),"options"in t&&this.overrideOptions(t.options);var e=[];for(var n in t.banners||[])e.push(new On(t.banners[n],t.breakpoint_type,qn(this,Qn)));Kn(this,rr,e),Kn(this,er,!0),0>=qn(this,rr).length?this.setState(this.STATE.CLOSED,"Banner has empty data."):Yn(this,ir,ur).call(this,"Banner was successfully rendered.")}},{key:"getCurrentBreakpoint",value:function(t){var e=this.bannerData,n=(e=(Array.isArray(e)?e:e?[e]:[]).find((function(e){return e.id===t})))&&e.content?e.content.breakpoint:null;return null===n?null:parseInt(n)}},{key:"isManaged",value:function(){return!0}},{key:"redrawIfNeeded",value:function(){Yn(this,or,cr).call(this)&&Yn(this,ir,ur).call(this,"Banner was successfully redrawn.")}}])&&Ln(e.prototype,n),r&&Ln(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(xe);function ur(t){try{this.html=qn(this,Xn).render(this)}catch(t){return void this.setState(this.STATE.ERROR,"Render error: "+t.message)}this.setState(this.STATE.RENDERED,t)}function cr(){var t=this.bannerData;for(var e in Array.isArray(t)||(t=[t]),t)if(t[e].needRedraw())return!0;return!1}function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function sr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return fr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function fr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==lr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===lr(o)?o:String(o)),r)}var i,o}var yr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"parseResources",value:function(t){var e,n={},r=[].filter.call(t.attributes,(function(t){return/^data-amp-resource-\S+/.test(t.name)})),i=sr(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.value&&(n[o.name.slice(18)]=o.value.split(",").map((function(t){return t.trim()})))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"parseOptions",value:function(t){var e,n={},r=sr([].filter.call(t.attributes,(function(t){return/^data-amp-option-\S+/.test(t.name)})));try{for(r.s();!(e=r.n()).done;){var i=e.value;i.value&&(n[i.name.slice(16)]=i.value.trim())}}catch(t){r.e(t)}finally{r.f()}return n}}],(n=null)&&pr(e.prototype,n),r&&pr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function vr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==br(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===br(o)?o:String(o)),r)}var i,o}function dr(t,e){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dr(t,e)}function wr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sr(t);if(e){var i=Sr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gr(t)}(this,n)}}function gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sr(t)}function Er(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Tr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,kr(t,e,"get"))}function Or(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,kr(t,e,"set"),n),n}function kr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var jr=new WeakMap,Nr=new WeakMap,Pr=new WeakMap,Ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dr(t,e)}(o,t);var e,n,r,i=wr(o);function o(t,e,n,r){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),!("ampBannerExternal"in r.dataset))throw new Error('Unable to initialize ExternalBanner from element that does not have an attribute "data-amp-external".');var u=JSON.parse(decodeURIComponent(atob(r.dataset.ampBannerExternal)));if(!("state"in u)||!("positionData"in u))throw new Error('Unable to initialize ExternalBanner data attribute "data-amp-external" is malformed.');var c=u.state,l=new ce(u.positionData),s=yr.parseOptions(r);Er(gr(a=i.call(this,e,n,r,l.code,s)),jr,{writable:!0,value:[]}),Er(gr(a),Nr,{writable:!0,value:null}),Er(gr(a),Pr,{writable:!0,value:!1});var f,p=[],y={},b=vr(r.querySelectorAll("[data-amp-banner-fingerprint]"));try{for(b.s();!(f=b.n()).done;){var v=f.value,m=Ue.createFromValue(v.dataset.ampBannerFingerprint);p.push(m);var h,d=vr(v.querySelectorAll("[data-amp-content-breakpoint]"));try{for(d.s();!(h=d.n()).done;){var w=h.value,g=w.dataset.ampContentBreakpoint;g="default"===g?null:parseInt(g),m.bannerId in y||(y[m.bannerId]=new fn(t,l.breakpointType)),y[m.bannerId].addContent(g,w)}}catch(t){d.e(t)}finally{d.f()}}}catch(t){b.e(t)}finally{b.f()}return a._positionData=l,Or(gr(a),jr,p),Or(gr(a),Nr,y),a.setState(c.value,c.info),a}return e=o,(n=[{key:"fingerprints",get:function(){return Tr(this,jr)}},{key:"unsetFingerprint",value:function(t){Or(this,jr,Tr(this,jr).filter((function(e){return e.value!==t.value})));var e=t.bannerId;e in Tr(this,Nr)&&delete Tr(this,Nr)[e],0>=Tr(this,jr).length&&this.setState(this.STATE.CLOSED,"Banner has empty data.")}},{key:"getCurrentBreakpoint",value:function(t){var e=Tr(this,Nr)[t]||null;if(null===e)return null;if(Tr(this,Pr))return e.content?e.content.breakpoint:null;var n,r=vr(e.contents);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("none"!==getComputedStyle(i.data).display)return i.breakpoint}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"isExternal",value:function(){return!0}},{key:"delegateResponsiveBehaviour",value:function(){if(!Tr(this,Pr)){Or(this,Pr,!0);var t,e=vr(this.element.querySelectorAll("style"));try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(t){e.e(t)}finally{e.f()}this.redrawIfNeeded()}}},{key:"redrawIfNeeded",value:function(){if(Tr(this,Pr))for(var t in Tr(this,Nr)){var e=Tr(this,Nr)[t];if(e.needRedraw()){var n,r=e.content,i=vr(e.contents);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.data.style.display=o===r?"block":"none"}}catch(t){i.e(t)}finally{i.f()}}}}}])&&hr(e.prototype,n),r&&hr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(xe);function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function Rr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==_r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_r(o)?o:String(o)),r)}var i,o}function Ir(t,e){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ir(t,e)}function Cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dr(t);if(e){var i=Dr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mr(t)}(this,n)}}function Mr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dr(t){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dr(t)}function Br(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Wr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Lr(t,e,"get"))}function xr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Lr(t,e,"set"),n),n}function Lr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Fr=new WeakMap,Ur=new WeakMap,zr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ir(t,e)}(o,t);var e,n,r,i=Cr(o);function o(t,e,n,r,a,u){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Br(Mr(c=i.call(this,t,e,n,a,u)),Fr,{writable:!0,value:void 0}),Br(Mr(c),Ur,{writable:!0,value:void 0}),xr(Mr(c),Fr,r),xr(Mr(c),Ur,[]),c.setState(c.STATE.NEW,"Banner created."),c}return e=o,(n=[{key:"iframe",get:function(){return Wr(this,Fr)}},{key:"fingerprints",get:function(){return Wr(this,Ur)}},{key:"unsetFingerprint",value:function(t){xr(this,Ur,Wr(this,Ur).filter((function(e){return e.value!==t.value}))),0>=Wr(this,Ur).length&&this.setState(this.STATE.CLOSED,"Banner has empty data.")}},{key:"getCurrentBreakpoint",value:function(t){throw new Error("Method EmbedBanner.getCurrentBreakpoint() is not readable.")}},{key:"isEmbed",value:function(){return!0}},{key:"updatePositionData",value:function(t){for(var e=this.positionData,n=0,r=["id","name","rotationSeconds","displayType","breakpointType","dimensions"];n<r.length;n++){var i=r[n];i in t&&(e[i]=t[i])}}},{key:"updateFingerprints",value:function(t){xr(this,Ur,t.map((function(t){return t instanceof Ue?t:Ue.createFromValue(t)})))}}])&&Rr(e.prototype,n),r&&Rr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(xe);function $r(t){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(t)}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==$r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==$r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$r(o)?o:String(o)),r)}var i,o}function Gr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Vr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Yr(t,e,"set"),n),n}function Yr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var qr=new WeakMap,Kr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Gr(this,qr,{writable:!0,value:void 0}),Vr(this,qr,e-1)}var e,n,r;return e=t,(n=[{key:"getNextIdentifier",value:function(){var t,e;return Vr(this,qr,(t=function(t,e){return e.get?e.get.call(t):e.value}(e=this,Yr(e,qr,"get")),++t))}}])&&Hr(e.prototype,n),r&&Hr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jr(t,e){if(t instanceof e.HTMLElement)return t;if("string"!=typeof t)throw new TypeError("Element must be instance of HTMLElement or String");var n;if(!((n="#"===t.charAt(0)?document.getElementById(t.slice(1)):document.querySelector(t))instanceof e.HTMLElement))throw new TypeError("Selector "+t+" is invalid.");return n}function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function Xr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Zr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Qr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Qr(o)?o:String(o)),r)}var i,o}function ei(t,e,n){ni(t,e),e.set(t,n)}function ni(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ri(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ii(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ai(t,e,"get"))}function oi(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ai(t,e,"set"),n),n}function ai(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ui=new WeakMap,ci=new WeakMap,li=new WeakMap,si=new WeakMap,fi=new WeakMap,pi=new WeakMap,yi=new WeakSet,bi=function(){function t(e,n){var r,i,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ni(r=this,i=yi),i.add(r),ei(this,ui,{writable:!0,value:void 0}),ei(this,ci,{writable:!0,value:void 0}),ei(this,li,{writable:!0,value:void 0}),ei(this,si,{writable:!0,value:void 0}),ei(this,fi,{writable:!0,value:[]}),ei(this,pi,{writable:!0,value:void 0}),oi(this,ui,e),oi(this,ci,n),oi(this,li,a),oi(this,si,new Kr),oi(this,pi,new MutationObserver((function(t){var e,n=Xr(t);try{for(n.s();!(e=n.n()).done;){var r,i=e.value;if(i.target instanceof HTMLElement){var a=null===(r=i.target.closest("[data-amp-attached]"))||void 0===r||null===(r=r.dataset)||void 0===r?void 0:r.ampAttached,u=void 0!==a?o.getBannerByUid(parseInt(a)):null;u&&ii(o,ui).dispatch(oe.ON_BANNER_MUTATED,{banner:u,mutation:i})}}}catch(t){n.e(t)}finally{n.f()}}))),this.STATE=ne}var e,n,r;return e=t,n=[{key:"addExternalBanner",value:function(t){t=Jr(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:window);var e=ii(this,si).getNextIdentifier();t.setAttribute("data-amp-attached",e);var n=new Ar(ii(this,ci),ii(this,ui),e,t);return ri(this,yi,vi).call(this,t),ii(this,fi).push(n),n}},{key:"addManagedBanner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;if(null===ii(this,li))throw new Error("Unable to add managed banner, renderer is not provided.");t=Jr(t,i);var o=ii(this,si).getNextIdentifier();t.setAttribute("data-amp-attached",o);var a=new ar(ii(this,ci),ii(this,li),ii(this,ui),o,t,e,n,r);return ri(this,yi,vi).call(this,t),ii(this,fi).push(a),a}},{key:"addEmbedBanner",value:function(t,e,n,r){t=Jr(t,window),e=Jr(e,window);var i=ii(this,si).getNextIdentifier();t.setAttribute("data-amp-attached",i);var o=new zr(ii(this,ui),i,t,e,n,r);return ri(this,yi,vi).call(this,t),ii(this,fi).push(o),o}},{key:"removeBanner",value:function(t){var e=ii(this,fi).length;return oi(this,fi,ii(this,fi).filter((function(e){return e!==t}))),e!==ii(this,fi).length}},{key:"getBannersByState",value:function(t){var e=t.state,n=t.managed,r=void 0===n||n,i=t.external,o=void 0===i||i,a=t.embed,u=void 0===a||a;return ii(this,fi).filter((function(t){return t instanceof xe&&t.state===e&&!(t instanceof ar&&!r||t instanceof Ar&&!o||t instanceof zr&&!u)}))}},{key:"getBannerByFingerprint",value:function(t){var e,n=t instanceof Ue?t.value:t,r=Xr(ii(this,fi));try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!(i instanceof zr)){var o,a=Xr(i.fingerprints);try{for(a.s();!(o=a.n()).done;)if(o.value.value===n)return i}catch(t){a.e(t)}finally{a.f()}}}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"getBannerByUid",value:function(t){var e,n=Xr(ii(this,fi));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.uid===t)return r}}catch(t){n.e(t)}finally{n.f()}return null}}],n&&ti(e.prototype,n),r&&ti(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vi(t){t._ampBannerMutationsObserved||(ii(this,pi).observe(t,{subtree:!0,childList:!0,characterData:!1,attributes:!0,attributeFilter:["data-amp-banner-close"]}),t._ampBannerMutationsObserved=!0)}function mi(t){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(t)}function hi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==mi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===mi(o)?o:String(o)),r)}var i,o}function di(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function wi(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,gi(t,e,"set"),n),n}function gi(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Si=new WeakMap,Ei=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),di(this,Si,{writable:!0,value:void 0}),wi(this,Si,e)}var e,n,r;return e=t,r=[{key:"fromCurrentWindow",value:function(){return new t((function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}))}}],(n=[{key:"width",get:function(){return(t=this,e=Si,function(t,e){return e.get?e.get.call(t):e.value}(t,gi(t,e,"get"))).call(this);var t,e}}])&&hi(e.prototype,n),r&&hi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ti(t){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(t)}function Oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Ti(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ti(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ti(o)?o:String(o)),r)}var i,o}function ki(t,e){Ni(t,e),e.add(t)}function ji(t,e,n){Ni(t,e),e.set(t,n)}function Ni(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pi(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,_i(t,e,"get"))}function Ai(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,_i(t,e,"set"),n),n}function _i(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Ri(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var Ii=new WeakMap,Ci=new WeakMap,Mi=new WeakMap,Di=new WeakMap,Bi=new WeakSet,Wi=new WeakSet,xi=new WeakSet,Li=function(){function t(e){var n=this,r=e.storage,i=e.key,o=e.maxItems,a=e.onExternalChange;switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ki(this,xi),ki(this,Wi),ki(this,Bi),ji(this,Ii,{writable:!0,value:void 0}),ji(this,Ci,{writable:!0,value:void 0}),ji(this,Mi,{writable:!0,value:void 0}),ji(this,Di,{writable:!0,value:null}),r){case"localStorage":"localStorage"in window?r=window.localStorage:(console.warn("LocalStorage is not accessible in the window, fallback to memoryStorage."),r=Ri(this,xi,zi).call(this));break;case"sessionStorage":"sessionStorage"in window?r=window.sessionStorage:(console.warn("SessionStorage is not accessible in the window, fallback to memoryStorage."),r=Ri(this,xi,zi).call(this));break;default:"memoryStorage"!==r&&console.warn('Unknown storage "'.concat(r,'", fallback to memoryStorage.')),r=Ri(this,xi,zi).call(this)}Ai(this,Ii,r),Ai(this,Ci,i),Ai(this,Mi,o),a&&Pi(this,Ii)instanceof Storage&&window.addEventListener("storage",(function(t){if(null===t.key||Pi(n,Ci)===t.key){var e=Pi(n,Di)||[],r=null!==t.newValue&&""!==t.newValue?t.newValue.split(","):[],i=r.filter((function(t){return!e.includes(t)}));Ai(n,Di,r),0<i.length&&a(i)}}))}var e,n,r;return e=t,(n=[{key:"persist",value:function(t,e){var n=Ri(this,Bi,Fi).call(this),r=n.indexOf(t),i=!1;e&&-1===r?(n.push(t),i=!0):e||-1===r||(n.splice(r,1),i=!0),i&&(n.length>Pi(this,Mi)&&n.splice(n.length-Pi(this,Mi)),Ai(this,Di,n),Ri(this,Wi,Ui).call(this))}},{key:"isClosed",value:function(t){return-1!==Ri(this,Bi,Fi).call(this).indexOf(t)}}])&&Oi(e.prototype,n),r&&Oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fi(){if(null!==Pi(this,Di))return Pi(this,Di);var t=Pi(this,Ii).getItem(Pi(this,Ci)),e=null!==t&&""!==t?t.split(","):[];return Ai(this,Di,e)}function Ui(){null!==Pi(this,Di)&&Pi(this,Ii).setItem(Pi(this,Ci),Pi(this,Di).join(","))}function zi(){var t={items:{}};return t.setItem=function(t,e){this.items[t]=e}.bind(t),t.getItem=function(t){return t in this.items?this.items[t]:null}.bind(t),t}function $i(t){return $i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(t)}function Hi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==$i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==$i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$i(o)?o:String(o)),r)}var i,o}function Gi(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Vi(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,qi(t,e,"get"))}function Yi(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,qi(t,e,"set"),n),n}function qi(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ki=new WeakMap,Ji=new WeakMap,Qi=new WeakMap,Xi=new WeakMap,Zi=function(){function t(e){var n=this,r=e.bannerManager,i=e.eventBus,o=e.config,a=void 0===o?{storage:"memoryStorage",key:"amp-closed-banners",maxItems:500}:o,u=e.frameMessenger,c=void 0===u?void 0:u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Gi(this,Ki,{writable:!0,value:void 0}),Gi(this,Ji,{writable:!0,value:void 0}),Gi(this,Qi,{writable:!0,value:void 0}),Gi(this,Xi,{writable:!0,value:void 0}),Yi(this,Ki,r),Yi(this,Ji,i),Yi(this,Qi,c);var l=a.storage,s=a.key,f=a.maxItems;Yi(this,Xi,new Li({storage:l,key:s,maxItems:f,onExternalChange:function(t){t.forEach((function(t){return n.closeBanner(t)}))}})),Vi(this,Qi)&&Vi(this,Qi).on("bannerClosed",(function(t){var e=t.data,r=e.uid,i=e.bannerId,o=e.fingerprint,a=Vi(n,Ki).getBannerByUid(r);a instanceof zr&&(Vi(n,Xi).persist(i,!0),a.unsetFingerprint(o))}))}var e,n,r;return e=t,(n=[{key:"attachUi",value:function(){var t=this,e=function(e){var n=e.banner,r=e.button;r._ampCloseActionAttached||(r._ampCloseActionAttached=!0,r.addEventListener("click",(function(e){e.preventDefault();var i=r.closest("[data-amp-banner-fingerprint]");if(i)for(var o=i.dataset.ampBannerFingerprint,a=n.fingerprints,u=0;u<a.length;u++){var c=a[u];c.value===o&&t.closeBanner(c.bannerId)}})))};Vi(this,Ji).subscribe(oe.ON_BANNER_STATE_CHANGED,(function(t){var n=t.banner;n.state===n.STATE.RENDERED?Array.from(n.element.querySelectorAll("[data-amp-banner-close]")).forEach((function(t){e({banner:n,button:t})})):n.state===n.STATE.CLOSED&&(n.element.innerHTML="")}),null,-100),Vi(this,Ji).subscribe(oe.ON_BANNER_MUTATED,(function(t){var n=t.banner,r=t.mutation;n.state===n.STATE.RENDERED&&(0<r.addedNodes.length&&Array.from(n.element.querySelectorAll("[data-amp-banner-close]")).forEach((function(t){e({banner:n,button:t})})),r.attributeName&&e({banner:n,button:r.target}))}))}},{key:"isClosed",value:function(t){return Vi(this,Xi).isClosed(t)}},{key:"closeBanner",value:function(t){for(var e,n=this,r=Vi(this,Ki).getBannersByState({state:Vi(this,Ki).STATE.RENDERED}),i=function(){var e=r[o],i=e.fingerprints.filter((function(e){return e.bannerId===t}))[0];if(void 0===i)return 0;if(e instanceof zr)return Vi(n,Qi)&&Vi(n,Qi).sendToBanner(e,"closeBanner",{bannerId:t}),{v:void 0};var a=e.element.querySelector('[data-amp-banner-fingerprint="'.concat(i.value,'"]'));if(!a)return 0;var u=function(t){return t.remove()};Vi(n,Ji).dispatch(oe.ON_BANNER_BEFORE_CLOSE,{fingerprint:i,element:a,banner:e,setOperation:function(t){return u=t}}),Promise.resolve(u(a)).then((function(){Vi(n,Xi).persist(t,!0),Vi(n,Ji).dispatch(oe.ON_BANNER_AFTER_CLOSE,{fingerprint:i,element:a,banner:e}),e.unsetFingerprint(i)}))},o=0;o<r.length;o++)if(0!==(e=i())&&e)return e.v}}])&&Hi(e.prototype,n),r&&Hi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function to(t){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},to(t)}function eo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return no(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return no(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function no(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==to(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==to(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===to(o)?o:String(o)),r)}var i,o}function io(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function oo(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,uo(t,e,"get"))}function ao(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,uo(t,e,"set"),n),n}function uo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var co=new WeakMap,lo=new WeakMap,so=new WeakMap,fo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),io(this,co,{writable:!0,value:void 0}),io(this,lo,{writable:!0,value:void 0}),io(this,so,{writable:!0,value:void 0}),ao(this,co,new Kr),ao(this,lo,{}),ao(this,so,{})}var e,n,r;return e=t,n=[{key:"subscribe",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("function"!=typeof e)throw new TypeError("Listener must be of type function.");var o="idx_"+oo(this,co).getNextIdentifier();return oo(this,lo)[t]=oo(this,lo)[t]||{},oo(this,lo)[t][o]={callback:e,scope:r,priority:i},t in oo(this,so)&&delete oo(this,so)[t],function(){t in oo(n,lo)&&o in oo(n,lo)[t]&&delete oo(n,lo)[t][o]}}},{key:"dispatch",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,o=eo(this.getSortedListeners(t));try{for(o.s();!(i=o.n()).done;){var a,u=i.value;null!==u.scope?(a=u.callback).call.apply(a,[u.scope].concat(n)):u.callback.apply(u,n)}}catch(t){o.e(t)}finally{o.f()}}},{key:"reset",value:function(){ao(this,lo,{})}},{key:"getSortedListeners",value:function(t){if(t in oo(this,so))return oo(this,so)[t];var e=Object.values(oo(this,lo)[t]||{}).sort((function(t,e){return t.priority>e.priority?-1:t.priority<e.priority?1:0}));return oo(this,so)[t]=e}}],n&&ro(e.prototype,n),r&&ro(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const po=_.template;function yo(t){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yo(t)}function bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==yo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===yo(o)?o:String(o)),r)}var i,o}function vo(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function mo(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,wo(t,e,"get"))}function ho(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,wo(t,e,"set"),n),n}function wo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var go=new WeakMap,So=new WeakMap,Eo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),vo(this,go,{writable:!0,value:void 0}),vo(this,So,{writable:!0,value:void 0}),ho(this,go,e),ho(this,So,{})}var e,n,r;return e=t,(n=[{key:"getTemplate",value:function(t){if(t in mo(this,So))return mo(this,So)[t];if(!(t in mo(this,go)))throw new Error('Template with type "'.concat(t,'" not found.'));return mo(this,So)[t]=po(mo(this,go)[t])}}])&&bo(e.prototype,n),r&&bo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function To(t){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},To(t)}function Oo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==To(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==To(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===To(o)?o:String(o)),r)}var i,o}function ko(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function jo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,No(t,e,"set"),n),n}function No(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Po=new WeakMap,Ao=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ko(this,Po,{writable:!0,value:void 0}),jo(this,Po,new Eo(e))}var e,n,r;return e=t,(n=[{key:"render",value:function(t){return(e=this,n=Po,function(t,e){return e.get?e.get.call(t):e.value}(e,No(e,n,"get"))).getTemplate(t.positionData.displayType)({banner:t,data:t.bannerData});var e,n}}])&&Oo(e.prototype,n),r&&Oo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function Ro(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Io(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ro(Object(n),!0).forEach((function(e){Co(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Co(t,e,n){return(e=Wo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Do(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Do(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Do(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wo(r.key),r)}}function Wo(t){var e=function(t,e){if("object"!==_o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_o(e)?e:String(e)}var xo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"create",value:function(t,e,n,r,i,o){var a=[];for(var u in i)a.push({pixels:parseInt(u),ratio:i[u]});a=a.sort((function(t,e){return e.pixels-t.pixels}));var c=function(t){var e,n=getComputedStyle(t),i=(t.offsetWidth-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight))-(parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth)))*(t.offsetHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom))-(parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth))),o=Mo(a);try{for(o.s();!(e=o.n()).done;){var u=e.value;if(i>=u.pixels)return u.ratio}}catch(t){o.e(t)}finally{o.f()}return r};return new IntersectionObserver((function(r){var i,a=[],u={},l={},s=Mo(r);try{for(s.s();!(i=s.n()).done;){var f=i.value,p=f.target.dataset.ampBannerFingerprint,y=t.getBannerByFingerprint(p);if(y){var b=n[p];if(b){var v={fingerprint:b.fingerprint,element:f.target,banner:y};if(a.push(Io(Io({},v),{},{entry:f})),!b.alreadySeen){var m=f.intersectionRatio>=c(f.target);u[p]=!(p in u)||!u[p].isIntersecting&&m?{fingerprintArgs:v,fingerprintMetadata:b,isIntersecting:m}:u[p]}if(!b.alreadyFullySeen){var h=.99<=f.intersectionRatio;l[p]=!(p in l)||!l[p].isFullyIntersecting&&h?{fingerprintArgs:v,fingerprintMetadata:b,isFullyIntersecting:h}:l[p]}}}}}catch(t){s.e(t)}finally{s.f()}for(var d=function(){var t=g[w],n=t.fingerprintArgs,r=t.fingerprintMetadata,i=t.isIntersecting;i&&!r.alreadySeen&&null===r.firstTimeSeenTimeoutId?r.firstTimeSeenTimeoutId=setTimeout((function(){r.alreadySeen=!0,e.dispatch(oe.ON_BANNER_FIRST_TIME_SEEN,n)}),o):i||null===r.firstTimeSeenTimeoutId||(clearTimeout(r.firstTimeSeenTimeoutId),r.firstTimeSeenTimeoutId=null)},w=0,g=Object.values(u);w<g.length;w++)d();for(var S=function(){var t=T[E],n=t.fingerprintArgs,r=t.fingerprintMetadata,i=t.isFullyIntersecting;i&&!r.alreadyFullySeen&&null===r.firstTimeFullySeenTimeoutId?r.firstTimeFullySeenTimeoutId=setTimeout((function(){r.alreadyFullySeen=!0,e.dispatch(oe.ON_BANNER_FIRST_TIME_FULLY_SEEN,n)}),o):i||null===r.firstTimeFullySeenTimeoutId||(clearTimeout(r.firstTimeFullySeenTimeoutId),r.firstTimeFullySeenTimeoutId=null)},E=0,T=Object.values(l);E<T.length;E++)S();for(var O=0,k=a;O<k.length;O++){var j=k[O];e.dispatch(oe.ON_BANNER_INTERSECTION_CHANGED,j)}}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,.99]})}}],(n=null)&&Bo(e.prototype,n),r&&Bo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lo(t){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lo(t)}function Fo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Lo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Lo(o)?o:String(o)),r)}var i,o}function $o(t,e,n){Ho(t,e),e.set(t,n)}function Ho(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Go(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Vo(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,qo(t,e,"get"))}function Yo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,qo(t,e,"set"),n),n}function qo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ko=new WeakMap,Jo=new WeakMap,Qo=new WeakMap,Xo=new WeakMap,Zo=new WeakMap,ta=new WeakSet,ea=function(){function t(e,n,r){var i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ho(i=this,o=ta),o.add(i),$o(this,Ko,{writable:!0,value:void 0}),$o(this,Jo,{writable:!0,value:void 0}),$o(this,Qo,{writable:!0,value:void 0}),$o(this,Xo,{writable:!0,value:void 0}),$o(this,Zo,{writable:!0,value:void 0}),Yo(this,Ko,!1),Yo(this,Jo,e),Yo(this,Qo,n),Yo(this,Xo,{}),Yo(this,Zo,xo.create(e,n,Vo(this,Xo),r.defaultIntersectionRatio,r.intersectionRatioMap,r.firstTimeSeenTimeout))}var e,n,r;return e=t,(n=[{key:"start",value:function(){var t=this;if(!Vo(this,Ko)){Yo(this,Ko,!0),Vo(this,Qo).subscribe(oe.ON_BANNER_STATE_CHANGED,(function(e){var n=e.banner;ne.RENDERED!==n.state||n.isEmbed()||Go(t,ta,na).call(t,n)}),null,-100),Vo(this,Qo).subscribe(oe.ON_BANNER_MUTATED,(function(e){var n=e.banner,r=e.mutation;ne.RENDERED===n.state&&!n.isEmbed()&&0<r.addedNodes.length&&Go(t,ta,na).call(t,n)}));var e,n=Fo(Vo(this,Jo).getBannersByState({state:ne.RENDERED,embed:!1}));try{for(n.s();!(e=n.n()).done;){var r=e.value;Go(this,ta,na).call(this,r)}}catch(t){n.e(t)}finally{n.f()}}}}])&&zo(e.prototype,n),r&&zo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function na(t){var e,n=this,r=this,i=Fo(t.element.querySelectorAll("[data-amp-banner-fingerprint]"));try{var o=function(){var t=e.value,i=t.dataset.ampBannerFingerprint;i in Vo(n,Xo)||(Vo(n,Xo)[i]={fingerprint:Ue.createFromValue(i),alreadySeen:!1,alreadyFullySeen:!1,firstTimeSeenTimeoutId:null,firstTimeFullySeenTimeoutId:null}),t._ampBannerFingerprintObserved||(t._ampBannerFingerprintObserved=!0,Vo(n,Zo).observe(t));var o,a=Fo(t.getElementsByTagName("a"));try{for(a.s();!(o=a.n()).done;){var u=o.value;u._ampClickingMetricsAttached||(u._ampClickingMetricsAttached=!0,u.addEventListener("click",(function(t){var e=Vo(r,Xo)[i];if(e){var n=Vo(r,Jo).getBannerByFingerprint(i);if(n){var o={fingerprint:e.fingerprint,element:this.closest("[data-amp-banner-fingerprint]"),banner:n,target:this,clickEvent:t};e.alreadySeen||(e.alreadySeen=!0,Vo(r,Qo).dispatch(oe.ON_BANNER_FIRST_TIME_SEEN,o)),Vo(r,Qo).dispatch(oe.ON_BANNER_LINK_CLICKED,o)}else console.warn('Unable to invoke an event "amp:banner:link-clicked" because the banner for fingerprint "'.concat(i,'" not found.'))}else console.warn('Unable to invoke an event "amp:banner:link-clicked" because the fingerprint "'.concat(i,'" not managed.'))})))}}catch(t){a.e(t)}finally{a.f()}};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}}function ra(t){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(t)}function ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ra(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ra(o)?o:String(o)),r)}var i,o}var oa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"BANNER_LOADED",get:function(){return"amp:banner:loaded"}},{key:"BANNER_DISPLAYED",get:function(){return"amp:banner:displayed"}},{key:"BANNER_FULLY_DISPLAYED",get:function(){return"amp:banner:fully-displayed"}},{key:"BANNER_CLICKED",get:function(){return"amp:banner:clicked"}},{key:"BANNER_CLOSED",get:function(){return"amp:banner:closed"}},{key:"EVENTS",get:function(){return[t.BANNER_LOADED,t.BANNER_DISPLAYED,t.BANNER_FULLY_DISPLAYED,t.BANNER_CLICKED,t.BANNER_CLOSED]}}],(n=null)&&ia(e.prototype,n),r&&ia(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function aa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ua(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aa(Object(n),!0).forEach((function(e){ca(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ca(t,e,n){return(e=pa(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function la(t){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la(t)}function sa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pa(r.key),r)}}function fa(t,e,n){return e&&sa(t.prototype,e),n&&sa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pa(t){var e=function(t,e){if("object"!==la(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==la(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===la(e)?e:String(e)}var ya=fa((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n={channel_code:"channel_code",banner_id:"banner_id",banner_name:"banner_name",position_id:"position_id",position_code:"position_code",position_name:"position_name",campaign_id:"campaign_id",campaign_code:"campaign_code",campaign_name:"campaign_name",breakpoint:"breakpoint",link:"link"};if("params"in e)for(var r in e.params)r in n&&"string"==typeof e.params[r]&&(n[r]=e.params[r]);var i="extraParams"in e&&"object"===la(e.extraParams)?e.extraParams:{},o={},a=function(t){return{name:t,enabled:!0,params:ua({},n),extraParams:ua({},i)}};if(o[oa.BANNER_LOADED]=a(oa.BANNER_LOADED),o[oa.BANNER_DISPLAYED]=a(oa.BANNER_DISPLAYED),o[oa.BANNER_FULLY_DISPLAYED]=a(oa.BANNER_FULLY_DISPLAYED),o[oa.BANNER_CLICKED]=a(oa.BANNER_CLICKED),o[oa.BANNER_CLOSED]=a(oa.BANNER_CLOSED),"events"in e)for(var u in e.events){var c=e.events[u];if(!0!==c&&u in o)if(!1!==c)if("string"!=typeof c){if("object"===la(c)){if("name"in c&&"string"==typeof c.name&&(o[u].name=c.name),"params"in c&&"object"==la(c.params))for(var l in c.params)l in o[u].params&&"string"==typeof c.params[l]&&(o[u].params[l]=c.params[l]);"extraParams"in c&&"object"==la(c.extraParams)&&(o[u].extraParams=ua(ua({},o[u].extraParams),c.extraParams))}}else o[u].name=c;else o[u].enabled=!1}this.events=o}));function ba(t){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function va(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ma(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ma(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ma(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ha(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function da(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ha(Object(n),!0).forEach((function(e){wa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wa(t,e,n){return(e=Sa(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ga(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sa(r.key),r)}}function Sa(t){var e=function(t,e){if("object"!==ba(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ba(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ba(e)?e:String(e)}function Ea(t,e,n){Ta(t,e),e.set(t,n)}function Ta(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oa(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ka(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Na(t,e,"get"))}function ja(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Na(t,e,"set"),n),n}function Na(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Pa=new WeakMap,Aa=new WeakMap,_a=new WeakMap,Ra=new WeakMap,Ia=new WeakMap,Ca=new WeakMap,Ma=new WeakSet,Da=function(){function t(e,n,r){var i,o,a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ta(i=this,o=Ma),o.add(i),Ea(this,Pa,{writable:!0,value:void 0}),Ea(this,Aa,{writable:!0,value:void 0}),Ea(this,_a,{writable:!0,value:void 0}),Ea(this,Ra,{writable:!0,value:void 0}),Ea(this,Ia,{writable:!0,value:{started:!1,events:[],cleanup:[]}}),Ea(this,Ca,{writable:!0,value:function(t){var e=t.event,n=t.fingerprint,r=t.banner,i=r.getCurrentBreakpoint(n.bannerId);i=null===i?"default":"".concat("min"===r.positionData.breakpointType?">=":"<=").concat(i);var o={};return o[e.params.channel_code]=ka(a,_a),o[e.params.banner_id]=n.bannerId,o[e.params.banner_name]=n.bannerName,o[e.params.position_id]=n.positionId,o[e.params.position_code]=n.positionCode,o[e.params.position_name]=n.positionName,o[e.params.campaign_id]=n.campaignId,o[e.params.campaign_code]=n.campaignCode,o[e.params.campaign_name]=n.campaignName,o[e.params.breakpoint]=i,da(da({},o),e.extraParams)}}),ja(this,Pa,e),ja(this,Aa,n),ja(this,_a,r),ja(this,Ra,!1)}var e,n,r;return e=t,(n=[{key:"collectBeforeAttach",value:function(){var t=this;if(!ka(this,Ia).started&&!ka(this,Ra)){ka(this,Ia).started=!0;var e=ka(this,Aa),n=new ya({}),r=n.events[oa.BANNER_LOADED],i=n.events[oa.BANNER_DISPLAYED],o=n.events[oa.BANNER_FULLY_DISPLAYED],a=n.events[oa.BANNER_CLICKED],u=n.events[oa.BANNER_CLOSED];ka(this,Ia).cleanup.push(e.subscribe(oe.ON_BANNER_STATE_CHANGED,(function(e){var n=e.banner;if(!n.isEmbed()&&ne.RENDERED===n.state&&1===n.stateCounter){var i,o=va(n.fingerprints);try{for(o.s();!(i=o.n()).done;){var a=i.value;ka(t,Ia).events.push({name:oa.BANNER_LOADED,params:ka(t,Ca).call(t,{event:r,fingerprint:a,banner:n})})}}catch(t){o.e(t)}finally{o.f()}}}))),ka(this,Ia).cleanup.push(e.subscribe(oe.ON_BANNER_FIRST_TIME_SEEN,(function(e){var n=e.fingerprint,r=e.banner;ka(t,Ia).events.push({name:oa.BANNER_DISPLAYED,params:ka(t,Ca).call(t,{event:i,fingerprint:n,banner:r})})}))),ka(this,Ia).cleanup.push(e.subscribe(oe.ON_BANNER_FIRST_TIME_FULLY_SEEN,(function(e){var n=e.fingerprint,r=e.banner;ka(t,Ia).events.push({name:oa.BANNER_FULLY_DISPLAYED,params:ka(t,Ca).call(t,{event:o,fingerprint:n,banner:r})})}))),ka(this,Ia).cleanup.push(e.subscribe(oe.ON_BANNER_LINK_CLICKED,(function(e){var n=e.fingerprint,r=e.banner,i=e.target,o=ka(t,Ca).call(t,{event:a,fingerprint:n,banner:r});o[a.params.link]=i.href||"",ka(t,Ia).events.push({name:oa.BANNER_CLICKED,params:o})}))),ka(this,Ia).cleanup.push(e.subscribe(oe.ON_BANNER_AFTER_CLOSE,(function(e){var n=e.fingerprint,r=e.banner;ka(t,Ia).events.push({name:oa.BANNER_CLOSED,params:ka(t,Ca).call(t,{event:u,fingerprint:n,banner:r})})})))}}},{key:"attach",value:function(t){var e=this;if(!ka(this,Ra)){ja(this,Ra,!0);var n=ka(this,Aa),r=ka(this,Pa);if(r.hasAnyReceiver()){var i=t.events[oa.BANNER_LOADED],o=t.events[oa.BANNER_DISPLAYED],a=t.events[oa.BANNER_FULLY_DISPLAYED],u=t.events[oa.BANNER_CLICKED],c=t.events[oa.BANNER_CLOSED];if(ka(this,Ia).started){for(var l in ka(this,Ia).events){var s=ka(this,Ia).events[l],f=s.name,p=s.params,y=t.events[f];if(y.enabled){var b={};for(var v in p)b[y.params[v]]=p[v];r.send(y.name,da(da({},b),y.extraParams))}}Oa(this,Ma,Ba).call(this)}i.enabled&&n.subscribe(oe.ON_BANNER_STATE_CHANGED,(function(t){var n=t.banner;if(!n.isEmbed()&&ne.RENDERED===n.state&&1===n.stateCounter){var o,a=va(n.fingerprints);try{for(a.s();!(o=a.n()).done;){var u=o.value;r.send(i.name,ka(e,Ca).call(e,{event:i,fingerprint:u,banner:n}))}}catch(t){a.e(t)}finally{a.f()}}})),o.enabled&&n.subscribe(oe.ON_BANNER_FIRST_TIME_SEEN,(function(t){var n=t.fingerprint,i=t.banner;r.send(o.name,ka(e,Ca).call(e,{event:o,fingerprint:n,banner:i}))})),a.enabled&&n.subscribe(oe.ON_BANNER_FIRST_TIME_FULLY_SEEN,(function(t){var n=t.fingerprint,i=t.banner;r.send(a.name,ka(e,Ca).call(e,{event:a,fingerprint:n,banner:i}))})),u.enabled&&n.subscribe(oe.ON_BANNER_LINK_CLICKED,(function(t){var n=t.fingerprint,i=t.banner,o=t.target,a=ka(e,Ca).call(e,{event:u,fingerprint:n,banner:i});a[u.params.link]=o.href||"",r.send(u.name,a)})),c.enabled&&n.subscribe(oe.ON_BANNER_AFTER_CLOSE,(function(t){var n=t.fingerprint,i=t.banner;r.send(c.name,ka(e,Ca).call(e,{event:c,fingerprint:n,banner:i}))}))}else Oa(this,Ma,Ba).call(this)}}}])&&ga(e.prototype,n),r&&ga(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ba(){for(var t in ka(this,Ia).cleanup)ka(this,Ia).cleanup[t]();ka(this,Ia).events=[],ka(this,Ia).cleanup=[]}var Wa=!1;const xa=function(t,e){if(!("plausible"in window)||"function"!=typeof window.plausible)return!Wa&&console.warn("Unable to send metrics to Plausible because the function plausible() does not occur in the window."),void(Wa=!0);Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),window.plausible(t,{props:e})};var La=!1;const Fa=function(t,e){if(!("gtag"in window)||"function"!=typeof window.gtag)return!La&&console.warn("Unable to send metrics to Google Analytics because the function gtag() does not occur in the window."),void(La=!0);Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),window.gtag("event",t,e)};function Ua(t){return Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ua(t)}function za(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Ua(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ua(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ha=!1;const Ga=function(t,e){if(!("dataLayer"in window))return!Ha&&console.warn("Unable to send metrics to GTM because the dataLayer does not occur in the window."),void(Ha=!0);Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),window.dataLayer.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?za(Object(n),!0).forEach((function(e){$a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({event:t},e))},Va=function(t,e){console.log("Sending metrics.",{eventName:t,eventArgs:e})};function Ya(t){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ya(t)}function qa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ka(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ka(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ja(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Ya(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ya(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ya(o)?o:String(o)),r)}var i,o}function Qa(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Xa(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,tu(t,e,"get"))}function Za(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,tu(t,e,"set"),n),n}function tu(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var eu=new WeakMap,nu=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Qa(this,eu,{writable:!0,value:void 0}),Za(this,eu,Array.isArray(e)?e:[e])}var e,n,r;return e=t,r=[{key:"createFromReceivers",value:function(e){if(!e)return new t([]);var n,r=[],i=qa(e=Array.isArray(e)?e:[e]);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("function"!=typeof o)switch(o){case"plausible":r.push(xa);break;case"gtag":r.push(Fa);break;case"gtm":r.push(Ga);break;case"debug":r.push(Va);break;default:console.warn("Unable to send metrics to a receiver of unknown type",o)}else r.push(o)}}catch(t){i.e(t)}finally{i.f()}return new t(r)}}],(n=[{key:"hasAnyReceiver",value:function(){return Xa(this,eu).length}},{key:"send",value:function(t,e){var n,r=qa(Xa(this,eu));try{for(r.s();!(n=r.n()).done;)(0,n.value)(t,e)}catch(t){r.e(t)}finally{r.f()}}}])&&Ja(e.prototype,n),r&&Ja(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ru(t){return ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(t)}function iu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ru(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ru(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ru(o)?o:String(o)),r)}var i,o}function ou(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function au(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,cu(t,e,"get"))}function uu(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,cu(t,e,"set"),n),n}function cu(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var lu=new WeakMap,su=new WeakMap,fu=function(){function t(e){var n=e.origins,r=void 0===n?[]:n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ou(this,lu,{writable:!0,value:void 0}),ou(this,su,{writable:!0,value:void 0}),uu(this,su,new fo),uu(this,lu,r)}var e,n,r;return e=t,n=[{key:"on",value:function(t,e){au(this,su).subscribe(t,e)}},{key:"send",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";t.postMessage({message:e,data:n},r)}},{key:"listen",value:function(){var t=this;window.addEventListener("message",(function(e){if(!(0<au(t,lu).length&&-1===au(t,lu).indexOf(e.origin)||"object"!==ru(e.data))&&"message"in e.data&&"data"in e.data){var n=e.data,r=n.message,i={data:n.data,origin:e.origin};t._beforeDispatch(r,i)&&au(t,su).dispatch(r,i)}}),!1)}},{key:"_beforeDispatch",value:function(){return!0}}],n&&iu(e.prototype,n),r&&iu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pu(t){return pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(t)}function yu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return bu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function bu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==pu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pu(o)?o:String(o)),r)}var i,o}function mu(t,e){return mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mu(t,e)}function hu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wu(t);if(e){var i=wu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===pu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return du(t)}(this,n)}}function du(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wu(t){return wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wu(t)}function gu(t,e){Eu(t,e),e.add(t)}function Su(t,e,n){Eu(t,e),e.set(t,n)}function Eu(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tu(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ju(t,e,"get"))}function Ou(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ku(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ju(t,e,"set"),n),n}function ju(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Nu=new WeakMap,Pu=new WeakMap,Au=new WeakMap,_u=new WeakMap,Ru=new WeakMap,Iu=new WeakSet,Cu=new WeakSet,Mu=new WeakSet,Du=new WeakSet,Bu=new WeakSet,Wu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mu(t,e)}(o,t);var e,n,r,i=hu(o);function o(t){var e,n=t.origin,r=t.connectionData,a=t.bannerManager,u=t.metricsSender;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),gu(du(e=i.call(this,{origins:[n]})),Bu),gu(du(e),Du),gu(du(e),Mu),gu(du(e),Cu),gu(du(e),Iu),Su(du(e),Nu,{writable:!0,value:void 0}),Su(du(e),Pu,{writable:!0,value:void 0}),Su(du(e),Au,{writable:!0,value:void 0}),Su(du(e),_u,{writable:!0,value:void 0}),Su(du(e),Ru,{writable:!0,value:[]}),ku(du(e),Nu,n),ku(du(e),Pu,r),ku(du(e),Au,a),ku(du(e),_u,u);var c={};for(var l in c.adjustHeight=Ou(du(e),Iu,xu),c.stateChanged=Ou(du(e),Cu,Lu),c.linkClicked=Ou(du(e),Mu,Fu),c.metrics=Ou(du(e),Du,Uu),c)e.on(l,c[l].bind(du(e)));return window.addEventListener("resize",(function(){var t,n=yu(Tu(du(e),Au).getBannersByState({state:Tu(du(e),Au).STATE.RENDERED,managed:!1,external:!1,embed:!0}));try{for(n.s();!(t=n.n()).done;){var r=t.value;e.sendToBanner(r,"windowResized",{windowWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})}}catch(t){n.e(t)}finally{n.f()}})),e}return e=o,(n=[{key:"connectBanner",value:function(t){var e=this;t.iframe.addEventListener("load",(function(){var n=Tu(e,Pu);n.uid=t.uid,n.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.sendToBanner(t,"connect",n)}))}},{key:"sendToBanner",value:function(t,e,n){this.send(t.iframe.contentWindow,e,n,Tu(this,Nu))}},{key:"_beforeDispatch",value:function(t,e){var n=e.data.uid;if(-1===Tu(this,Ru).indexOf(n)){var r=Ou(this,Bu,zu).call(this,n);r&&(r.iframe.style.visibility="visible",Tu(this,Ru).push(n))}return!0}}])&&vu(e.prototype,n),r&&vu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(fu);function xu(t){var e=t.data,n=Ou(this,Bu,zu).call(this,e.uid);n&&(n.iframe.style.height=e.height+"px")}function Lu(t){var e=t.data,n=Ou(this,Bu,zu).call(this,e.uid);null!==n&&("positionData"in e&&n.updatePositionData(e.positionData),"fingerprints"in e&&n.updateFingerprints(e.fingerprints),n.setState(e.state,"[embed]: ".concat(e.stateInfo)))}function Fu(t){var e=t.data,n=e.href,r=e.target;"_blank"===r?window.open(n,r):window.location.href=n}function Uu(t){var e=t.data,n=e.eventName,r=e.eventArgs;Tu(this,_u).hasAnyReceiver()&&Tu(this,_u).send(n,r)}function zu(t){var e=Tu(this,Au).getBannerByUid(t);return e instanceof zr?e:(console.warn("Error in communication with embed banner. Embed banner with UID ".concat(t," not attached.")),null)}function $u(t){return $u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(t)}function Hu(t){return function(t){if(Array.isArray(t))return Yu(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Vu(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Vu(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Vu(t,e){if(t){if("string"==typeof t)return Yu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yu(t,e):void 0}}function Yu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==$u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==$u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$u(o)?o:String(o)),r)}var i,o}function Ku(t,e,n){Ju(t,e),e.set(t,n)}function Ju(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qu(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Zu(t,e,"get"))}function Xu(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Zu(t,e,"set"),n),n}function Zu(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var tc=new WeakMap,ec=new WeakMap,nc=new WeakMap,rc=new WeakMap,ic=new WeakMap,oc=new WeakMap,ac=new WeakMap,uc=new WeakMap,cc=new WeakMap,lc=new WeakMap,sc=new WeakMap,fc=new WeakMap,pc=new WeakSet,yc=function(){function t(e,n){var r,i,o=this;for(var a in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ju(r=this,i=pc),i.add(r),Ku(this,tc,{writable:!0,value:void 0}),Ku(this,ec,{writable:!0,value:void 0}),Ku(this,nc,{writable:!0,value:void 0}),Ku(this,rc,{writable:!0,value:void 0}),Ku(this,ic,{writable:!0,value:void 0}),Ku(this,oc,{writable:!0,value:null}),Ku(this,ac,{writable:!0,value:void 0}),Ku(this,uc,{writable:!0,value:void 0}),Ku(this,cc,{writable:!0,value:void 0}),Ku(this,lc,{writable:!0,value:void 0}),Ku(this,sc,{writable:!0,value:void 0}),Ku(this,fc,{writable:!0,value:void 0}),this.EVENTS=oe,Xu(this,tc,e),Xu(this,ec,n=function(t){var e=y({method:"GET",url:null,version:1,channel:null,locale:null,resources:{},origin:null,template:b,interaction:{defaultIntersectionRatio:.5,intersectionRatioMap:{},firstTimeSeenTimeout:1e3},metrics:{receiver:null,events:{},params:{},extraParams:{}},closing:{storage:"memoryStorage",key:"amp-closed-banners",maxItems:500}},t);if("string"!=typeof e.method||!(e.method.toUpperCase()in{GET:1,POST:1}))throw new Error('The option "method" must be one of these ["GET", "POST"], '.concat(e.method," passed."));if(e.method=e.method.toUpperCase(),"string"!=typeof e.url)throw new Error('The option "url" is required and must be a valid URL, '.concat(e.url," passed."));if("number"!=typeof e.version)throw new Error('The option "version" must be a number, '.concat(e.version," passed."));if("string"!=typeof e.channel)throw new Error('The option "channel" is required and must be a string, '.concat(e.channel," passed."));if(null!==e.locale&&"string"!=typeof e.locale)throw new Error('The option "locale" must be a string, '.concat(e.locale," passed."));if("object"!==h(e.resources))throw new Error('The option "resources" must be an object of that describes resources, '.concat(e.resources," passed."));if(null!==e.origin&&"string"!=typeof e.origin)throw new Error('The option "origin" must be a valid URL, '.concat(e.origin," passed."));if("object"!==h(e.template))throw new Error('The option "template" must be an object of the format { single: string, random: string, multiple: string }, '.concat(e.template," passed."));for(var n=0,r=Object.entries(e.template);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];if("string"!=typeof a)throw new Error('The option "template.'.concat(o,'" must be a string (lodash template), ').concat(a," passed."))}if("object"!==h(e.interaction))throw new Error('The option "interaction" must be an object of the format { intersectionRatio: int|float, firstTimeSeenTimeout: int }, '.concat(e.interaction," passed."));if("number"!=typeof e.interaction.defaultIntersectionRatio||.1>e.interaction.defaultIntersectionRatio||1<e.interaction.defaultIntersectionRatio)throw new Error('The option "interaction.defaultIntersectionRatio" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "'.concat(e.interaction.defaultIntersectionRatio,'" passed.'));if(e.interaction.defaultIntersectionRatio=d(e.interaction.defaultIntersectionRatio,"interaction.defaultIntersectionRatio"),"object"!==h(e.interaction.intersectionRatioMap))throw new Error('The option "interaction.intersectionRatioMap" must be an object with an integer keys (pixels) and valid ratios as values, '.concat(e.interaction.intersectionRatioMap," passed."));for(var u=0,c=Object.entries(e.interaction.intersectionRatioMap);u<c.length;u++){var l=v(c[u],2),s=l[0],f=l[1];if(Number(s).toString()!==s)throw new Error('The key "interaction.intersectionRatioMap.'.concat(s,'" must be an integer.'));if("number"!=typeof f||.1>f||1<f)throw new Error('The option "interaction.intersectionRatioMap.'.concat(s,'" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "').concat(e.interaction.intersectionRatioMap[s],'" passed.'));e.interaction.intersectionRatioMap[s]=d(f,"interaction.intersectionRatioMap."+s)}if(!Number.isInteger(e.interaction.firstTimeSeenTimeout)||500>e.interaction.firstTimeSeenTimeout)throw new Error('The option "interaction.firstTimeSeenTimeout" must be a int with a minimum value of 500, "'.concat(e.interaction.firstTimeSeenTimeout,'" passed.'));if("object"!==h(e.metrics))throw new Error('The option "metrics" must be an object of the format { receiver: null|string|function|array<string|function>, events: object, params: object }, '.concat(e.metrics," passed."));if(null!==e.metrics.receiver&&-1===["string","function"].indexOf(h(e.metrics.receiver))&&!Array.isArray(e.metrics.receiver))throw new Error('The option "metrics.receiver" must be a null or a string or a function or an array of strings|functions, "'.concat(e.metrics.receiver,'" passed.'));if(Array.isArray(e.metrics.receiver)){for(var p in e.metrics.receiver)if(-1===["string","function"].indexOf(h(e.metrics.receiver[p])))throw new Error('The option "metrics.receiver.'.concat(p,'" must be a string or a function, "').concat(e.metrics.receiver[p],'" passed.'))}else e.metrics.receiver=null!==e.metrics.receiver?[e.metrics.receiver]:[];if("object"!==h(e.metrics.events))throw new Error('The option "metrics.event" must be an object of the format { *: string|false|{ name?: string, params?: { *: string }, extraParams?: { *: scalar } } }, '.concat(JSON.stringify(e.metrics.events)," passed."));if("object"!==h(e.metrics.params))throw new Error('The option "metrics.params" must be an object of the format { *: string }, '.concat(JSON.stringify(e.metrics.params)," passed."));if("object"!==h(e.metrics.extraParams))throw new Error('The option "metrics.extraParams" must be an object of the format { *: scalar }, '.concat(JSON.stringify(e.metrics.params)," passed."));if("object"!==h(e.closing)||"string"!=typeof e.closing.storage||"string"!=typeof e.closing.key||!Number.isInteger(e.closing.maxItems)||1>e.closing.maxItems)throw new Error('The option "closing" must be an object of the format { storage: "memoryStorage"|"localStorage"|"sessionStorage", key: string, maxItems: integer<1, max> }, '.concat(JSON.stringify(e.closing)," passed."));return e}(n)),Xu(this,nc,new fo),Xu(this,rc,new Ft(n.method,n.url,n.version,n.channel)),Xu(this,ic,new Zt(n.url,n.version,n.channel)),Xu(this,ac,new bi(Qu(this,nc),Ei.fromCurrentWindow(),new Ao(n.template))),Xu(this,uc,new ea(Qu(this,ac),Qu(this,nc),n.interaction)),Xu(this,lc,nu.createFromReceivers(n.metrics.receiver)),Xu(this,sc,new Da(Qu(this,lc),Qu(this,nc),n.channel)),Xu(this,fc,new Wu({origin:n.url,connectionData:{extendedConfig:{interaction:n.interaction,metrics:{events:n.metrics.events,params:n.metrics.params,extraParams:n.metrics.extraParams}}},bannerManager:Qu(this,ac),metricsSender:Qu(this,lc)})),Xu(this,cc,new Zi({bannerManager:Qu(this,ac),eventBus:Qu(this,nc),config:{storage:n.closing.storage,key:n.closing.key,maxItems:n.closing.maxItems},frameMessenger:Qu(this,fc)})),this.setLocale(n.locale),Qu(this,rc).origin=n.origin,n.resources)Qu(this,rc).addDefaultResource(a,n.resources[a]),Qu(this,ic).addDefaultResource(a,n.resources[a]);window.addEventListener("resize",(function(){var t,e=Gu(Qu(o,ac).getBannersByState({state:Qu(o,ac).STATE.RENDERED,managed:!0,external:!0,embed:!1}));try{for(e.s();!(t=e.n()).done;){t.value.redrawIfNeeded()}}catch(t){e.e(t)}finally{e.f()}})),Qu(this,fc).listen(),Qu(this,sc).attach(new ya({events:n.metrics.events,params:n.metrics.params,extraParams:n.metrics.extraParams})),Qu(this,uc).start(),Qu(this,cc).attachUi()}var e,n,r;return e=t,n=[{key:"version",get:function(){return Qu(this,tc)}},{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Qu(this,nc).subscribe(t,e,n)}},{key:"setLocale",value:function(t){Qu(this,rc).locale=t,Qu(this,ic).locale=t}},{key:"setGateway",value:function(t){if(!function(t){return t instanceof S}(t))throw new TypeError("Argument gateway mut be instance of AbstractGateway.");Xu(this,oc,t)}},{key:"getGateway",value:function(){return null===Qu(this,oc)&&this.setGateway(new et),Qu(this,oc)}},{key:"createBanner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"managed",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:window;if(t=Jr(t,o),"embed"===i){var a=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,pc,bc).call(this,t,e,n,r),u=Qu(this,ac).addEmbedBanner(t,a,e,r);return Qu(this,fc).connectBanner(u),t.insertAdjacentElement("beforeend",a),u}return Qu(this,ac).addManagedBanner(t,e,n,r,o)}},{key:"closeBanner",value:function(t){Qu(this,cc).closeBanner(t)}},{key:"attachBanners",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=Gu(e.querySelectorAll("[data-amp-banner]:not([data-amp-attached])"));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.dataset.ampBanner;if(o){var a=void 0;if("ampBannerExternal"in i.dataset)a=Qu(this,ac).addExternalBanner(i,n);else{var u=yr.parseResources(i),c=yr.parseOptions(i),l=i.dataset.ampMode||"managed";a=this.createBanner(i,o,u,c,l,n)}Qu(this,nc).dispatch(this.EVENTS.ON_BANNER_ATTACHED,{banner:a})}else console.warn("Unable to attach a banner to the element ",i,' because the attribute "data-amp-banner" has an empty value.')}}catch(t){r.e(t)}finally{r.f()}}},{key:"fetch",value:function(){var t=this,e=Qu(this,ac).getBannersByState({state:Qu(this,ac).STATE.NEW,managed:!0,external:!1,embed:!1});if(e.length){var n,r=Qu(this,rc).create(),i=Gu(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.addPosition(o.position,o.resources,"1"!==o.options.get("omit-default-resources","0").toString())}}catch(t){i.e(t)}finally{i.f()}Qu(this,nc).dispatch(this.EVENTS.ON_BEFORE_FETCH),this.getGateway().fetch(r,(function(n){var r,i=n.data,o=Gu(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.position in i&&"banners"in i[a.position]&&Object.values(i[a.position].banners).length){for(var u=i[a.position],c=Array.isArray(u.banners)?u.banners:Object.values(u.banners),l=[],s=0;s<c.length;s++){var f=c[s];f.id&&!Qu(t,cc).isClosed(f.id)&&l.push(f)}u.banners=l,"embed"===u.mode&&0<u.banners.length?("options"in u&&a.overrideOptions(u.options),t.createBanner(a.element,a.position,a.rawResources,a.options.options,u.mode),Qu(t,ac).removeBanner(a)):a.setResponseData(u)}else a.setState(Qu(t,ac).STATE.NOT_FOUND,"Banner not found in fetched response.")}}catch(t){o.e(t)}finally{o.f()}Qu(t,nc).dispatch(t.EVENTS.ON_FETCH_SUCCESS,{response:n})}),(function(n){var r,i=Gu(e);try{for(i.s();!(r=i.n()).done;)r.value.setState(Qu(t,ac).STATE.ERROR,"Request on api failed.")}catch(t){i.e(t)}finally{i.f()}Qu(t,nc).dispatch(t.EVENTS.ON_FETCH_ERROR,{response:n})}))}}}],n&&qu(e.prototype,n),r&&qu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bc(t,e,n,r){var i=document.createElement("iframe"),o="cv=".concat(encodeURIComponent(this.version.semver)),a=new Oe(r),u=t.dataset.ampEmbedSrc||Qu(this,ic).create(e,n,a.options);u+=-1===u.indexOf("?")?"?".concat(o):"&".concat(o),i.width="100%",i.height="100%",i.allowFullscreen=!0,i.scrolling="no",i.style.border="none",i.style.overflow="hidden",i.style.background="transparent",i.style.visibility="hidden",i.setAttribute("allowtransparency","true");var c=a.evaluate("loading",0),l=a.evaluate("fetchpriority",0);return null!==c&&(i.loading=c),null!==l&&i.setAttribute("fetchpriority",l),Hu(t.attributes).map((function(t){var e=t.name,n=t.value;return e.startsWith("data-iframe-")&&i.setAttribute(e.substring(12),n)})),i.src=u,i}function vc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mc(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hc(t){return hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(t)}var dc=function(t,e){var n=Math.round(10*t)/10;return n!==t&&console.warn('The value for the option "'.concat(e,'" has been rounded to ').concat(n," (originally ").concat(t,").")),n};function wc(t){var e=y({interaction:{defaultIntersectionRatio:.5,intersectionRatioMap:{},firstTimeSeenTimeout:1e3},metrics:{events:{},params:{},extraParams:{}}},t);if("object"!==hc(e.interaction))throw new Error('The option "interaction" must be an object of the format { intersectionRatio: int|float, firstTimeSeenTimeout: int }, '.concat(e.interaction," passed."));if("number"!=typeof e.interaction.defaultIntersectionRatio||.1>e.interaction.defaultIntersectionRatio||1<e.interaction.defaultIntersectionRatio)throw new Error('The option "interaction.defaultIntersectionRatio" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "'.concat(e.interaction.defaultIntersectionRatio,'" passed.'));if(e.interaction.defaultIntersectionRatio=dc(e.interaction.defaultIntersectionRatio,"interaction.defaultIntersectionRatio"),"object"!==hc(e.interaction.intersectionRatioMap))throw new Error('The option "interaction.intersectionRatioMap" must be an object with an integer keys (pixels) and valid ratios as values, '.concat(e.interaction.intersectionRatioMap," passed."));for(var n=0,r=Object.entries(e.interaction.intersectionRatioMap);n<r.length;n++){var i=vc(r[n],2),o=i[0],a=i[1];if(Number(o).toString()!==o)throw new Error('The key "interaction.intersectionRatioMap.'.concat(o,'" must be an integer.'));if("number"!=typeof a||.1>a||1<a)throw new Error('The option "interaction.intersectionRatioMap.'.concat(o,'" must be a number between 0.1 and 1 in increments of 0.1 [e.g. 0.1, 0.2, 0.3, ...], "').concat(e.interaction.intersectionRatioMap[o],'" passed.'));e.interaction.intersectionRatioMap[o]=dc(a,"interaction.intersectionRatioMap."+o)}if(!Number.isInteger(e.interaction.firstTimeSeenTimeout)||500>e.interaction.firstTimeSeenTimeout)throw new Error('The option "interaction.firstTimeSeenTimeout" must be a int with a minimum value of 500, "'.concat(e.interaction.firstTimeSeenTimeout,'" passed.'));if("object"!==hc(e.metrics))throw new Error('The option "metrics" must be an object of the format { events: object, params: object }, '.concat(JSON.stringify(e.metrics)," passed."));if("object"!==hc(e.metrics.events))throw new Error('The option "metrics.event" must be an object of the format { *: string|false|{ name?: string, params?: { *: string }, extraParams?: { *: scalar } } }, '.concat(JSON.stringify(e.metrics.events)," passed."));if("object"!==hc(e.metrics.params))throw new Error('The option "metrics.params" must be an object of the format { *: string }, '.concat(JSON.stringify(e.metrics.params)," passed."));if("object"!==hc(e.metrics.extraParams))throw new Error('The option "metrics.extraParams" must be an object of the format { *: scalar }, '.concat(JSON.stringify(e.metrics.params)," passed."));return e}function gc(t){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(t)}function Sc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ec(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ec(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ec(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==gc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==gc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===gc(o)?o:String(o)),r)}var i,o}function Oc(t,e){return Oc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oc(t,e)}function kc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nc(t);if(e){var i=Nc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===gc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jc(t)}(this,n)}}function jc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nc(t){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nc(t)}function Pc(t,e){_c(t,e),e.add(t)}function Ac(t,e,n){_c(t,e),e.set(t,n)}function _c(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rc(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Mc(t,e,"get"))}function Ic(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Cc(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Mc(t,e,"set"),n),n}function Mc(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Dc=new WeakMap,Bc=new WeakMap,Wc=new WeakMap,xc=new WeakMap,Lc=new WeakMap,Fc=new WeakSet,Uc=new WeakSet,zc=new WeakSet,$c=new WeakSet,Hc=new WeakSet,Gc=new WeakSet,Vc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oc(t,e)}(o,t);var e,n,r,i=kc(o);function o(t){var e,n=t.clientEventBus,r=t.closingManager,a=t.origin,u=void 0===a?void 0:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Pc(jc(e=i.call(this,{origins:void 0!==u?[u]:[]})),Gc),Pc(jc(e),Hc),Pc(jc(e),$c),Pc(jc(e),zc),Pc(jc(e),Uc),Pc(jc(e),Fc),Ac(jc(e),Dc,{writable:!0,value:void 0}),Ac(jc(e),Bc,{writable:!0,value:void 0}),Ac(jc(e),Wc,{writable:!0,value:void 0}),Ac(jc(e),xc,{writable:!0,value:void 0}),Ac(jc(e),Lc,{writable:!0,value:void 0}),Cc(jc(e),Dc,n),Cc(jc(e),Bc,r),Cc(jc(e),Wc,u),Cc(jc(e),xc,null),Cc(jc(e),Lc,[]);var c={};c.connect=Ic(jc(e),Fc,Yc),c.closeBanner=Ic(jc(e),Uc,qc);var l={};for(var s in l[oe.ON_BANNER_STATE_CHANGED]=[Ic(jc(e),zc,Kc),0],l[oe.ON_BANNER_LINK_CLICKED]=[Ic(jc(e),$c,Jc),-100],l[oe.ON_BANNER_AFTER_CLOSE]=[Ic(jc(e),Hc,Qc),0],l)Rc(jc(e),Dc).subscribe(s,l[s][0].bind(jc(e)),null,l[s][1]);for(var f in c)e.on(f,c[f].bind(jc(e)));return e}return e=o,(n=[{key:"sendToParent",value:function(t,e){null!==Rc(this,xc)?(e.uid=Rc(this,xc),this.send(window.parent,t,e,Rc(this,Wc)||"*")):Rc(this,Lc).push({message:t,data:e})}}])&&Tc(e.prototype,n),r&&Tc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(fu);function Yc(t){var e=this,n=t.data;if(null===Rc(this,xc)){var r=n.uid;Cc(this,xc,r);var i=void 0,o=function(){var t=document.body.scrollHeight;i!==t&&(i=t,e.sendToParent("adjustHeight",{height:t}))};o(),setInterval(o,100),Ic(this,Gc,Xc).call(this)}else console.warn("The frame is already connected to the parent under the UID ".concat(Rc(this,xc),"."))}function qc(t){var e=t.data.bannerId;e&&Rc(this,Bc).closeBanner(e)}function Kc(t){var e=t.banner;if(ne.NEW!==e.state){var n={state:e.state,stateInfo:e.stateInfo};1===e.stateCounter&&(n.positionData=e.positionData.toObject(),n.fingerprints=e.fingerprints.map((function(t){return t.value}))),this.sendToParent("stateChanged",n)}}function Jc(t){var e=t.target;t.clickEvent.preventDefault(),this.sendToParent("linkClicked",{href:e.href,target:e.target||null})}function Qc(t){var e=t.fingerprint;this.sendToParent("bannerClosed",{bannerId:e.bannerId,fingerprint:e.value})}function Xc(){var t,e=Sc(Rc(this,Lc));try{for(e.s();!(t=e.n()).done;){var n=t.value;this.sendToParent(n.message,n.data)}}catch(t){e.e(t)}finally{e.f()}Cc(this,Lc,[])}function Zc(t){return Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(t)}function tl(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return el(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return el(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function el(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Zc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Zc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Zc(o)?o:String(o)),r)}var i,o}function rl(t,e){ol(t,e),e.add(t)}function il(t,e,n){ol(t,e),e.set(t,n)}function ol(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function al(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ul(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ll(t,e,"get"))}function cl(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ll(t,e,"set"),n),n}function ll(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var sl=new WeakMap,fl=new WeakMap,pl=new WeakMap,yl=new WeakMap,bl=new WeakMap,vl=new WeakMap,ml=new WeakMap,hl=new WeakMap,dl=new WeakMap,wl=new WeakMap,gl=new WeakMap,Sl=new WeakMap,El=new WeakSet,Tl=new WeakSet,Ol=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),rl(this,Tl),rl(this,El),il(this,sl,{writable:!0,value:void 0}),il(this,fl,{writable:!0,value:void 0}),il(this,pl,{writable:!0,value:void 0}),il(this,yl,{writable:!0,value:void 0}),il(this,bl,{writable:!0,value:void 0}),il(this,vl,{writable:!0,value:void 0}),il(this,ml,{writable:!0,value:void 0}),il(this,hl,{writable:!0,value:void 0}),il(this,dl,{writable:!0,value:void 0}),il(this,wl,{writable:!0,value:void 0}),il(this,gl,{writable:!0,value:void 0}),il(this,Sl,{writable:!0,value:null}),this.EVENTS=oe,cl(this,sl,e),cl(this,fl,function(t){return y({channel:null},t)}(n)),cl(this,pl,wc({})),cl(this,pl,null),cl(this,yl,new fo),cl(this,bl,new bi(ul(this,yl),new Ei((function(){return ul(r,Sl)||window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})))),cl(this,hl,new Zi({bannerManager:ul(this,bl),eventBus:ul(this,yl)})),cl(this,vl,new Vc({clientEventBus:ul(this,yl),closingManager:ul(this,hl)})),cl(this,gl,!1),cl(this,ml,null),cl(this,dl,new nu([al(this,El,kl).bind(this)],[])),cl(this,wl,new Da(ul(this,dl),ul(this,yl),ul(this,fl).channel)),ul(this,vl).on("connect",(function(t){var e=t.data;cl(r,pl,wc(e.extendedConfig)),cl(r,Sl,e.windowWidth),cl(r,ml,new ea(ul(r,bl),ul(r,yl),ul(r,pl).interaction)),al(r,Tl,jl).call(r),ul(r,wl).attach(new ya(ul(r,pl).metrics)),ul(r,ml).start()})),ul(this,vl).on("windowResized",(function(t){var e=t.data;cl(r,Sl,e.windowWidth),al(r,Tl,jl).call(r)})),ul(this,vl).listen(),ul(this,wl).collectBeforeAttach(),ul(this,hl).attachUi()}var e,n,r;return e=t,n=[{key:"version",get:function(){return ul(this,sl)}},{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ul(this,yl).subscribe(t,e,n)}},{key:"attachBanner",value:function(){if(ul(this,gl))throw new Error("Method attachBanner() should be called only once.");var t=document.querySelector("[data-amp-banner]:not([data-amp-attached])");if(t){var e=ul(this,bl).addExternalBanner(t);cl(this,gl,!0),window.self!==window.top&&e.delegateResponsiveBehaviour(),ul(this,yl).dispatch(this.EVENTS.ON_BANNER_ATTACHED,{banner:e})}else console.warn("No banner found in the embed client.")}}],n&&nl(e.prototype,n),r&&nl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kl(t,e){ul(this,vl).sendToParent("metrics",{eventName:t,eventArgs:e})}function jl(){var t,e=tl(ul(this,bl).getBannersByState({state:ne.RENDERED}));try{for(e.s();!(t=e.n()).done;){t.value.redrawIfNeeded()}}catch(t){e.e(t)}finally{e.f()}}function Nl(t){return Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(t)}function Pl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Nl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Nl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Nl(o)?o:String(o)),r)}var i,o}var Al=r.i8,_l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new yc(new p(Al,"standard@".concat(Al)),t)}},{key:"createEmbed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ol(new p(Al,"embed@".concat(Al)),t)}},{key:"version",get:function(){return Al}}],(n=null)&&Pl(e.prototype,n),r&&Pl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();AMPClientFactory=e.default})();